-----
### ğŸ’¡ğŸ’¡ğŸ’¡ @Query - ë ˆí¬ì§€í† ë¦¬ ë©”ì„œë“œì— ì¿¼ë¦¬ ì •ì˜
-----
1. ë©”ì„œë“œì— JPQL ì¿¼ë¦¬ ì‘ì„±
```java
package study.data_jpa.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import study.data_jpa.entity.Member;

import java.util.List;

public interface MemberRepository extends JpaRepository<Member, Long> {

    ...

    @Query("SELECT m FROM Member m WHERE m.username = :username AND m.age = :age")
    List<Member> findUser(@Param("username") String username, @Param("age") int age);
}
```
  - @org.springframework.data.jpa.repository.Query ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš©
  - ğŸ’¡ ì‹¤í–‰í•  ë©”ì„œë“œì— ì •ì  ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ë¯€ë¡œ ì´ë¦„ ì—†ëŠ” Named ì¿¼ë¦¬ë¼ í•  ìˆ˜ ìˆìŒ
  - ğŸ’¡ JPA Named ì¿¼ë¦¬ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ë°œê²¬ ê°€ëŠ¥ (ë§¤ìš° í° ì¥ì )

2. ì°¸ê³ 
   - ì‹¤ë¬´ì—ì„œëŠ” ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ê¸°ëŠ¥ì€ íŒŒë¼ë¯¸í„°ê°€ ì¦ê°€í•˜ë©´ ë©”ì„œë“œ ì´ë¦„ì´ ë§¤ìš° ì§€ì €ë¶„í•´ì§
   - ë”°ë¼ì„œ, @Query ê¸°ëŠ¥ì„ ìì£¼ ì‚¬ìš©

-----
### @Query, ê°’, DTO ì¡°íšŒí•˜ê¸°
----
1. ë‹¨ìˆœíˆ ê°’ í•˜ë‚˜ë¥¼ ì¡°íšŒ
```java
package study.data_jpa.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import study.data_jpa.entity.Member;

import java.util.List;

public interface MemberRepository extends JpaRepository<Member, Long> {

    ...

    @Query("SELECT m.username FROM Member m")
    List<String> findUsernameList();
}

```
  - ğŸ’¡ JPA ê°’ íƒ€ì…(@Embedded)ë„ ì´ ë°©ì‹ìœ¼ë¡œ ì¡°íšŒ ê°€ëŠ¥

2. DTOë¡œ ì§ì ‘ ì¡°íšŒ
```java
package study.data_jpa.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import study.data_jpa.dto.MemberDto;
import study.data_jpa.entity.Member;

import java.util.List;

public interface MemberRepository extends JpaRepository<Member, Long> {

    ...
    
    @Query("SELECT new study.data_jpa.dto.MemberDto(m.id, m.username, t.name) FROM Member m JOIN m.team t")
    List<MemberDto> findMemberDto();
}

```
  - ğŸ’¡ğŸ’¡ ì£¼ì˜! DTOë¡œ ì§ì ‘ ì¡°íšŒí•˜ë ¤ë©´ JPAì˜ new ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨ (íŒ¨í‚¤ì§€, í´ë˜ìŠ¤ëª… ì „ì²´ ëª…ì‹œ)
  - ğŸ’¡ğŸ’¡ ê·¸ë¦¬ê³ , ë‹¤ìŒê³¼ ê°™ì´ ìƒì„±ìê°€ ë§ëŠ” DTOê°€ í•„ìš” (JPAì™€ ì‚¬ìš©ë°©ì‹ ë™ì¼)
  - MemberDto
```java
package study.data_jpa.dto;

import lombok.Data;

@Data
public class MemberDto {
    private Long id;
    private String username;
    private String teamName;

    public MemberDto(Long id, String username, String teamName) { // ìƒì„±ì í•„ìš”
        this.id = id;
        this.username = username;
        this.teamName = teamName;
    }
}
```

-----
### íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
-----
1. ìœ„ì¹˜ ê¸°ë°˜
```java
SELECT m FROM Member m WHERE m.username = ?0 // ìœ„ì¹˜ ê¸°ë°˜
```

2. ğŸ’¡ ì´ë¦„ ê¸°ë°˜
```java
SELECT m FROM Member m WHERE m.username = :name // ì´ë¦„ ê¸°ë°˜
```

3. íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
```java
package study.data_jpa.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import study.data_jpa.dto.MemberDto;
import study.data_jpa.entity.Member;

import java.util.List;

public interface MemberRepository extends JpaRepository<Member, Long> {

    ...
    
    @Query("SELECT m FROM Member m WHERE m.username = :name")
    Member findMembers(@Param("name") String username);
}
```
  - ğŸ’¡ ì°¸ê³  : ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ ë³´ìˆ˜ë¥¼ ìœ„í•´ ì´ë¦„ ê¸°ë°˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì‚¬ìš©
  - ìœ„ì¹˜ ê¸°ë°˜ì€ ìˆœì„œ ì‹¤ìˆ˜ê°€ ë°œìƒí•´ì„œ ë°”ë€Œë©´ ì˜¤ë¥˜ ë°œìƒ

4. ì»¬ë ‰ì…˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
   - ğŸ’¡ Collection íƒ€ì…ìœ¼ë¡œ IN ì ˆ ì§€ì›
```java
package study.data_jpa.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import study.data_jpa.dto.MemberDto;
import study.data_jpa.entity.Member;

import java.util.List;

public interface MemberRepository extends JpaRepository<Member, Long> {

    ...
    
    @Query("SELECT m FROM Member m WHERE m.username IN :names")
    List<Member> findByNames(Collection<String> names);
}
```
