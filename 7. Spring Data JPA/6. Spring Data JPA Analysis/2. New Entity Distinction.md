-----
### ìƒˆë¡œìš´ ì—”í‹°í‹° êµ¬ë³„ ë°©ë²•
-----
1. save() ë©”ì„œë“œ
   - ìƒˆë¡œìš´ ì—”í‹°í‹° : ì €ì¥ (persist)
   - ìƒˆë¡œìš´ ì—”í‹°í‹°ê°€ ì•„ë‹˜ : ë³‘í•© (merger)

2. ğŸ’¡ ìƒˆë¡œìš´ ì—”í‹°í‹°ë¥¼ íŒë‹¨í•˜ëŠ” ê¸°ë³¸ ì „ëµ
   - ì‹ë³„ìê°€ ê°ì²´ : nullë¡œ íŒë‹¨
   - ì‹ë³„ìê°€ ìë°” ê¸°ë³¸ íƒ€ì… : 0ìœ¼ë¡œ íŒë‹¨
   - Persistable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ íŒë‹¨ ë¡œì§ ë³€ê²½ ê°€ëŠ¥
   - ì˜ˆì‹œ) Item / ItemReppsitory
```java
package study.data_jpa.entity;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import lombok.Getter;

@Entity
@Getter
public class Item {

    @Id @GeneratedValue
    private Long id;
    // private long id;
}
```

```java
package study.data_jpa.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import study.data_jpa.entity.Item;

public interface ItemRepository extends JpaRepository<Item, Long> {

}
```

```java
package study.data_jpa.repository;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import study.data_jpa.entity.Item;

import static org.junit.jupiter.api.Assertions.*;

@SpringBootTest
class ItemRepositoryTest {

    @Autowired ItemRepository itemRepository;

    @Test
    public void save() {
        Item item = new Item(); // ì‹ë³„ì id = null (ê°ì²´), ì‹ë³„ì id = 0 (ê¸°ë³¸ íƒ€ì…)
        itemRepository.save(item);
    }
}
```

3. ğŸ’¡ Persistable
```java
package org.springframework.data.domain;

import org.springframework.lang.Nullable;

public interface Persistable<ID> {
    @Nullable
    ID getId();

    boolean isNew();
}
```
  - ğŸ’¡ğŸ’¡ğŸ’¡ JPA ì‹ë³„ì ìƒì„± ì „ëµì´ @GeneratedValueë©´ save() í˜¸ì¶œ ì‹œì ì— ì‹ë³„ìê°€ ì—†ìœ¼ë¯€ë¡œ ìƒˆë¡œìš´ ì—”í‹°í‹°ë¡œ ì¸ì‹í•´ì„œ ì •ìƒ ë™ì‘
  - ğŸ’¡ğŸ’¡ğŸ’¡ ê·¸ëŸ°ë°, JPA ì‹ë³„ì ìƒì„± ì „ëµì´ @Idë§Œ ì‚¬ìš©í•´ì„œ ì§ì ‘ í• ë‹¹ì´ë©´ ì´ë¯¸ ì‹ë³„ì ê°’ì´ ìˆëŠ” ìƒíƒœë¡œ save() í˜¸ì¶œ
    + ë”°ë¼ì„œ ì´ ê²½ìš°ì—ëŠ” merge() í˜¸ì¶œ
  - ğŸ’¡ merge()ëŠ” ìš°ì„  DBë¥¼ í˜¸ì¶œí•´ì„œ ê°’ì„ í™•ì¸í•˜ê³ , DBì— ê°’ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì—”í‹°í‹°ë¡œ ì¸ì§€í•˜ë¯€ë¡œ ë§¤ìš° ë¹„íš¨ìœ¨ì 
  - ğŸ’¡ ë”°ë¼ì„œ, Persistableë¥¼ ì‚¬ìš©í•´ì„œ ìƒˆë¡œìš´ ì—”í‹°í‹° í™•ì¸ ì—¬ë¶€ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ëŠ”ê²Œ íš¨ê³¼ì 
  - ğŸ’¡ ì°¸ê³ ë¡œ ë“±ë¡ì‹œê°„(@CreatedDate)ë¥¼ ì¡°í•©í•´ì„œ ì‚¬ìš©í•˜ë©´ ì´ í•„ë“œë¡œ ìƒˆë¡œìš´ ì—”í‹°í‹° ì—¬ë¶€ë¥¼ í¸ë¦¬í•˜ê²Œ í™•ì¸ ê°€ëŠ¥
    + ğŸ’¡ ì¦‰, @CreatedDateì— ê°’ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì—”í‹°í‹°ë¡œ íŒë‹¨

4. ğŸ’¡ Persistable êµ¬í˜„
```java
package study.data_jpa.entity;

import jakarta.persistence.Entity;
import jakarta.persistence.EntityListeners;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import lombok.AccessLevel;
import lombok.Getter;
import lombok.NoArgsConstructor;
import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.domain.Persistable;
import org.springframework.data.jpa.domain.support.AuditingEntityListener;

import java.time.LocalDateTime;

@Entity
@EntityListeners(AuditingEntityListener.class)
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Item implements Persistable<String> {

    @Id
    private String itemId;

    @CreatedDate
    private LocalDateTime createDate;

    public Item(String itemId) {
        this.itemId = itemId;
    }

    @Override
    public String getId() {
        return itemId;
    }

    @Override
    public boolean isNew() {
        return createDate == null; // ìƒˆë¡œìš´ ê°ì²´
    }
}
```
```java
package study.data_jpa.repository;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import study.data_jpa.entity.Item;

import static org.junit.jupiter.api.Assertions.*;

@SpringBootTest
class ItemRepositoryTest {

    @Autowired ItemRepository itemRepository;

    @Test
    public void save() {
        Item item = new Item("A"); // ì‹ë³„ì id = null (ê°ì²´), ì‹ë³„ì id = 0 (ê¸°ë³¸ íƒ€ì…)
        itemRepository.save(item); // merge -> Persistable êµ¬í˜„ -> persist
    }
}
```
