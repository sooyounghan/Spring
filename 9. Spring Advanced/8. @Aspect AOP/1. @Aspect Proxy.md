-----
### @Aspect í”„ë¡ì‹œ
-----
1. ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í”„ë¡ì‹œë¥¼ ì ìš©í•˜ë ¤ë©´ í¬ì¸íŠ¸ì»·ê³¼ ì–´ë“œë°”ì´ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ” ì–´ë“œë°”ì´ì €(Advisor)ë¥¼ ë§Œë“¤ì–´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë¨
2. ê·¸ëŸ¬ë©´ ë‚˜ë¨¸ì§€ëŠ” ìë™ í”„ë¡ì‹œ ìƒì„±ê¸°ê°€ ëª¨ë‘ ìë™ìœ¼ë¡œ ì²˜ë¦¬
3. ìë™ í”„ë¡ì‹œ ìƒì„±ê¸°ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ì–´ë“œë°”ì´ì €ë“¤ì„ ì°¾ê³ , ìŠ¤í”„ë§ ë¹ˆë“¤ì— ìë™ìœ¼ë¡œ í”„ë¡ì‹œë¥¼ ì ìš© (ë¬¼ë¡ , í¬ì¸íŠ¸ ì»·ì´ ë§¤ì¹­ë˜ëŠ” ê²½ìš°ì— í•œí•´ í”„ë¡ì‹œ ìƒì„±)
4. ğŸ’¡ ìŠ¤í”„ë§ì€ @Aspect ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ë§¤ìš° í¸ë¦¬í•˜ê²Œ í¬ì¸íŠ¸ì»·ê³¼ ì–´ë“œë°”ì´ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ” ì–´ë“œë°”ì´ì € ìƒì„± ê¸°ëŠ¥ ì§€ì›
5. ğŸ’¡ @AspectëŠ” ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°(AOP)ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” AspectJ í”„ë¡œì íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì• ë„ˆí…Œì´ì…˜
   - ìŠ¤í”„ë§ì€ ì´ë¥¼ ì°¨ìš©í•´ í”„ë¡ì‹œë¥¼ í†µí•œ AOPë¥¼ ê°€ëŠ¥í•˜ê²Œ í•¨

6. LogTraceAspect
```java
package hello.proxy.config.v6_aop.aspect;

import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;
import lombok.extern.slf4j.Slf4j;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;

@Slf4j
@Aspect
public class LogTraceAspect {
    private final LogTrace logTrace;

    public LogTraceAspect(LogTrace logTrace) {
        this.logTrace = logTrace;
    }
    
    // Advisor
    @Around("execution(* hello.proxy.app..*(..))") // = Pointcut
    public Object execute(ProceedingJoinPoint joinPoint) throws Throwable {
        // = Advice Logic

        TraceStatus status = null;
        
        try {
            String message = joinPoint.getSignature().toShortString();
            
            status = logTrace.begin(message);

            // ë¡œì§ í˜¸ì¶œ
            Object result = joinPoint.proceed();

            logTrace.end(status);
            
            return result;
        } catch (Exception e) {
            logTrace.exception(status, e);
            throw e;
        }
    }
}
```
  - ğŸ’¡ @Aspect : ì• ë„ˆí…Œì´ì…˜ ê¸°ë°˜ í”„ë¡ì‹œë¥¼ ì ìš©í•  ë•Œ í•„ìš”
  - ğŸ’¡ @Around("execution(* hello.proxy.app..*(..))")
    + ğŸ’¡ @Around ê°’ì— í¬ì¸íŠ¸ ì»· í‘œí˜„ì‹ì„ ë„£ìŒ (í‘œí˜„ì‹ì€ AspectJ í‘œí˜„ì‹ ì‚¬ìš©)
    + ğŸ’¡ @Aroundì˜ ë©”ì„œë“œëŠ” ì–´ë“œë°”ì´ìŠ¤(Advice)ê°€ ë¨
  - ğŸ’¡ ProceedingJoinPoint joinPoint
    + ì–´ë“œë°”ì´ìŠ¤ì—ì„œ ì‚´í´ë³¸ MethodInvocation invocationê³¼ ìœ ì‚¬í•œ ê¸°ëŠ¥
    + ğŸ’¡ ë‚´ë¶€ì— ì‹¤ì œ í˜¸ì¶œ ëŒ€ìƒ, ì „ë‹¬ ì¸ì, ê·¸ë¦¬ê³  ì–´ë–¤ ê°ì²´ì™€ ì–´ë–¤ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ì •ë³´ í¬í•¨
```java
log.info("target = {}", joinPoint.getTarget()); // ì‹¤ì œ í˜¸ì¶œ ëŒ€ìƒ
log.info("getArgs= {}", joinPoint.getArgs()); // ì „ë‹¬ ì¸ì
log.info("getSignature = {}", joinPoint.getSignature()); // Join Point ì‹œê·¸ë‹ˆì²˜
```
  - ğŸ’¡ joinPoint.proceed() : ì‹¤ì œ í˜¸ì¶œ ëŒ€ìƒ(target) í˜¸ì¶œ

7. AopConfig
```java
package hello.proxy.config.v6_aop;

import hello.proxy.config.AppV1Config;
import hello.proxy.config.AppV2Config;
import hello.proxy.config.v6_aop.aspect.LogTraceAspect;
import hello.proxy.trace.logtrace.LogTrace;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Import;

@Configuration
@Import({AppV1Config.class, AppV2Config.class})
public class AopConfig {
    
    @Bean
    public LogTraceAspect logTraceAspect(LogTrace logTrace) {
        return new LogTraceAspect(logTrace);
    }
}
```
  - @Import({AppV1Config.class, AppV2Config.class}) : V1, V2 ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìˆ˜ë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
  - @Bean logTraceAspect()
    + ğŸ’¡ @Aspectê°€ ìˆì–´ë„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì¤˜ì•¼ í•¨
    + ë¬¼ë¡ , LogTraceAspectì— @Component ì• ë„ˆí…Œì´ì…˜ì„ ë¶™ì—¬ì„œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ë„ ë¨

8. ProxyApplication
```java
package hello.proxy;

import hello.proxy.config.AppV1Config;
import hello.proxy.config.AppV2Config;
import hello.proxy.config.v1_proxy.ConcreteProxyConfig;
import hello.proxy.config.v1_proxy.InterfaceProxyConfig;
import hello.proxy.config.v2_dynamicproxy.DynamicProxyBasicConfig;
import hello.proxy.config.v2_dynamicproxy.DynamicProxyFilterConfig;
import hello.proxy.config.v3_proxyfactory.ProxyFactoryConfigV1;
import hello.proxy.config.v3_proxyfactory.ProxyFactoryConfigV2;
import hello.proxy.config.v4_postprocessor.BeanPostProcessorConfig;
import hello.proxy.config.v5_autoproxy.AutoProxyConfig;
import hello.proxy.config.v6_aop.AopConfig;
import hello.proxy.trace.logtrace.LogTrace;
import hello.proxy.trace.logtrace.ThreadLocalLogTrace;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Import;

// @Import(AppV1Config.class)
// @Import({AppV1Config.class, AppV2Config.class})
// @Import(InterfaceProxyConfig.class)
// @Import(ConcreteProxyConfig.class)
// @Import(DynamicProxyBasicConfig.class)
// @Import(DynamicProxyFilterConfig.class)
// @Import(ProxyFactoryConfigV1.class)
// @Import(ProxyFactoryConfigV2.class)
// @Import(BeanPostProcessorConfig.class)
// @Import(AutoProxyConfig.class)
@Import(AopConfig.class)
@SpringBootApplication(scanBasePackages = "hello.proxy.app.v3") //ì£¼ì˜
public class ProxyApplication {

	public static void main(String[] args) {
		SpringApplication.run(ProxyApplication.class, args);
	}

	@Bean
	public LogTrace logTrace() {
		return new ThreadLocalLogTrace();
	}
}
```
  - AopConfig.class ë“±ë¡

