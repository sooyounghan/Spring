-----
### this, target
-----
1. ì •ì˜
   - this : ìŠ¤í”„ë§ ë¹ˆ ê°ì²´(ìŠ¤í”„ë§ AOP í”„ë¡ì‹œ)ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ì¡°ì¸ í¬ì¸íŠ¸
   - target : Target ê°ì²´(ìŠ¤í”„í AOP í”„ë¡ì‹œê°€ ê°€ë¦¬í‚¤ëŠ” ì‹¤ì œ ëŒ€ìƒ)ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ì¡°ì¸ í¬ì¸íŠ¸

2. ì„¤ëª…
   - this, targetì€ ì ìš© íƒ€ì… í•˜ë‚˜ë¥¼ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•¨
```java
this(hello.aop.member.MemberService)
target(hello.aop.member.MemberService)
```
  - ```*```ê°™ì€ íŒ¨í„´ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
  - ë¶€ëª¨ íƒ€ì… í—ˆìš©

3. this vs target
   - ğŸ’¡ ìŠ¤í”„ë§ì—ì„œ AOPë¥¼ ì ìš©í•˜ë©´ ì‹¤ì œ target ê°ì²´ ëŒ€ì‹  í”„ë¡ì‹œ ê°ì²´ê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
     + thisëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ í¬ì¸íŠ¸ì»· ë§¤ì¹­
     + targetì€ ì‹¤ì œ target ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ í¬ì¸íŠ¸ì»· ë§¤ì¹­

4. í”„ë¡ì‹œ ìƒì„± ë°©ì‹ì— ë”°ë¥¸ ì°¨ì´
   - ìŠ¤í”„ë§ì€ í”„ë¡ì‹œë¥¼ ìƒì„±í•  ë•Œ JDK ë™ì  í”„ë¡ì‹œì™€ CGLIB ì„ íƒ ê°€ëŠ¥
   - ë‘˜ì˜ í”„ë¡ì‹œ ìƒì„± ë°©ì‹ì´ ë‹¤ë¥´ë¯€ë¡œ ì°¨ì´ê°€ ë°œìƒ
     + ğŸ’¡ JDK ë™ì  í”„ë¡ì‹œ : ì¸í„°í˜ì´ìŠ¤ í•„ìˆ˜, ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±
     + ğŸ’¡ CGLIB : ì¸í„°í˜ì´ìŠ¤ê°€ ìˆì–´ë„ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±

5. JDK ë™ì  í”„ë¡ì‹œì—ì„œì˜ thisì™€ target
<div align="center">
<img src="https://github.com/user-attachments/assets/1c313887-dffe-4c79-99b7-3553b2512a3d">
</div>

  - MemberService ì¸í„°í˜ì´ìŠ¤ ì§€ì •
    + this(hello.aop.member.MemberService) : proxy ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. thisëŠ” ë¶€ëª¨ íƒ€ì…ì„ í—ˆìš©í•˜ë¯€ë¡œ AOP ì ìš©
    + target(hello.op.member.MemberService) : target ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. targetì€ ë¶€ëª¨ íƒ€ì…ì„ í—ˆìš©í•˜ë¯€ë¡œ AOP ì ìš©

  - ğŸ’¡ MemberServiceImpl êµ¬ì²´ í´ë˜ìŠ¤ ì§€ì •
    + this(hello.aop.member.MemberServiceImpl) : proxy ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. JDK ë™ì  í”„ë¡ì‹œë¡œ ë§Œë“¤ì–´ì§„ proxy ê°ì²´ëŠ” MemberService ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ëœ ìƒˆë¡œìš´ í´ë˜ìŠ¤
       * ë”°ë¼ì„œ MemberServiceImplì„ ì „í˜€ ì•Œì§€ ëª»í•˜ë¯€ë¡œ AOP ì ìš© ëŒ€ìƒì´ ì•„ë‹˜
    + target(hello.aop.member.MemberServiceImpl) : target ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. target ê°ì²´ê°€ MemberServiceImpl íƒ€ì…ì´ë¯€ë¡œ AOP ì ìš© ëŒ€ìƒ

6. CGLIB í”„ë¡ì‹œì—ì„œì˜ thisì™€ target
<div align="center">
<img src="https://github.com/user-attachments/assets/fa1a9e86-faef-40c7-86dd-cf82f8805b66">
</div>

  - MemberService ì¸í„°í˜ì´ìŠ¤ ì§€ì •
    + this(hello.aop.member.MemberService) : proxy ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. thisëŠ” ë¶€ëª¨ íƒ€ì…ì„ í—ˆìš©í•˜ë¯€ë¡œ AOP ì ìš©
    + target(hello.op.member.MemberService) : target ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. targetì€ ë¶€ëª¨ íƒ€ì…ì„ í—ˆìš©í•˜ë¯€ë¡œ AOP ì ìš©

  - ğŸ’¡ MemberServiceImpl êµ¬ì²´ í´ë˜ìŠ¤ ì§€ì •
    + this(hello.aop.member.MemberServiceImpl) : proxy ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. CGLIBë¡œ ë§Œë“¤ì–´ì§„ proxy ê°ì²´ëŠ” MemberServiceImplë¥¼ ìƒì† ë°›ì•„ì„œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì— AOP ì ìš© ëŒ€ìƒ
      * ë˜í•œ, thisëŠ” ë¶€ëª¨ íƒ€ì…ì„ í—ˆìš©í•˜ë¯€ë¡œ í¬ì¸íŠ¸ì»·ì˜ ëŒ€ìƒì´ ë¨
    + target(hello.aop.member.MemberServiceImpl) : target ê°ì²´ë¥¼ ë³´ê³  íŒë‹¨. target ê°ì²´ê°€ MemberServiceImpl íƒ€ì…ì´ë¯€ë¡œ AOP ì ìš© ëŒ€ìƒ

7. ì •ë¦¬
    - í”„ë¡ì‹œë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” thisì˜ ê²½ìš° êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ë©´, í”„ë¡ì‹œ ìƒì„± ì „ëµì— ë”°ë¼ ë‹¤ë¥¸ ê²°ê³¼ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆìŒ

8. ThisTargetTest
```java
package hello.aop.pointcut;

import hello.aop.member.MemberService;
import lombok.extern.slf4j.Slf4j;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.annotation.Import;

/**
 * application.properties
 * - spring.aop.proxy-target-class=true (CGLIB)
 * - spring.aop.proxy-target-class=false (JDK ë™ì  í”„ë¡ì‹œ)
 */
@Slf4j
@Import(ThisTargetTest.ThisTargetAspect.class)
@SpringBootTest(properties = "spring.aop.proxy-target-class=false")
public class ThisTargetTest {
    @Autowired MemberService memberService;

    @Test
    void success() {
        log.info("memberService Proxy = {}", memberService.getClass());
        memberService.hello("helloA");
    }

    @Slf4j
    @Aspect
    static class ThisTargetAspect {
        // ë¶€ëª¨ íƒ€ì… í—ˆìš©
        @Around("this(hello.aop.member.MemberService)")
        public Object doThisInterface(ProceedingJoinPoint joinPoint) throws Throwable {
            log.info("[this-interface] {}", joinPoint.getSignature());
            return joinPoint.proceed();
        }

        // ë¶€ëª¨ íƒ€ì… í—ˆìš©
        @Around("target(hello.aop.member.MemberService)")
        public Object doTargetInterface(ProceedingJoinPoint joinPoint) throws Throwable {
            log.info("[target-interface] {}", joinPoint.getSignature());
            return joinPoint.proceed();
        }

        // this: ìŠ¤í”„ë§ AOP í”„ë¡ì‹œ ê°ì²´ ëŒ€ìƒ
        // JDK ë™ì  í”„ë¡ì‹œ : ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë˜ë¯€ë¡œ êµ¬í˜„ í´ë˜ìŠ¤ ì•Œ ìˆ˜ ì—†ìŒ
        // CGLIB í”„ë¡ì‹œ : êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë˜ë¯€ë¡œ êµ¬í˜„ í´ë˜ìŠ¤ ì•Œ ìˆ˜ ìˆìŒ
        @Around("this(hello.aop.member.MemberServiceImpl)")
        public Object doThis(ProceedingJoinPoint joinPoint) throws Throwable {
            log.info("[this-impl] {}", joinPoint.getSignature());
            return joinPoint.proceed();
        }

        // target : ì‹¤ì œ target ê°ì²´ ëŒ€ìƒ
        @Around("target(hello.aop.member.MemberServiceImpl)")
        public Object doTarget(ProceedingJoinPoint joinPoint) throws Throwable {
            log.info("[target-impl] {}", joinPoint.getSignature());
            return joinPoint.proceed();
        }

    }
}
```
  - this, targetì€ ì‹¤ì œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
  - í…ŒìŠ¤íŠ¸ì—ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•´ì„œ target, proxy ê°ì²´ ëª¨ë‘ ë§Œë“¤ì–´ì„œ í…ŒìŠ¤íŠ¸
  - @SpringBootTest(properties = "spring.aop.proxy-target-class=false")
    + application.propertiesì— ì„¤ì •í•˜ëŠ” ëŒ€ì‹  í•´ë‹¹ í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ì„¤ì • ì„ì‹œë¡œ ì ìš© (ì´ë ‡ê²Œ í•˜ë©´, ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ë‹¤ë¥¸ ì„¤ì • ì†ì‰½ê²Œ ì ìš© ê°€ëŠ¥)
    + spring.aop.proxy-target-class=false : ìŠ¤í”„ë§ì´ AOP í”„ë¡ì‹œë¥¼ ìƒì„±í•  ë•Œ, JDK ë™ì  í”„ë¡ì‹œ ìš°ì„  ìƒì„± (ë¬¼ë¡ , ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ë‹¤ë©´ CGLIB ì‚¬ìš©)
    + spring.aop.porxy-target-class=true : ìŠ¤í”„ë§ì´ AOP í”„ë¡ì‹œ ìƒì„±í•  ë•Œ, CGLIB í”„ë¡ì‹œë¥¼ ìƒì„±. ì°¸ê³ ë¡œ ì´ ì„¤ì •ì„ ìƒëµí•˜ë©´, ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ê¸°ë³¸ìœ¼ë¡œ CGLIB ì‚¬ìš©
```java
@SpringBootTest(properties = "spring.aop.proxy-target-class=false") // JDK ë™ì  í”„ë¡ì‹œ
@SpringBootTest(properties = "spring.aop.proxy-target-class=true") // CGLIB
```

  - spring.aop.proxy-target-class=false (JDK ë™ì  í”„ë¡ì‹œ ì‚¬ìš©)
```
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [target-impl] String hello.aop.member.MemberService.hello(String)
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [target-interface] String hello.aop.member.MemberService.hello(String)
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [this-interface] String hello.aop.member.MemberService.hello(String)
```
  - JDK ë™ì  í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë©´ this(hello.aop.member.MemberServiceImpl)ë¡œ ì§€ì •í•œ [this-impl] ë¶€ë¶„ ë¯¸ì¶œë ¥
    
  - spring.aop.proxy-target-class=true ë˜ëŠ” ìƒëµ (ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ì˜µì…˜ / CGLIB ì‚¬ìš©)
```
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [target-impl] String hello.aop.member.MemberServiceImpl.hello(String)
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [target-interface] String hello.aop.member.MemberServiceImpl.hello(String)
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [this-impl] String hello.aop.member.MemberServiceImpl.hello(String)
[aop] [    Test worker] h.a.p.ThisTargetTest$ThisTargetAspect    : [this-interface] String hello.aop.member.MemberServiceImpl.hello(String)
```
  - ì°¸ê³  : this, target ì§€ì‹œìëŠ” ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©ë˜ê¸° ë³´ë‹¤ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì—ì„œ ì£¼ë¡œ ì‚¬ìš©
