-----
### Execution
-----
1. exeuction λ¬Έλ²•
```java
execution(modifiers-pattern? ret-type-pattern declaring-type-pattern?name-pattern(param-pattern) throws-pattern?)
execution(μ ‘κ·Όμ μ–΄μ? λ°ν™νƒ€μ… μ„ μ–Ένƒ€μ…?λ©”μ„λ“μ΄λ¦„(νλΌλ―Έν„°) μμ™Έ?)
```
  - λ©”μ„λ“ μ‹¤ν–‰ μ΅°μΈ ν¬μΈνΈ λ§¤μΉ­
  - ?λ” μƒλµ κ°€λ¥
  - ```*``` κ°™μ€ ν¨ν„΄ μ§€μ • κ°€λ¥
   
2. κ°€μ¥ μ •ν™•ν• ν¬μΈνΈμ»·
   - λ¨Όμ € MemberServiceImpl.hello(String) λ©”μ„λ“μ™€ κ°€μ¥ μ •ν™•ν•κ² λ¨λ“  λ‚΄μ©μ΄ λ§¤μΉ­λλ” ν‘ν„μ‹
   - ExecutionTest - μ¶”κ°€
```java
package hello.aop.pointcut;

import hello.aop.member.MemberServiceImpl;
import lombok.extern.slf4j.Slf4j;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.aop.aspectj.AspectJExpressionPointcut;

import java.lang.reflect.Member;
import java.lang.reflect.Method;

@Slf4j
public class ExecutionTest {

    AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();
    Method helloMethod;

    @BeforeEach
    public void init() throws NoSuchMethodException {
        helloMethod = MemberServiceImpl.class.getMethod("hello", String.class);
    }

    @Test
    void printMethod() {
        // public java.lang.String hello.aop.member.MemberServiceImpl.hello(java.lang.String)
        log.info("helloMethod = {}", helloMethod);
    }

    @Test
    void exactMatch() {
        // public java.lang.String hello.aop.member.MemberServiceImpl.hello(java.lang.String)
        pointcut.setExpression("execution(public String hello.aop.member.MemberServiceImpl.hello(String))");

        Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
    }
}
```
  - AspectJExpressionPointcutμ— pointcut.setExpressionμ„ ν†µν•΄ ν¬μΈνΈμ»· ν‘ν„μ‹ μ μ© κ°€λ¥
  - pointcut.matches(λ©”μ„λ“, λ€μƒ ν΄λμ¤)λ¥Ό μ‹¤ν–‰ν•λ©΄ μ§€μ •ν• ν¬μΈνΈμ»· ν‘ν„μ‹μ λ§¤μΉ­ μ—¬λ¶€(true, false)λ΅ λ°ν™
  - λ§¤μΉ­ μ΅°κ±΄
    + μ ‘κ·Όμ μ–΄μ? : public
    + λ°ν™νƒ€μ… : String
    + μ„ μ–Ένƒ€μ…? : hello.aop.member.MemberServiceImpl
    + λ©”μ„λ“μ΄λ¦„ : hello
    + νλΌλ―Έν„° : (String)
    + μμ™Έ? : μƒλµ

  - MemberServiceImpl.hello(String) λ©”μ„λ“μ™€ ν¬μΈνΈμ»· ν‘ν„μ‹μ λ¨λ“  λ‚΄μ©μ΄ μ •ν™•ν•κ² μΌμΉν•λ―€λ΅ true λ°ν™

3. κ°€μ¥ λ§μ΄ μƒλµν• ν¬μΈνΈμ»·
```java
@Test
void allMatch() {
    pointcut.setExpression("execution(* *(..))");
    
    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}
```
  - λ§¤μΉ­ μ΅°κ±΄
    + μ ‘κ·Όμ μ–΄μ? : μƒλµ
    + λ°ν™νƒ€μ… : ```*```
    + μ„ μ–Ένƒ€μ…? : μƒλµ
    + λ©”μ„λ“μ΄λ¦„ : ```*```
    + νλΌλ―Έν„° : (..)
    + μμ™Έ? : μ—†μ

  - *μ€ μ•„λ¬΄ κ°’μ΄ λ“¤μ–΄μ™€λ„ λλ‹¤λ” λ»
  - νλΌλ―Έν„°μ—μ„ ..μ€ νλΌλ―Έν„°μ νƒ€μ…κ³Ό μκ°€ μƒκ΄€μ—†λ‹¤λ” λ» (```(0..*)```)

4. λ©”μ„λ“ μ΄λ¦„ λ§¤μΉ­ κ΄€λ ¨ ν¬μΈνΈμ»·
```java
@Test
void nameMatch() {
    pointcut.setExpression("execution(* hello(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void nameMatch1() {
    pointcut.setExpression("execution(* hel*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void nameMatch2() {
    pointcut.setExpression("execution(* *el*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void nameMatch3() {
    pointcut.setExpression("execution(* nono(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isFalse();
}
```
  - λ©”μ„λ“ μ΄λ¦„ μ• λ’¤μ— ```*```λ¥Ό μ‚¬μ©ν•΄μ„ λ§¤μΉ­ κ°€λ¥

5. ν¨ν‚¤μ§€ λ§¤μΉ­ κ΄€λ ¨ ν¬μΈνΈμ»·
```java
@Test
void packageExactMatch1() {
    pointcut.setExpression("execution(* hello.aop.member.MemberServiceImpl.hello(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void packageExactMatch2() {
    pointcut.setExpression("execution(* hello.aop.member.*.*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void packageExactMatchFalse() {
    // ν•μ„ ν¨ν‚¤μ§€κΉμ§€ λ¨λ‘ μΌμΉν•κ±°λ‚ ν¬ν•¨ν•΄μ•Όν•¨
    pointcut.setExpression("execution(* hello.aop.*.*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isFalse();
}

@Test
void packageMatchSubPackage1() {
    pointcut.setExpression("execution(* hello.aop.member..*.*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void packageMatchSubPackage2() {
    pointcut.setExpression("execution(* hello.aop..*.*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}
```
  - ```hello.aop.member.*(1).*(2)```
    + (1) : νƒ€μ…
    + (2) : λ©”μ„λ“ μ΄λ¦„

  - π’΅ ν¨ν‚¤μ§€μ—μ„ ., ..μ°¨μ΄λ¥Ό λ…ν™•ν μ΄ν•΄
    + . : μ •ν™•ν•κ² ν•΄λ‹Ή μ„μΉμ ν¨ν‚¤μ§€
    + .. : ν•΄λ‹Ή μ„μΉμ ν¨ν‚¤μ§€μ™€ κ·Έ ν•μ„ ν¨ν‚¤μ§€λ„ ν¬ν•¨

-----
### νƒ€μ… λ§¤μΉ­ - λ¶€λ¨ νƒ€μ… ν—μ©
-----
```java
@Test
void typeExactMatch() {
    pointcut.setExpression("execution(* hello.aop.member.MemberServiceImpl.*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

@Test
void typeMatchSuperType() {
    pointcut.setExpression("execution(* hello.aop.member.MemberService.*(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}
```
1. typeExactMatch() : νƒ€μ… μ •λ³΄κ°€ μ •ν™•ν•κ² μΌμΉν•λ―€λ΅ λ§¤μΉ­
2. typeMatchSuperType()
    + executionμ—μ„λ” MemberServiceμ²λΌ λ¶€λ¨ νƒ€μ…μ„ μ„ μ–Έν•΄λ„ κ·Έ μμ‹ νƒ€μ…μ€ λ§¤μΉ­
    + π’΅ μ¦‰, λ‹¤ν•μ„±μ—μ„ λ¶€λ¨νƒ€μ… = μμ‹νƒ€μ…μ΄ ν• λ‹Ή κ°€λ¥ν•λ‹¤λ” μ κ³Ό λ™μΌ

-----
### νƒ€μ… λ§¤μΉ­ - λ¶€λ¨ νƒ€μ…μ— μλ” λ©”μ„λ“λ§ ν—μ©
-----
```java
@Test
void typeMatchInternal() throws NoSuchMethodException {
    pointcut.setExpression("execution(* hello.aop.member.MemberServiceImpl.*(..))");

    Method internalMethod = MemberServiceImpl.class.getMethod("internal", String.class);
    Assertions.assertThat(pointcut.matches(internalMethod, MemberServiceImpl.class)).isTrue();
}

// ν¬μΈνΈμ»·μΌλ΅ μ§€μ •ν• MemberServiceμ—λ” internalμ΄λΌλ” λ©”μ„λ“κ°€ μ—†μ
@Test
void typeMatchNoSuperTypeMethodFalse() throws NoSuchMethodException {
    pointcut.setExpression("execution(* hello.aop.member.MemberService.*(..))");

    Method internalMethod = MemberServiceImpl.class.getMethod("internal", String.class);
    Assertions.assertThat(pointcut.matches(internalMethod, MemberServiceImpl.class)).isFalse();
}
```
  - typeMatchInternal()
    + MemberServiceImplμ„ ν‘ν„μ‹μ— μ„ μ–Έν–κΈ° λ•λ¬Έμ— κ·Έ μ•μ— μλ” internal(String) λ©”μ„λ“λ„ λ§¤μΉ­ λ€μƒ

  - typeMatchNoSuperTypeMethodFalse()
    + μ΄ κ²½μ°, λ¶€λ¨ νƒ€μ…μΈ MemberService μ„ μ–Έ
    + κ·Έλ°λ° μμ‹ νƒ€μ…μΈ MemberServiceImplμ internal(String)μ„ λ§¤μΉ­ν•λ ¤ ν•μ§€λ§, λ§¤μΉ­ μ‹¤ν¨
    +  MemberServiceμ—λ” internal(String) λ©”μ„λ“κ°€ μ—†μ

  - π’΅ λ¶€λ¨ νƒ€μ…μ„ ν‘ν„μ‹μ— μ„ μ–Έν• κ²½μ° λ¶€λ¨ νƒ€μ…μ—μ„ μ„ μ–Έν• λ©”μ„λ“κ°€ μμ‹ νƒ€μ…μ— μμ–΄μ•Ό λ§¤μΉ­ μ„±κ³µ
  - κ·Έλμ„ λ¶€λ¨ νƒ€μ…μ— μλ” hello(String) λ©”μ„λ“λ” λ§¤μΉ­μ— μ„±κ³µν•μ§€λ§, λ¶€λ¨ νƒ€μ…μ— μ—†λ” internal(String)μ€ λ§¤μΉ­ μ‹¤ν¨

-----
### νλΌλ―Έν„° λ§¤μΉ­
-----
```java
// String νƒ€μ… νλΌλ―Έν„° ν—μ©
// (String)
@Test
void argsMatch() {
    pointcut.setExpression("execution(* *(String))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

// νλΌλ―Έν„°κ°€ μ—†μ
// ()
@Test
void argsMatchNoArgs() {
    pointcut.setExpression("execution(* *())");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isFalse();
}

// μ •ν™•ν ν•λ‚μ νλΌλ―Έν„° ν—μ© (λ‹¨, λ¨λ“  νƒ€μ… ν—μ©)
// (Xxx)
@Test
void argsMatchStar() {
    pointcut.setExpression("execution(* *(*))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

// μ«μμ™€ λ¬΄κ΄€ν•κ² λ¨λ“  νλΌλ―Έν„°, λ¨λ“  νƒ€μ… ν—μ©
// (), (Xxx) (Xxx, Xxx)
@Test
void argsMatchAll() {
    pointcut.setExpression("execution(* *(..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}

// String νƒ€μ…μΌλ΅ μ‹μ‘ν•λ, λ‚λ¨Έμ§€λ” μ«μμ™€ λ¬΄κ΄€ν•κ² λ¨λ“  νλΌλ―Έν„°, λ¨λ“  νƒ€μ… ν—μ©
// (String), (String, Xxx) (String, Xxx, Xxx)
@Test
void argsMatchComplex() {
    pointcut.setExpression("execution(* *(String, ..))");

    Assertions.assertThat(pointcut.matches(helloMethod, MemberServiceImpl.class)).isTrue();
}
```
  - (String) : μ •ν™•ν•κ² String νƒ€μ… νλΌλ―Έν„°
  - () : νλΌλ―Έν„°κ°€ μ—†μ–΄μ•Ό ν•¨
  - ```(*)``` : μ •ν™•ν ν•λ‚μ νλΌλ―Έν„°, λ‹¨ λ¨λ“  νƒ€μ… ν—μ©
  - ```(*, *)``` : μ •ν™•ν λ‘ κ°μ νλΌλ―Έν„°, λ‹¨ λ¨λ“  νƒ€μ… ν—μ©
  - (..) : μ«μμ™€ λ¬΄κ΄€ν•κ² λ¨λ“  νλΌλ―Έν„°, λ¨λ“  νƒ€μ… ν—μ©
    + μ°Έκ³ λ΅, νλΌλ―Έν„°κ°€ μ—†μ–΄λ„ λ¨
    + ```0..*```λ΅ μ΄ν•΄ν•λ©΄ λ¨
  - (String, ..) : String νƒ€μ…μΌλ΅ μ‹μ‘ν•΄μ•Ό ν•¨, μ«μμ™€ λ¬΄κ΄€ν•κ² λ¨λ“  νλΌλ―Έν„°, λ¨λ“  νƒ€μ… ν—μ©
    + μ) (String), (String, Xxx), (String, Xxx, Xxx) ν—μ©
