-----
### ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ
-----
1. ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ê°€ ìˆëŠ” V1 Appì— í”„ë¡ì‹œë¥¼ ë„ì…í•´ LogTrace ì‚¬ìš©
2. í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ ì½”ë“œë¥¼ ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•Šê³ , ë¡œê·¸ ì¶”ì  ê¸°ëŠ¥ ë„ì… ê°€ëŠ¥ (ë°ì½”ë ˆì´í„° íŒ¨í„´ ì ìš©)
3. V1 ê¸°ë³¸ í´ë˜ìŠ¤ ë° ëŸ°íƒ€ì„ ê°ì²´ ì˜ì¡´ ê´€ê³„
<div align="center">
<img src="https://github.com/user-attachments/assets/44180a1e-db96-475a-b9c8-c87f6d032359">
</div>

4. ë¡œê·¸ ì¶”ì ìš© í”„ë¡ì‹œ ì¶”ê°€
  - V1 í”„ë¡ì‹œ ì˜ì¡´ ê´€ê³„ ì¶”ê°€
<div align="center">
<img src="https://github.com/user-attachments/assets/362164a0-5994-4542-9209-87729eff21af">
</div>

  - Controller, Service, Repository ê°ê° ì¸í„°í˜ì´ìŠ¤ì— ë§ëŠ” í”„ë¡ì‹œ êµ¬í˜„ì²´ ì¶”ê°€
  - V1 í”„ë¡ì‹œ ëŸ°íƒ€ì„ ê°ì²´ ì˜ì¡´ ê´€ê³„ ì¶”ê°€
<div align="center">
<img src="https://github.com/user-attachments/assets/2c50f6d9-d59f-4261-a698-1a4ddaaf85bb">
</div>

  - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì • (ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì„¤ì • íŒŒì¼ í™œìš©)

5. OrderRepositoryInterfaceProxy
```java
package hello.proxy.config.v1_proxy.interface_proxy;

import hello.proxy.app.v1.OrderRepositoryV1;
import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;
import lombok.RequiredArgsConstructor;

@RequiredArgsConstructor
public class OrderRepositoryInterfaceProxy implements OrderRepositoryV1 {
    private final OrderRepositoryV1 target;
    private final LogTrace logTrace;

    @Override
    public void save(String itemId) {
        TraceStatus status = null;

        try {
            status = logTrace.begin("OrderRepository.save()");

            // Target í˜¸ì¶œ
            target.save(itemId);

            logTrace.end(status);
        } catch (Exception e) {
            logTrace.exception(status, e);
            throw e;
        }
    }
}
```
  - í”„ë¡ì‹œë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  êµ¬í˜„í•œ ë©”ì„œë“œì— LogTraceë¥¼ ì‚¬ìš©í•˜ëŠ” ë¡œì§ ì¶”ê°€
  - ì§€ê¸ˆê¹Œì§€ëŠ” OrderRepositoryImplì— ì´ ë¡œì§ì„ ëª¨ë‘ ì¶”ê°€í–ˆì–´ì•¼ í–ˆìŒ
  - í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•œ ë•ë¶„ì— ì´ ë¶€ë¶„ì„ í”„ë¡ì‹œê°€ ëŒ€ì‹  ì²˜ë¦¬
  - ë”°ë¼ì„œ, OrderRepositoryImpl ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨
  - OrderRepositoryV1 target : í”„ë¡ì‹œê°€ ì‹¤ì œ í˜¸ì¶œí•  ì›ë³¸ ë ˆí¬ì§€í† ë¦¬ì˜ ì°¸ì¡°ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•¨

5. OrderServiceInterfaceProxy
```java
package hello.proxy.config.v1_proxy.interface_proxy;

import hello.proxy.app.v1.OrderServiceV1;
import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;
import lombok.RequiredArgsConstructor;

@RequiredArgsConstructor
public class OrderServiceInterfaceProxy implements OrderServiceV1 {
    private final OrderServiceV1 target;
    private final LogTrace logTrace;
    
    @Override
    public void orderItem(String itemId) {
        TraceStatus status = null;
        
        try {
            status = logTrace.begin("OrderService.orderItem()");
            
            // Target í˜¸ì¶œ
            target.orderItem(itemId);
            
            logTrace.end(status);
        } catch (Exception e) {
            logTrace.exception(status, e);
            throw e;
        }
    }
}
```

6. OrderControllerInterfaceProxy
```java
package hello.proxy.config.v1_proxy.interface_proxy;

import hello.proxy.app.v1.OrderControllerV1;
import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;
import lombok.RequiredArgsConstructor;

@RequiredArgsConstructor
public class OrderControllerInterfaceProxy implements OrderControllerV1 {
    private final OrderControllerV1 target;
    private final LogTrace logTrace;

    @Override
    public String request(String itemId) {
        TraceStatus status = null;

        try {
            status = logTrace.begin("OrderController.request()");

            // Target í˜¸ì¶œ
            String result = target.request(itemId);

            logTrace.end(status);

            return result;
        } catch (Exception e) {
            logTrace.exception(status, e);
            throw e;
        }
    }

    @Override
    public String noLog() {
        return target.noLog();
    }
}
```
  - noLog() : ë¡œê·¸ë¥¼ ë‚¨ê¸°ì§€ ì•Šì•„ì•¼ í•˜ë¯€ë¡œ, ë³„ë„ì˜ ë¡œì§ ì—†ì´ ë‹¨ìˆœíˆ targetì„ í˜¸ì¶œ

7. InterfaceProxyConfig
```java
package hello.proxy.config.v1_proxy;

import hello.proxy.app.v1.*;
import hello.proxy.config.v1_proxy.interface_proxy.OrderControllerInterfaceProxy;
import hello.proxy.config.v1_proxy.interface_proxy.OrderRepositoryInterfaceProxy;
import hello.proxy.config.v1_proxy.interface_proxy.OrderServiceInterfaceProxy;
import hello.proxy.trace.logtrace.LogTrace;
import org.springframework.context.annotation.Bean;

public class InterfaceProxyConfig {
    @Bean
    public OrderControllerV1 orderController(LogTrace logTrace) {
        OrderControllerV1Impl controllerImpl = new OrderControllerV1Impl(orderService(logTrace));
        return new OrderControllerInterfaceProxy(controllerImpl, logTrace);
    }

    @Bean
    public OrderServiceV1 orderService(LogTrace logTrace) {
        OrderServiceV1Impl serviceImpl = new OrderServiceV1Impl(orderRepository(logTrace));
        return new OrderServiceInterfaceProxy(serviceImpl, logTrace);
    }

    @Bean
    public OrderRepositoryV1 orderRepository(LogTrace logTrace) {
        OrderRepositoryV1Impl repositoryImpl = new OrderRepositoryV1Impl();
        return new OrderRepositoryInterfaceProxy(repositoryImpl, logTrace);
    }
}
```

8. V1 í”„ë¡ì‹œ ëŸ°íƒ€ì„ ê°ì²´ ì˜ì¡´ ê´€ê³„ ì„¤ì •
   - í”„ë¡ì‹œì˜ ëŸ°íƒ€ì„ ê°œì²´ ì˜ì¡´ ê´€ê³„ ì„¤ì •
   - ê¸°ì¡´ì—ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ orderControllerV1Impl, orderServiceV1Implì™€ ê°™ì€ ì‹¤ì œ ê°ì²´ë¥¼ ë°˜í™˜
   - í•˜ì§€ë§Œ, ì´ì œëŠ” í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ë¯€ë¡œ, ë‚´ë¶€ì— í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ê³  í”„ë¡ì‹œë¥¼ ì‹¤ì œ ìŠ¤í”„ë§ ë¹ˆ ëŒ€ì‹  ë“±ë¡
   - ì¦‰, ì‹¤ì œ ê°ì²´ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•ŠìŒ
   - í”„ë¡ì‹œëŠ” ë‚´ë¶€ì— ì‹¤ì œ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆìŒ (ì˜ˆë¥¼ ë“¤ì–´, OrderServiceInterfaceProxyëŠ” ë‚´ë¶€ì— ì‹¤ì œ ëŒ€ìƒ ê°ì²´ì¸ OrderServiceV1Implì„ ê°€ì§€ê³  ìˆìŒ)
   - ì¦‰, ë‹¤ìŒê³¼ ê°™ì€ ì˜ì¡´ ê´€ê³„ë¥¼ ê°€ì§
     + proxy â†’ target
     + orderServiceInterfaceProxy â†’ orderServiceV1Impl
   - ğŸ’¡ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì‹¤ì œ ê°ì²´ ëŒ€ì‹ ì— í”„ë¡ì‹œ ê°ì²´ë¥¼ ë“±ë¡í–ˆê¸° ë–„ë¬¸ì—, ì•ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ì£¼ì… ë°›ìœ¼ë©´, ì‹¤ì œ ê°ì²´ ëŒ€ì‹  í”„ë¡ì‹œ ê°ì²´ê°€ ì£¼ì…
   - ì‹¤ì œ ê°ì²´ê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•´ì„œ ì‚¬ë¼ì§€ëŠ” ê²ƒì´ ì•„ë‹˜
   - ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ê°€ ì‹¤ì œ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì—, í”„ë¡ì‹œë¥¼ í†µí•´ì„œ ì‹¤ì œ ê°ì²´ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆìŒ. ì¦‰, ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ í”„ë¡ì‹œ ê°ì²´ ì•ˆì— ì‹¤ì œ ê°ì²´ê°€ ìˆìŒ

9. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
   - AppV1Configë¥¼ í†µí•´ í”„ë¡ì‹œ ì ìš© ì „
<div align="center">
<img src="https://github.com/user-attachments/assets/495f8db4-386e-43f3-be79-2d201e0a523d">
</div>

  - ì‹¤ì œ ê°ì²´ê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ (ë¹ˆ ê°ì²´ì˜ ë§ˆì§€ë§‰ @x0..ë¼ í•´ë‘” ê²ƒ : ì¸ìŠ¤í„´ìŠ¤)

  - IntefaceProxyConfigë¥¼ í†µí•´ í”„ë¡ì‹œ ì ìš©í•œ í›„
<div align="center">
<img src="https://github.com/user-attachments/assets/71cb4dd5-b2bd-4011-9985-36d5a4885610">
</div>

  - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡ì‹œ ê°ì²´ê°€ ë“±ë¡
  - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ì œ ì‹¤ì œ ê°ì²´ê°€ ì•„ë‹ˆë¼ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ê´€ë¦¬
  - ì´ì œ ì‹¤ì œ ê°ì²´ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìƒê´€ì´ ì—†ìœ¼ë©°, ì‹¤ì œ ê°ì²´ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì°¸ì¡°ë  ë¿ì„
  - ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ê³ , ìë°” í™ ë©”ëª¨ë¦¬ì—ë„ ì˜¬ë¼ê°
  - ğŸ’¡ ë°˜ë©´, ì‹¤ì œ ê°ì²´ëŠ” ìë°” í™ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ì§€ë§Œ, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ì§€ ì•ŠìŒ

10. ëŸ°íƒ€ì„ ì˜ì¡´ ê´€ê³„
<div align="center">
<img src="https://github.com/user-attachments/assets/f5be6205-5684-4f42-b183-ae48ef10f090">
</div>

11. ProxyApplication
```java
package hello.proxy;

import hello.proxy.config.AppV1Config;
import hello.proxy.config.AppV2Config;
import hello.proxy.config.v1_proxy.InterfaceProxyConfig;
import hello.proxy.trace.logtrace.LogTrace;
import hello.proxy.trace.logtrace.ThreadLocalLogTrace;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Import;

// @Import(AppV1Config.class)
// @Import({AppV1Config.class, AppV2Config.class})
@Import(InterfaceProxyConfig.class)
@SpringBootApplication(scanBasePackages = "hello.proxy.app.v3") //ì£¼ì˜
public class ProxyApplication {

	public static void main(String[] args) {
		SpringApplication.run(ProxyApplication.class, args);
	}

	@Bean
	public LogTrace logTrace() {
		return new ThreadLocalLogTrace();
	}
}
````
  - ì‹¤í–‰ ê²°ê³¼ (ë¡œê·¸)
```
[advanced] [nio-9090-exec-8] h.p.trace.logtrace.ThreadLocalLogTrace   : [0ffcf13d] OrderController.request()
[advanced] [nio-9090-exec-8] h.p.trace.logtrace.ThreadLocalLogTrace   : [0ffcf13d] |-->OrderService.orderItem()
[advanced] [nio-9090-exec-8] h.p.trace.logtrace.ThreadLocalLogTrace   : [0ffcf13d] |   |-->OrderRepository.save()
[advanced] [nio-9090-exec-8] h.p.trace.logtrace.ThreadLocalLogTrace   : [0ffcf13d] |   |<--OrderRepository.save() time = 1001ms
[advanced] [nio-9090-exec-8] h.p.trace.logtrace.ThreadLocalLogTrace   : [0ffcf13d] |<--OrderService.orderItem() time = 1001ms
[advanced] [nio-9090-exec-8] h.p.trace.logtrace.ThreadLocalLogTrace   : [0ffcf13d] OrderController.request() time = 1002ms
```

12. ì •ë¦¬
  - ì¶”ê°€ëœ ìš”êµ¬ì‚¬í•­
    + ì›ë³¸ ì½”ë“œë¥¼ ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•Šê³ , ë¡œê·¸ ì¶”ì ê¸°ë¥¼ ì ìš© (ì™„ë£Œ)
    + íŠ¹ì • ë©”ì„œë“œëŠ” ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ (ì™„ë£Œ)
      * ë³´ì•ˆìƒ ì¼ë¶€ëŠ” ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ë©´ ì•ˆ ë¨ (ì™„ë£Œ)
    + ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ì— ì ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•¨   
      * v1 - ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ” êµ¬í˜„ í´ë˜ìŠ¤ì— ì ìš© (ì™„ë£Œ)
      * v2 - ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ì— ì ìš© 
      * v3 - ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ê¸°ëŠ¥ ì ìš©

  - í”„ë¡ì‹œì™€ DI ë•ë¶„ì— ì›ë³¸ ì½”ë“œë¥¼ ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•Šê³ , ë¡œê·¸ ì¶”ì ê¸° ë„ì…
  - ë¬¼ë¡ , ë„ˆë¬´ ë§ì€ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ë‹¨ì  ì¡´ì¬
