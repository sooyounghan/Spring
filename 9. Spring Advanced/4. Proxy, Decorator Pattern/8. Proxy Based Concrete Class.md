-----
### êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ
-----
1. ConcreteLogicì€ ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ê³ , êµ¬ì²´ í´ë˜ìŠ¤ë§Œ ì¡´ì¬
   - ConcreteLogic (í…ŒìŠ¤íŠ¸ ì½”ë“œ(src/test)ì— ìœ„ì¹˜)
```java
package hello.proxy.pureproxy.concreteproxy.code;

import lombok.extern.slf4j.Slf4j;

@Slf4j
public class ConcreteLogic {
    public String operation() {
        log.info("ConcreteLogic ì‹¤í–‰"); 
        return "Data";
    }
}
```
  - ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ê³ , êµ¬ì²´ í´ë˜ìŠ¤ë§Œ ì¡´ì¬
  - ì—¬ê¸°ì— í”„ë¡ì‹œ ë„ì…

2. í”„ë¡ì‹œ ë„ì… ì „ - í´ë˜ìŠ¤ ë° ëŸ°íƒ€ì… ì˜ì¡´ ê´€ê³„
<div align="center">
<img src="https://github.com/user-attachments/assets/c7134e7a-0004-4cc1-a4da-b914ed9a66f2">
</div>

3. ConcreteClient (í…ŒìŠ¤íŠ¸ ì½”ë“œ(src/test)ì— ìœ„ì¹˜)
```java
package hello.proxy.pureproxy.concreteproxy.code;

public class ConcreteClient {
    private ConcreteLogic concreteLogic;

    public ConcreteClient(ConcreteLogic concreteLogic) {
        this.concreteLogic = concreteLogic;
    }
    
    public void execute() {
        concreteLogic.operation();
    }
}
```

4. ConcreteProxyTest
```java
package hello.proxy.pureproxy.concreteproxy;

import hello.proxy.pureproxy.concreteproxy.code.ConcreteClient;
import hello.proxy.pureproxy.concreteproxy.code.ConcreteLogic;
import org.junit.jupiter.api.Test;

public class ConcreteProxyTest {

    @Test
    void noProxy() {
        ConcreteLogic concreteLogic = new ConcreteLogic();
        ConcreteClient client = new ConcreteClient(concreteLogic);
        client.execute();
    }
}
```

```
[Test worker] INFO hello.proxy.pureproxy.concreteproxy.code.ConcreteLogic -- ConcreteLogic ì‹¤í–‰
```

-----
### í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ë„ì…
-----
1. ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ê¹Œì§€ í”„ë¡ì‹œ ë„ì…
2. ğŸ’¡ ê·¸ëŸ°ë° ìë°”ì˜ ë‹¤í˜•ì„±ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë“ , ì•„ë‹ˆë©´ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë“  ìƒìœ„ íƒ€ì…ë§Œ ë§ìœ¼ë©´ ë‹¤í˜•ì„±ì´ ì ìš©
   - ì¦‰, ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì–´ë„ í”„ë¡ì‹œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ
   - ì¦‰, ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì†ì„ ë°›ì•„ í”„ë¡ì‹œë¥¼ ìƒì„±
3. í”„ë¡ì‹œ ë„ì… í›„ - í´ë˜ìŠ¤, ëŸ°íƒ€ì„ ê°ì²´ ì˜ì¡´ ê´€ê³„
<div align="center">
<img src="https://github.com/user-attachments/assets/13abd93f-338b-43c0-b8da-6cb643b3bac9">
<img src="https://github.com/user-attachments/assets/467eb674-3a26-4ebc-8a3e-16b545a7bccd">
</div>

4. TimeProxy (í…ŒìŠ¤íŠ¸ ì½”ë“œ(src/test)ì— ìœ„ì¹˜)
```java
package hello.proxy.pureproxy.concreteproxy.code;

import lombok.extern.slf4j.Slf4j;

@Slf4j
public class TimeProxy extends ConcreteLogic {
    private ConcreteLogic concreteLogic;

    public TimeProxy(ConcreteLogic concreteLogic) {
        this.concreteLogic = concreteLogic;
    }

    @Override
    public String operation() {
        log.info("TimeDecorator ì‹¤í–‰");
        long startTime = System.currentTimeMillis();

        String result = concreteLogic.operation();

        long endTime = System.currentTimeMillis();
        long resultTime = endTime - startTime;


        log.info("TimeDecorator ì¢…ë£Œ, resultTime = {}ms", resultTime);
        return result;
    }
}
```
  - TimeProxy í”„ë¡ì‹œëŠ” ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ ì œê³µ
  - ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹ˆë¼ í´ë˜ìŠ¤ì¸ ConcreteLogicì„ ìƒì†ë°›ì•„ì„œ ë§Œë“¬


5. ConcreteProxyTest - addProxy() ì¶”ê°€
```java
@Test
void addProxy() {
    ConcreteLogic concreteLogic = new ConcreteLogic();
    TimeProxy timeProxy = new TimeProxy(concreteLogic);
    ConcreteClient client = new ConcreteClient(timeProxy);
    client.execute(); 
}
```
  - í•µì‹¬ì€ ConcreteClient ìƒì„±ìì— concreteLogicì´ ì•„ë‹ˆë¼ timeProxyë¥¼ ì£¼ì…
  - ConcreteClientëŠ” ConcreteLogicì„ ì˜ì¡´í•˜ëŠ”ë°, ë‹¤í˜•ì„±ì— ì˜í•´ ConcreteLogicì— concreteLogicë„ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìœ¼ë©°, tiemProxyë„ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŒ
  - ConcreteLogicì— í• ë‹¹í•  ìˆ˜ ìˆëŠ” ê°ì²´
    + ConcreteLogic = concreteLogic (ë³¸ì¸ê³¼ ê°™ì€ íƒ€ì… í• ë‹¹)
    + ConcreteLogic = timeProxy (ìì‹ íƒ€ì… í• ë‹¹)
    
6. ConcreteClient ì°¸ê³ 
```java
package hello.proxy.pureproxy.concreteproxy.code;

public class ConcreteClient {
    private ConcreteLogic concreteLogic; // ConcreteLogic, TimeProxy ëª¨ë‘ ì£¼ì… ê°€ëŠ¥

    public ConcreteClient(ConcreteLogic concreteLogic) {
        this.concreteLogic = concreteLogic;
    }

    public void execute() {
        concreteLogic.operation();
    }
}
```

  - ì‹¤í–‰ ê²°ê³¼
```
[Test worker] INFO hello.proxy.pureproxy.concreteproxy.code.TimeProxy -- TimeDecorator ì‹¤í–‰
[Test worker] INFO hello.proxy.pureproxy.concreteproxy.code.ConcreteLogic -- ConcreteLogic ì‹¤í–‰
[Test worker] INFO hello.proxy.pureproxy.concreteproxy.code.TimeProxy -- TimeDecorator ì¢…ë£Œ, resultTime = 0ms
```

7. ì¸í„°í˜ì´ìŠ¤ ì—†ì´ë„ í´ë˜ìŠ¤ ê¸°ë°˜ì˜ í”„ë¡ì‹œê°€ ì˜ ì ìš©ë¨
8. ğŸ’¡ ìë°” ì–¸ì–´ì—ì„œ ë‹¤í˜•ì„±ì€ ì¸í„°í˜ì´ìŠ¤ë‚˜ í´ë˜ìŠ¤ë¥¼ êµ¬ë¶„í•˜ì§€ ì•Šê³  ëª¨ë‘ ì ìš©
   - ğŸ’¡ í•´ë‹¹ íƒ€ì…ê³¼ ê·¸ íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…ì€ ëª¨ë‘ ë‹¤í˜•ì„±ì˜ ëŒ€ìƒ
   
-----
### ì ìš©
-----
1. V2 ì• í”Œë¦¬ì¼€ì´ì…˜ì— í”„ë¡ì‹œ ê¸°ëŠ¥ ì ìš©
2. OrderRepositoryConcreteProxy
```java
package hello.proxy.config.v1_proxy.concrete_proxy;

import hello.proxy.app.v2.OrderRepositoryV2;
import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;

public class OrderRepositoryConcreteProxy extends OrderRepositoryV2 {
    private final OrderRepositoryV2 target;
    private final LogTrace logTrace;

    public OrderRepositoryConcreteProxy(OrderRepositoryV2 target, LogTrace logTrace) {
        this.target = target;
        this.logTrace = logTrace;
    }

    @Override
    public void save(String itemId) {
        TraceStatus status = null;
        
        try {
            status = logTrace.begin("OrderRepository.save()");

            // Target í˜¸ì¶œ
            target.save(itemId);
            
            logTrace.end(status);
        } catch (Exception e) {
            logTrace.exception(status, e);
            throw e;
        }
    }
}
```

3. OrderServiceConcreteProxy
```java
package hello.proxy.config.v1_proxy.concrete_proxy;

import hello.proxy.app.v2.OrderRepositoryV2;
import hello.proxy.app.v2.OrderServiceV2;
import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;

public class OrderServiceConcreteProxy extends OrderServiceV2 {
    
    private OrderServiceV2 target;
    private LogTrace logTrace;

    public OrderServiceConcreteProxy(OrderServiceV2 target, LogTrace logTrace) {
       // ğŸ’¡ ìì‹ í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” ë¶€ëª¨ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼í•¨ (í•­ìƒ ì²«ì¤„ì— super()), ê·¸ëŸ¬ë‚˜ ì—¬ê¸°ì„œëŠ” í”„ë¡ì‹œ ê¸°ëŠ¥ë§Œ ì“¸ ê²ƒì´ë¯€ë¡œ super(null)
        super(null);
        this.target = target;
        this.logTrace = logTrace;
    }

    @Override
    public void orderItem(String itemId) {
        TraceStatus status = null;
        
        try {
            status = logTrace.begin("OrderService.orderItem()");

            // Target í˜¸ì¶œ
            target.orderItem(itemId);
            
            logTrace.end(status);
        } catch (Exception e) {
            logTrace.exception(status, e);
            throw e;
        }
    }
}
```
   - ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ OrderServiceV2 í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ í”„ë¡ì‹œ ìƒì„±
   - ğŸ’¡ğŸ’¡ í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ë‹¨ì 
     + ğŸ’¡ super(null) : OrderServiceV2 - ìë°” ê¸°ë³¸ ë¬¸ë²•ì— ì˜í•´ ìì‹ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ë–„ëŠ” í•­ìƒ super()ë¡œë¶€í„° ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ìƒì„±ì í˜¸ì¶œ
     + ğŸ’¡ ì´ ë¶€ë¶„ì„ ìƒëµí•˜ë©´ ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œí•˜ì§€ë§Œ, ë¶€ëª¨ í´ë˜ìŠ¤ì¸ OrderServiceV2ì˜ ê¸°ë³¸ ìƒì„±ìëŠ” ì—†ê³ , ìƒì„±ìì—ì„œ íŒŒë¼ë¯¸í„° 1ê°œë¥¼ í•„ìˆ˜ë¡œ ë°›ìŒ
     + ğŸ’¡ ë”°ë¼ì„œ, íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì„œ super(...)ë¥¼ í˜¸ì¶œí•´ì•¼ í•¨
     + ğŸ’¡ ê·¸ëŸ°ë°, í”„ë¡ì‹œëŠ” ë¶€ëª¨ ê°ì²´ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ super(null)ì„ ì…ë ¥í•´ë„ ë¨
     + ë¬¼ë¡ , ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œëŠ” ì´ëŸ° ê³ ë¯¼ì„ í•˜ì§€ ì•Šì•„ë„ ë¨
   - OrderServiceV2 ìƒì„±ì (ì°¸ê³ )
```java
public OrderServiceV2(OrderRepositoryV2 orderRepository) { 
      this.orderRepository = orderRepository;
}
```

4. OrderControllerConcreteProxy
```java
package hello.proxy.config.v1_proxy.concrete_proxy;

import hello.proxy.app.v2.OrderControllerV2;
import hello.proxy.trace.TraceStatus;
import hello.proxy.trace.logtrace.LogTrace;

public class OrderControllerConcreteProxy extends OrderControllerV2 {
    private final OrderControllerV2 target;
    private final LogTrace logTrace;

    public OrderControllerConcreteProxy(OrderControllerV2 target, LogTrace logTrace) {
        super(null);
        this.target = target;
        this.logTrace = logTrace;
    }

    @Override
    public String request(String itemId) {
        TraceStatus status = null;

         try {
             status = logTrace.begin("OrderController.request()");

             // Target í˜¸ì¶œ
             String result = target.request(itemId);

             logTrace.end(status);
             return result;
         } catch(Exception e) {
             logTrace.exception(status, e);
             throw e;
         }
    }

    @Override
    public String noLog() {
        return target.noLog();
    }
}
```

5. ConcreteProxyConfig
```java
package hello.proxy.config.v1_proxy;

import hello.proxy.app.v2.OrderControllerV2;
import hello.proxy.app.v2.OrderRepositoryV2;
import hello.proxy.app.v2.OrderServiceV2;
import hello.proxy.config.v1_proxy.concrete_proxy.OrderControllerConcreteProxy;
import hello.proxy.config.v1_proxy.concrete_proxy.OrderRepositoryConcreteProxy;
import hello.proxy.config.v1_proxy.concrete_proxy.OrderServiceConcreteProxy;
import hello.proxy.trace.logtrace.LogTrace;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class ConcreteProxyConfig {
    @Bean
    public OrderControllerV2 orderControllerV2(LogTrace logTrace) {
        OrderControllerV2 controllerImpl = new OrderControllerV2(orderServiceV2(logTrace));
        return new OrderControllerConcreteProxy(controllerImpl, logTrace);
    }

    @Bean
    public OrderServiceV2 orderServiceV2(LogTrace logTrace) {
        OrderServiceV2 serviceImpl = new OrderServiceV2(orderRepositoryV2(logTrace));
        return new OrderServiceConcreteProxy(serviceImpl, logTrace);
    }
    @Bean
    public OrderRepositoryV2 orderRepositoryV2(LogTrace logTrace) {
        OrderRepositoryV2 repositoryImpl = new OrderRepositoryV2();
        return new OrderRepositoryConcreteProxy(repositoryImpl, logTrace);
    }
}
```
   - ì¸í„°í˜ì´ìŠ¤ ëŒ€ì‹  êµ¬ì²´ í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡ì‹œë¥¼ ë§Œë“ ë‹¤ëŠ” ê²ƒì„ ì œì™¸í•˜ê³  ê¸°ì¡´ê³¼ ë™ì¼

6. ProxyApplication
```java
package hello.proxy;

import hello.proxy.config.AppV1Config;
import hello.proxy.config.AppV2Config;
import hello.proxy.config.v1_proxy.ConcreteProxyConfig;
import hello.proxy.config.v1_proxy.InterfaceProxyConfig;
import hello.proxy.trace.logtrace.LogTrace;
import hello.proxy.trace.logtrace.ThreadLocalLogTrace;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Import;

// @Import(AppV1Config.class)
// @Import({AppV1Config.class, AppV2Config.class})
// @Import(InterfaceProxyConfig.class)
@Import(ConcreteProxyConfig.class)
@SpringBootApplication(scanBasePackages = "hello.proxy.app.v3") //ì£¼ì˜
public class ProxyApplication {

	public static void main(String[] args) {
		SpringApplication.run(ProxyApplication.class, args);
	}

	@Bean
	public LogTrace logTrace() {
		return new ThreadLocalLogTrace();
	}
}
```
   - @Import(ConcreteProxyConfig.class) ì„¤ì • ì¶”ê°€
