-----
### í”„ë¡œì ì…˜ ê²°ê³¼ ë°˜í™˜ - ê¸°ë³¸
-----
1. í”„ë¡œì ì…˜ : SELECT ëŒ€ìƒ ì§€ì •
2. í”„ë¡œì ì…˜ ëŒ€ìƒ í•˜ë‚˜
```java
@Test
public void simpleProjection() {
    List<String> result = queryFactory.select(member.username)
            .from(member)
            .fetch();

    for (String s : result) {
        System.out.println("s = " + s);
    }
}
```
```
s = member1
s = member2
s = member3
s = member4
```

  - í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ë©´, íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì • ê°€ëŠ¥
  - í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ì´ë©´ íŠœí”Œì´ë‚˜ DTOë¡œ ì¡°íšŒ

3. íŠœí”Œ ì¡°íšŒ
   - í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì¼ ë•Œ ì‚¬ìš©
   - ğŸ’¡ ê°€ê¸‰ì  ë ˆí¬ì§€í† ë¦¬ ê³„ì¸µì—ì„œë§Œ ì‚¬ìš©í•  ê²ƒ
     + ë ˆí¬ì§€í† ë¦¬ ê³„ì¸µì—ì„œ ì‚¬ìš©í•˜ëŠ” í•˜ë¶€ ê¸°ìˆ ì„ ì•ë‹¨ ì»¨íŠ¸ë¡¤ëŸ¬ë‚˜ ì„œë¹„ìŠ¤ ê³„ì¸µê¹Œì§€ ë…¸ì¶œë˜ëŠ” ê²ƒì´ ê¶Œì¥í•˜ì§€ ì•ŠìŒ
     + ì¦‰, íŠœí”Œì€ Querydslì— ì˜ì¡´ì ì´ë¯€ë¡œ ì´ ê¸°ìˆ ì´ ë…¸ì¶œë˜ëŠ” ê²ƒì´ ì¢‹ì§€ ì•ŠìŒ
   - com.querydsl.core.Tuple
```java
@Test
public void tupleProejction() {
    List<Tuple> result = queryFactory.select(member.username, member.age)
            .from(member)
            .fetch();

    for (Tuple tuple : result) {
        String username = tuple.get(member.username);
        Integer age = tuple.get(member.age);

        System.out.println("username = " + username);
        System.out.println("age = " + age);
    }
}
```
```
username = member1
age = 10
username = member2
age = 20
username = member3
age = 30
username = member4
age = 40
```

-----
### í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - DTO ì¡°íšŒ
-----
1. ìˆœìˆ˜ JPAì—ì„œ DTO ì¡°íšŒ
2. MemberDto
```java
package study.querydsl.dto;

import lombok.Data;

@Data
public class MemberDto {
    private String username;
    private int age;

    public MemberDto(String username, int age) {
        this.username = username;
        this.age = age;
    }
}
```

3. ìˆœìˆ˜ JPAì—ì„œ DTO ì¡°íšŒ ì½”ë“œ
```java
    @Test
public void findDtoByJPQL() {
    List<MemberDto> result = em.createQuery("SELECT new study.querydsl.dto.MemberDto(m.username, m.age) FROM Member m", MemberDto.class)
            .getResultList();

    for (MemberDto memberDto : result) {
        System.out.println("memberDto = " + memberDto);
    }
}
```
```
memberDto = MemberDto(username=member1, age=10)
memberDto = MemberDto(username=member2, age=20)
memberDto = MemberDto(username=member3, age=30)
memberDto = MemberDto(username=member4, age=40)
```

  - ìˆœìˆ˜ JPAì—ì„œ DTOë¥¼ ì¡°íšŒí•  ë•Œ new ëª…ë ¹ì–´ ì‚¬ìš©í•´ì•¼ í•¨
  - DTOì˜ package ì´ë¦„ì„ ë‹¤ ì ì–´ì¤˜ì•¼ í•˜ë¯€ë¡œ ì§€ì €ë¶„
  - ğŸ’¡ ìƒì„±ì ë°©ì‹ë§Œ ì§€ì›
    
4. Querydsl ë¹ˆ ìƒì„± (Bean Population)
  - ê²°ê³¼ë¥¼ DTOë¡œ ë°˜í™˜í•  ë•Œ ì‚¬ìš©
  - ë‹¤ìŒ 3ê°€ì§€ ë°©ë²• ì§€ì›
    + í”„ë¡œí¼í‹° ì ‘ê·¼
    + í•„ë“œ ì§ì ‘ ì ‘ê·¼
    + ìƒì„±ì ì‚¬ìš©

  - í”„ë¡œí¼í‹° ì ‘ê·¼ - Setter
    + ê¸°ë³¸ ìƒì„±ì í•„ìš”
```java
package study.querydsl.dto;

import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
public class MemberDto {
    private String username;
    private int age;

    public MemberDto(String username, int age) {
        this.username = username;
        this.age = age;
    }
}
```

```java
@Test
public void findDtoBySetter() {
    List<MemberDto> result = queryFactory.select(Projections.bean(MemberDto.class,
                    member.username,
                    member.age))
            .from(member)
            .fetch();

    for (MemberDto memberDto : result) {
        System.out.println("memberDto = " + memberDto);
    }
}
```

```
memberDto = MemberDto(username=member1, age=10)
memberDto = MemberDto(username=member2, age=20)
memberDto = MemberDto(username=member3, age=30)
memberDto = MemberDto(username=member4, age=40)
```

  - í•„ë“œ ì§ì ‘ ì ‘ê·¼
```java
@Test
public void findDtoByField() {
    List<MemberDto> result = queryFactory.select(Projections.fields(MemberDto.class,
                    member.username,
                    member.age))
            .from(member)
            .fetch();

    for (MemberDto memberDto : result) {
        System.out.println("memberDto = " + memberDto);
    }
}
```
```
memberDto = MemberDto(username=member1, age=10)
memberDto = MemberDto(username=member2, age=20)
memberDto = MemberDto(username=member3, age=30)
memberDto = MemberDto(username=member4, age=40)
```

  - ë³„ì¹­ì´ ë‹¤ë¥¼ ë•Œ
```java
package study.querydsl.dto;

import lombok.Data;

@Data
public class UserDto {
    private String name;
    private int age;
}
```

  - í”„ë¡œí¼í‹°ë‚˜, í•„ë“œ ì ‘ê·¼ ìƒì„± ë°©ì‹ì—ì„œ ì´ë¦„ì´ ë‹¤ë¥¼ ë•Œ í•´ê²° ë°©ì•ˆ
```java
@Test
public void findUserDtoByField() {
    QMember memberSub = new QMember("memberSub");

    List<UserDto> result = queryFactory.select(Projections.fields(UserDto.class,
                    member.username.as("name"), // member.username = null -> as name : ê°’ ì…ë ¥

                    ExpressionUtils.as(JPAExpressions.select(memberSub.age.max())
                                    .from(memberSub), "age")))
            .from(member)
            .fetch();

    for (UserDto userDto : result) {
        System.out.println("userDto = " + userDto);
    }
}
```
  - ExpressionUtils.as(source, alias) : í•„ë“œë‚˜ ì„œë¸Œ ì¿¼ë¦¬ì— ë³„ì¹­ ì ìš©
  - username.as("memberName") : í•„ë“œì— ë³„ì¹­ ì ìš©
```
userDto = UserDto(name=member1, age=40)
userDto = UserDto(name=member2, age=40)
userDto = UserDto(name=member3, age=40)
userDto = UserDto(name=member4, age=40)
```

  - ìƒì„±ì ì‚¬ìš©
```java
@Test
public void findDtoByConstructor() {
    List<MemberDto> result = queryFactory.select(Projections.constructor(MemberDto.class,
                    member.username,
                    member.age))
            .from(member)
            .fetch();

    for (MemberDto memberDto : result) {
        System.out.println("memberDto = " + memberDto);
    }
}
```
```
memberDto = MemberDto(username=member1, age=10)
memberDto = MemberDto(username=member2, age=20)
memberDto = MemberDto(username=member3, age=30)
memberDto = MemberDto(username=member4, age=40)
```
  - ìƒì„±ìê°€ ì—†ìœ¼ë©´ ëŸ°íƒ€ì„ ì‹œì ì— ì˜¤ë¥˜ ë°œìƒ

-----
### í”„ë¡œì ì…˜ ê²°ê³¼ ë°˜í™˜ - @QueryProjection
-----
1. ìƒì„±ì + @QueryProjection
```java
package study.querydsl.dto;

import com.querydsl.core.annotations.QueryProjection;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
public class MemberDto {
    private String username;
    private int age;

    @QueryProjection
    public MemberDto(String username, int age) {
        this.username = username;
        this.age = age;
    }
}
```
  - ./gradlew compileQuerydsl
  - QMemberDto ìƒì„± í™•ì¸
```java
package study.querydsl.dto;

import com.querydsl.core.types.dsl.*;

import com.querydsl.core.types.ConstructorExpression;
import javax.annotation.processing.Generated;

@Generated("com.querydsl.codegen.DefaultProjectionSerializer")
public class QMemberDto extends ConstructorExpression<MemberDto> {

    private static final long serialVersionUID = 1356709634L;

    public QMemberDto(com.querydsl.core.types.Expression<String> username, com.querydsl.core.types.Expression<Integer> age) {
        super(MemberDto.class, new Class<?>[]{String.class, int.class}, username, age);
    }

}

```

2. @QueryProjection í™œìš©
```java
@Test
public void findDtoByQueryProjection() {
    List<MemberDto> result = queryFactory.select(new QMemberDto(member.username, member.age))
            .from(member)
            .fetch();

    for (MemberDto memberDto : result) {
        System.out.println("memberDto = " + memberDto);
    }
}
```
```
memberDto = MemberDto(username=member1, age=10)
memberDto = MemberDto(username=member2, age=20)
memberDto = MemberDto(username=member3, age=30)
memberDto = MemberDto(username=member4, age=40)
```

  - ì´ ë°©ë²•ì€ ì»´íŒŒì¼ëŸ¬ë¡œ íƒ€ì… ì²´í¬ë¥¼ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê°€ì¥ ì•ˆì „í•œ ë°©ë²• (ì»´íŒŒì¼ ì˜¤ë¥˜ í™•ì¸ ê°€ëŠ¥)
  - ë‹¤ë§Œ DTOì— QueryDSL ì• ë„ˆí…Œì´ì…˜ì„ ìœ ì§€í•´ì•¼í•˜ëŠ” ì (=ì˜ì¡´ì )ê³¼ DTOê¹Œì§€ QíŒŒì¼ì„ ìƒì„±í•´ì•¼ í•˜ëŠ” ë‹¨ì  ì¡´ì¬

3. DISTINCT
```java
List<String> result = queryFactory
        .select(member.username).distinct()
        .from(member)
        .fetch();
```
  - JPQLì˜ DISTINCTì™€ ë™ì¼
