-----
### ë ˆí¬ì§€í† ë¦¬ ì§€ì› - QuerydslRepositorySupport
-----
1. Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë ˆí¬ì§€í† ë¦¬ êµ¬í˜„ì²´ê°€ ë°›ìœ¼ë©´ í¸ë¦¬í•œ ê¸°ëŠ¥
```java
@Repository
public abstract class QuerydslRepositorySupport {
    private final PathBuilder<?> builder;
    @Nullable
    private EntityManager entityManager;
    @Nullable
    private Querydsl querydsl;

    ...

    @Autowired
    public void setEntityManager(EntityManager entityManager) {
        Assert.notNull(entityManager, "EntityManager must not be null");
        this.querydsl = new Querydsl(entityManager, this.builder);
        this.entityManager = entityManager;
    }

    ...

    protected JPQLQuery<Object> from(EntityPath<?>... paths) {
        return this.getRequiredQuerydsl().createQuery(paths);
    }

    ...

    public <T> JPQLQuery<T> applyPagination(Pageable pageable, JPQLQuery<T> query) {
        Assert.notNull(pageable, "Pageable must not be null");
        Assert.notNull(query, "JPQLQuery must not be null");
        if (pageable.isUnpaged()) {
            return query;
        } else {
            query.offset(pageable.getOffset()); // offset ì²˜ë¦¬
            query.limit((long)pageable.getPageSize()); // limit ì²˜ë¦¬
            return this.applySorting(pageable.getSort(), query);
        }
    }
}
```
```java
...

public class MemberRepositoryImpl extends QuerydslRepositorySupport implements MemberRepositoryCustom {

    /*
    private final JPAQueryFactory queryFactory;

    public MemberRepositoryImpl(EntityManager entityManager) {
        this.queryFactory = new JPAQueryFactory(entityManager);
    }

    */

    public MemberRepositoryImpl() {
        super(Member.class); // ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì§ì ‘ ë°›ì•„ ì²˜ë¦¬
    }


    @Override
    public List<MemberTeamDto> search(MemberSearchCondition condition) {
        return from(member) // FROM ì ˆ ë¨¼ì € ë“±ì¥
               .leftJoin(member.team, team)
               .where(
                        usernameEq(condition.getUsername()),
                        teamNameEq(condition.getTeamName()),
                        ageGoe(condition.getAgeGoe()),
                        ageLoe(condition.getAgeLoe())
                )
                .select( // ë§ˆì§€ë§‰ì— SELECT ì ˆ (Querydsl 3.x ë²„ì „ì— ì¶œì‹œë˜ì—ˆìœ¼ë¯€ë¡œ ìƒì´í–ˆìŒ)
                        new QMemberTeamDto(
                                member.id,
                                member.username,
                                member.age,
                                team.id,
                                team.name
                        )
                )
                .fetch();
        
    }

    /*
    @Override
    public List<MemberTeamDto> search(MemberSearchCondition condition) {
        return queryFactory
                .select(
                        new QMemberTeamDto(
                                member.id,
                                member.username,
                                member.age,
                                team.id,
                                team.name
                        )
                )
                .from(member)
                .leftJoin(member.team, team)
                .where(
                        usernameEq(condition.getUsername()),
                        teamNameEq(condition.getTeamName()),
                        ageGoe(condition.getAgeGoe()),
                        ageLoe(condition.getAgeLoe())
                )
                .fetch();
    }
     */

    ...

   @Override
    public Page<MemberTeamDto> searchPageSimple(MemberSearchCondition condition, Pageable pageable) {
        JPQLQuery<MemberTeamDto> jpaQuery = from(member)
                .join(member.team, team)
                .where(
                        usernameEq(condition.getUsername()),
                        teamNameEq(condition.getTeamName()),
                        ageGoe(condition.getAgeGoe()),
                        ageLoe(condition.getAgeLoe())
                )
                .select(
                        new QMemberTeamDto(
                                member.id,
                                member.username,
                                member.age,
                                team.id,
                                team.name
                        )
                );

        JPQLQuery<MemberTeamDto> query = getQuerydsl().applyPagination(pageable, jpaQuery);
        List<MemberTeamDto> content = query.fetch();
        int count = content.size();
        
        return new PageImpl<>(content, pageable, count);
    }

    ...
}
```

2. ì¥ì 
   - getQuerydsl().applyPagination() : ìŠ¤í”„ë§ ë°ì´í„°ê°€ ì œê³µí•˜ëŠ” í˜ì´ì§•ì„ Querydslë¡œ í¸ë¦¬í•˜ê²Œ ë³€í™˜ ê°€ëŠ¥ (ğŸ’¡ ë‹¨, SortëŠ” ì˜¤ë¥˜ ë°œìƒ)
   - from()ìœ¼ë¡œ ì‹œì‘ ê°€ëŠ¥(ğŸ’¡ ìµœê·¼ì—ëŠ” QueryFactoryë¥¼ ì‚¬ìš©í•´ì„œ select()ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ë” ëª…ì‹œì )
   - EntityManager ì œê³µ

3. í•œê³„
   - Querydsl 3.x ë²„ì „ì„ ëŒ€ìƒìœ¼ë¡œ ë§Œë“¬
   - Querydsl 4.xì— ë‚˜ì˜¨ JPAQueryFactoryë¡œ ì‹œì‘í•  ìˆ˜ ì—†ìŒ
     + ì¦‰, SELECTë¡œ ì‹œì‘í•  ìˆ˜ ì—†ìŒ (FROMìœ¼ë¡œ ì‹œì‘í•´ì•¼ í•¨)
   - QueryFactoryë¥¼ ì œê³µí•˜ì§€ ì•ŠìŒ
   - ìŠ¤í”„ë§ ë°ì´í„° Sort ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ì§€ ì•ŠìŒ (ì§ì ‘ Querydsl Sortë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ, Querydsl Sort ì¡°ê±´ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨)
