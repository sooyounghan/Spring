-----
### ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” 1
-----
1. WASë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— í•„ìš”í•œ ì´ˆê¸°í™” ì‘ì—…ì´ ì¡´ì¬
   - ì„œë¹„ìŠ¤ì— í•„ìš”í•œ í•„í„°ì™€ ì„œë¸”ë¦¿ì„ ë“±ë¡í•˜ê³ , ì—¬ê¸°ì— ìŠ¤í”„ë§ì„ ì‚¬ìš©í•œë‹¤ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ , ì„œë¸”ë¦¿ê³¼ ìŠ¤í”„ë§ì„ ì—°ê²°í•˜ëŠ” ë””ìŠ¤íŒ¨ì¹˜ ì„œë¸”ë¦¿ë„ ë“±ë¡í•´ì•¼ í•¨
   - WASê°€ ì œê³µí•˜ëŠ” ì´ˆê¸°í™” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´, WAS ì‹¤í–‰ ì‹œì ì— ì´ëŸ¬í•œ ì´ˆê¸°í™” ê³¼ì • ì§„í–‰ ê°€ëŠ¥
   - ê³¼ê±°ì—ëŠ” web.xmlì„ ì‚¬ìš©í•´ì„œ ì´ˆê¸°í™”í–ˆì§€ë§Œ, ì§€ê¸ˆì€ ì„œë¸”ë¦¿ ìŠ¤í™ì—ì„œ ìë°” ì½”ë“œë¥¼ ì‚¬ìš©í•œ ì´ˆê¸°í™” ì§€ì›

<div align="center">
<img src="https://github.com/user-attachments/assets/a3b5ce1c-2db0-4a76-83f5-cb384f7e7d73">
</div>

2. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ê°œë°œ
   - ì„œë¸”ë¦¿ì€ ServletContainerInitializerë¼ëŠ” ì´ˆê¸°í™” ì¸í„°í˜ì´ìŠ¤ ì œê³µ
   - ì´ë¦„ ê·¸ëŒ€ë¡œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ê¸°ëŠ¥ ì œê³µ
   - ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ì‹¤í–‰ ì‹œì ì— ì´ˆê¸°í™” ë©”ì„œë“œì¸ onStartup() í˜¸ì¶œ
   - ì—¬ê¸°ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì„ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ë“±ë¡ ê°€ëŠ¥
   - ServletContainerInitializer
```java
package jakarta.servlet;

import java.util.Set;

public interface ServletContainerInitializer {
    void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException;
}
```
   - ```Set<Class<?>> c``` : ì¡°ê¸ˆ ë” ìœ ì—°í•œ ì´ˆê¸°í™” ê¸°ëŠ¥ ì œê³µ. @HandlesTypes ì• ë„ˆí…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©
   - ServletContext ctx : ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ìì²´ ê¸°ëŠ¥ ì œê³µ. ì´ ê°ì²´ë¥¼ í†µí•´ í•„í„°ë‚˜ ì„œë¸”ë¦¿ ë“±ë¡ ê°€ëŠ¥

   - ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°„ë‹¨íˆ êµ¬í˜„í•´ì„œ ì‹¤ì œ ë™ì‘ í™•ì¸
   - hello/container/MyContainerInitV1
```java
package hello.container;

import jakarta.servlet.ServletContainerInitializer;
import jakarta.servlet.ServletContext;
import jakarta.servlet.ServletException;

import java.util.Set;

public class MyContainerInitV1 implements ServletContainerInitializer {
    @Override
    public void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException {
        System.out.println("MyContainerInitV1.onStartup");
        System.out.println("c = " + c);
        System.out.println("ctx = " + ctx);
    }
}
```

  - ì¶”ê°€ë¡œ WASì—ê²Œ ì‹¤í–‰í•  ì´ˆê¸°í™” í´ë˜ìŠ¤ë¥¼ ì•Œë ¤ì¤˜ì•¼ í•¨
  - ë‹¤ìŒ ê²½ë¡œì— íŒŒì¼ ìƒì„± : resources/META-INF/services/jakarta.servlet.ServletContainerInitializer
    + í•´ë‹¹ íŒŒì¼ì— ë‹¤ìŒ ë‚´ìš© ì¶”ê°€ : hello.container.MyContainerInitV1
    + ì´ íŒŒì¼ì— ë°©ê¸ˆ ë§Œë“  MyContainerInitV1 í´ë˜ìŠ¤ë¥¼ íŒ¨í‚¤ì§€ ê²½ë¡œë¥¼ í¬í•¨í•´ì„œ ì§€ì •
  - ì´ë ‡ê²Œ í•˜ë©´, WASê°€ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì´ˆê¸°í™” í´ë˜ìŠ¤ë¡œ ì¸ì‹í•˜ê³  ë¡œë”© ì‹œì ì— ì‹¤í–‰
  - ğŸ’¡ ì£¼ì˜ : ê²½ë¡œì™€ íŒŒì¼ ì´ë¦„ì„ ì£¼ì˜í•´ì„œ ì‘ì„± (META-INF : ëŒ€ë¬¸ì / services : ë§ˆì§€ë§‰ s ë“¤ì–´ê° / íŒŒì¼ ì´ë¦„ì€ jakarta.servlet.ServeltContainerInitializer)

<div align="center">
<img src="https://github.com/user-attachments/assets/314ec120-b853-4856-a3e5-093237260f07">
</div>

  - WAS ì‹¤í–‰ : ì‹¤í–‰ ê²°ê³¼ ë¡œê·¸
```
MyContainerInitV1.onStartup
c = null
ctx = org.apache.catalina.core.ApplicationContextFacade@62bf58e8
```
  - WASë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ì´ˆê¸°í™” í´ë˜ìŠ¤ê°€ ì‹¤í–‰ëœ ê²ƒ í™•ì¸ ê°€ëŠ¥

-----
### ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” 2
-----
1. ì—¬ê¸°ì„œëŠ” HelloServletì´ë¼ëŠ” ì„œë¸”ë¦¿ì´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ì‹œì ì— í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ì§ì ‘ ë“±ë¡
2. ì„œë¸”ë¦¿ì„ ë“±ë¡í•˜ëŠ” 2ê°€ì§€ ë°©ë²•
   - @WebServlet ì• ë„ˆí„°ì´ì…˜
   - í”„ë¡œê·¸ë˜ë° ë°©ì‹

3. HelloServlet
```java
package hello.servlet;

import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

public class HelloServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("HelloServlet.service");
        resp.getWriter().println("hello Servlet!");
    }
}
```
  - ì´ ì„œë¸”ë¦¿ì„ ë“±ë¡í•˜ê³  ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼
    + ë¡œê·¸ : HelloServlet.service
    + HTTP ì‘ë‹µ : hello Servlet!
  - ì´ ì„œë¸”ë¦¿ì„ ë“±ë¡

4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”
   - ğŸ’¡ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ì¡°ê¸ˆ ë” ìœ ì—°í•œ ì´ˆê¸°í™” ê¸°ëŠ¥ ì§€ì› : ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”
   - AppInit ì¸í„°í˜ì´ìŠ¤
```java
package hello.container;

import jakarta.servlet.ServletContext;

public interface AppInit {
    void onStartUp(ServletContext servletContext);
}
```
   - ğŸ’¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•˜ë ¤ë©´ ë¨¼ì € ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•¨
   - ë‚´ìš©ê³¼ í˜•ì‹ì€ ìƒê´€ì—†ìœ¼ë©°, ì¸í„°í˜ì´ìŠ¤ëŠ” ê¼­ í•„ìš”
   - ì—¬ê¸°ì„œ AppInit ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±
   - ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”(AppInit) ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ ì‹¤ì œ ë™ì‘ : AppInitV1Servlet
```java
package hello.container;

import hello.servlet.HelloServlet;
import jakarta.servlet.ServletContext;
import jakarta.servlet.ServletRegistration;

/**
 * http://localhost:9090/hello-servlet
 */
public class AppInitV1Servlet implements AppInit {

    @Override
    public void onStartUp(ServletContext servletContext) {
        System.out.println("AppInitV1Servlet.onStartUp");

        // ìˆœìˆ˜ ì„œë¸”ë¦¿ ì½”ë“œ ë“±ë¡
        ServletRegistration.Dynamic helloServlet = servletContext.addServlet("helloServlet", new HelloServlet());

        // ì„œë¸”ë¦¿ ë§¤í•‘
        helloServlet.addMapping("/hello-servlet");
    }
}
```
   - ì—¬ê¸°ì„œëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ HelloServlet ì„œë¸”ë¦¿ì„ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ì§ì ‘ ë“±ë¡
   - HTTPë¡œ /hello-servletë¥¼ í˜¸ì¶œí•˜ë©´ HelloServlet ì„œë¸”ë¦¿ì´ ì‹¤í–‰

5. í”„ë¡œê·¸ë˜ë° ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
   - @WebSerlvetì„ ì‚¬ìš©í•˜ë©´ ì• ë„ˆí…Œì´ì…˜ í•˜ë‚˜ë¡œ ì„œë¸”ë¦¿ì„ í¸ë¦¬í•˜ê²Œ ë“±ë¡ ê°€ëŠ¥
   - í•˜ì§€ë§Œ, ì• ë„ˆí…Œì´ì…˜ì„ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ìœ ì—°í•˜ê²Œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì–´ë ¤ì›€ (ë§ˆì¹˜, í•˜ë“œì½”ë”© ëœ ê²ƒì²˜ëŸ¼ ë™ì‘)
   - ì•„ë˜ ì°¸ê³  ì˜ˆì‹œë¥¼ ë³´ë©´ /test ê²½ë¡œë¥¼ ë³€ê²½í•˜ê³  ì‹¶ìœ¼ë©´ ì½”ë“œë¥¼ ì§ì ‘ ë³€ê²½í•´ì•¼ ë°”ê¿€ ìˆ˜ ìˆìŒ
```java
@WebServlet(urlPatterns = "/test")
public class TestServlet extends HttpServlet {}
```
   - í•˜ì§€ë§Œ, í”„ë¡œê·¸ë˜ë° ë°©ì‹ì€ ì½”ë”©ì„ ë” ë§ì´ í•´ì•¼í•˜ê³  ë¶ˆí¸í•˜ì§€ë§Œ, ë¬´í•œí•œ ìœ ì—°ì„±ì„ ì œê³µ
   - ì˜ˆ)
     + /hello-servlet ê²½ë¡œë¥¼ ìƒí™©ì— ë”°ë¼ ë°”ê¾¸ì–´ ì™¸ë¶€ ì„¤ì •ì„ ì½ì–´ì„œ ë“±ë¡ ê°€ëŠ¥
     + ì„œë¸”ë¦¿ ìì²´ë„ íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ifë¬¸ìœ¼ë¡œ ë¶„ê¸°í•´ ë“±ë¡í•˜ê±°ë‚˜ ëº„ ìˆ˜ ìˆìŒ
     + ì„œë¸”ë¦¿ì„ ì§ì ‘ ìƒì„±í•˜ê¸° ë•Œë¬¸ì—, ìƒì„±ìì— í•„ìš”í•œ ì •ë³´ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆìŒ

6. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”(ServletContainerInitializer)ëŠ” í™•ì¸. ê·¸ëŸ°ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”(AppInit)ì˜ ì‹¤í–‰ ê³¼ì •ì€?
  - MyContainerInitV2
```java
package hello.container;

import jakarta.servlet.ServletContainerInitializer;
import jakarta.servlet.ServletContext;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.HandlesTypes;

import java.util.Set;

@HandlesTypes(AppInit.class) // Set<Class<?>>ì— AppInit êµ¬í˜„ì²´ë¥¼ ì£¼ì…ë°›ì•„ ë„˜ê²¨ì¤Œ
public class MyContainerInitV2 implements ServletContainerInitializer {
    @Override
    public void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException {
        System.out.println("MyContainerInitV2.onStartup");
        System.out.println("c = " + c);
        System.out.println("ctx = " + ctx);

        // class hello.container.AppInitV1Servlet
        for (Class<?> appInitClass : c) {
            try {
                // = new AppInitV1Servlet()ê³¼ ë™ì¼
                // appInitClassì˜ ìƒì„±ìë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                AppInit appInit = (AppInit) appInitClass.getDeclaredConstructor().newInstance();
                appInit.onStartUp(ctx); // ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì‹¤í–‰
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        }
    }
}
```

7. ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ê³¼ì • (ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”)
   - ğŸ’¡ @HandlesTypes ì• ë„ˆí…Œì´ì…˜ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì¸í„°í˜ì´ìŠ¤ ì§€ì •
     + ì—¬ê¸°ì„œ ì•ì„œ ë§Œë“  AppInit.class ì¸í„°í˜ì´ìŠ¤ ì§€ì •
   - ğŸ’¡ğŸ’¡ğŸ’¡ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”(ServletContainerInitializer)ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¤ëŠ” ```Set<Class<?>> c```ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë“¤ì„ ëª¨ë‘ ì°¾ì•„ì„œ í´ë˜ìŠ¤ ì •ë³´ë¡œ ì „ë‹¬
     + ì—¬ê¸°ì„œëŠ” @HandlesTypes(AppInit.class)ë¥¼ ì§€ì •í–ˆìœ¼ë¯€ë¡œ AppInit.class êµ¬í˜„ì²´ì¸ AppInitV1Servlet.class ì •ë³´ ì „ë‹¬
     + ğŸ’¡ ì°¸ê³ ë¡œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ë‹ˆë¼ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì „ë‹¬í•˜ë¯€ë¡œ ì‹¤í–‰í•˜ë ¤ë©´ ê°ì²´ ìƒì„±í•´ì„œ ì‚¬ìš©
   - appInitClass.getDeclaredConstructor().newInstance()
     + ë¦¬í”Œë ˆì…˜ì„ ì‚¬ìš©í•´ ê°ì²´ ìƒì„±
     + ì°¸ê³ ë¡œ ì´ ì½”ë“œëŠ” new AppInitV1Servlet()ê³¼ ê°™ë‹¤ê³  ìƒê°í•˜ë©´ ë¨
   - ğŸ’¡ğŸ’¡ğŸ’¡ appInit.onStartup(ctx)
     + ğŸ’¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì½”ë“œë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ë©´ì„œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì •ë³´ê°€ ë‹´ê¸´ ctxë„ í•¨ê»˜ ì „ë‹¬

8. MyContainerInitV2 ë“±ë¡
   - ì´ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•´ì•¼í•¨
   - resources/META-INF/services/jakarta.servlet.ServletContainerInitializerì— ì„¤ì • ì¶”ê°€
```
hello.container.MyContainerInitV1
hello.container.MyContainerInitV2
```
   - hello.container.MyContainerInitV2 ì¶”ê°€

9. WAS ì‹¤í–‰ : ì‹¤í–‰ ë¡œê·¸
```
MyContainerInitV1.onStartup
c = null
ctx = org.apache.catalina.core.ApplicationContextFacade@4b468567

MyContainerInitV2.onStartup
c = [class hello.container.AppInitV1Servlet]
ctx = org.apache.catalina.core.ApplicationContextFacade@4b468567

AppInitV1Servlet.onStartUp
```

10. ì„œë¸”ë¦¿ ì‹¤í–‰ (http://localhost:9090/hello-servlet)
```
hello servlet!
```

11. ì •ë¦¬
  - ğŸ’¡ ì´ˆê¸°í™” ìˆœì„œ
<div align="center">
<img src="https://github.com/user-attachments/assets/b3fe6380-1d03-4562-bfdb-73a0de284b1c">
</div>

  - ğŸ’¡ğŸ’¡ğŸ’¡ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ì‹¤í–‰
    + resources/META-INF/services/jakarta.servlet.ServletContainerInitializer

  - ğŸ’¡ğŸ’¡ğŸ’¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì‹¤í–‰
    + @HandlesTypes(AppInit.class)

12. ğŸ’¡ ì°¸ê³  : ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”ë§Œ ìˆì–´ë„ ë  ê²ƒ ê°™ì€ë°, ì™œ ë³µì¡í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”ë¼ëŠ” ê°œë…ì„ ë§Œë“¤ì—ˆëŠ”ê°€?
  - í¸ë¦¬í•¨
      + ğŸ’¡ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´ ServletContainerInitializer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ì½”ë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•¨
      + ì—¬ê¸°ì— ì¶”ê°€ë¡œ resources/META-INF/services/jakarta.servlet.ServletContainerInitializer íŒŒì¼ì— í•´ë‹¹ ì½”ë“œë¥¼ ì§ì ‘ ì§€ì •í•´ì¤˜ì•¼í•¨
      + ğŸ’¡ í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”ëŠ” íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë§Œ êµ¬í˜„í•˜ë©´ ë¨

  - ì˜ì¡´ì„±
      + ğŸ’¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”ëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ìƒê´€ì—†ì´ ì›í•˜ëŠ” ëª¨ì–‘ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ ìƒì„± ê°€ëŠ¥
      + ğŸ’¡ ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì½”ë“œê°€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ì˜ì¡´ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
      + íŠ¹íˆ, ServletContext ctxê°€ í•„ìš”ì—†ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì½”ë“œë¼ë©´ ì˜ì¡´ì„ ì™„ì „ ì œê±° ê°€ëŠ¥
    
