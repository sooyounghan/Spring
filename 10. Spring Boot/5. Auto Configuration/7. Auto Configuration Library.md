-----
### ìë™ êµ¬ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§Œë“¤ê¸°
-----
1. í”„ë¡œì íŠ¸ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€ë§Œ í•˜ë©´ ëª¨ë“  êµ¬ì„±ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ë„ë¡ í•  ê²ƒ
  - ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ ìŠ¤í”„ë§ ë¹ˆë“¤ì´ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ëŠ” ê²ƒ
2. ê¸°ì¡´ í”„ë¡œì íŠ¸ ìœ ì§€ë¥¼ ìœ„í•´ í”„ë¡œì íŠ¸ë¥¼ ë³µì‚¬í•˜ê³  ì¼ë¶€ ìˆ˜ì •
   - memory-v1 í”„ë¡œì íŠ¸ë¥¼ ë³µì‚¬í•´ì„œ memory-v2ë¡œ ìƒì„±
3. settings.gradle - ìˆ˜ì •
```gradle
rootProject.name = 'memory-v2' //v1 -> v2ë¡œ ìˆ˜ì •
```

3. ìë™ êµ¬ì„± ì¶”ê°€
   - MemoryAutoConfig
```java
package memory;

import org.springframework.boot.autoconfigure.AutoConfiguration;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.context.annotation.Bean;

@AutoConfiguration
@ConditionalOnProperty(name = "memory", havingValue = "on")
public class MemoryAutoConfig {
    @Bean
    public MemoryController memoryController() {
        return new MemoryController(memoryFinder());
    }

    @Bean
    public MemoryFinder memoryFinder() {
        return new MemoryFinder();
    }
}
```
  - @AutoConfiguration : ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” ìë™ êµ¬ì„± ê¸°ëŠ¥ì„ ì ìš©í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì• ë„ˆí…Œì´ì…˜
  - @ConditionalOnProperty(name = "memory", havingValue = "on")
    + memory=onì´ë¼ëŠ” í™˜ê²½ ì •ë³´ê°€ ìˆì„ ë•Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš© (ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡)
    + ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì§€ê³  ìˆë”ë¼ë„ ìƒí™©ì— ë”°ë¼ í•´ë‹¹ ê¸°ëŠ¥ì„ ì¼œê³  ëŒ ìˆ˜ ìˆê²Œ ìœ ì—°í•œ ê¸°ëŠ¥ ì œê³µ
    
4. ğŸ’¡ ìë™ êµ¬ì„± ëŒ€ìƒ ì§€ì •
  - ğŸ’¡ ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ êµ¬ì„±ì„ ì ìš©í•˜ë ¤ë©´, ë‹¤ìŒ íŒŒì¼ì— ìë™ êµ¬ì„± ëŒ€ìƒì„ ê¼­ ì§€ì •í•´ì¤˜ì•¼í•¨
  - ğŸ’¡ í´ë” ìœ„ì¹˜ì™€ íŒŒì¼ ì´ë¦„ì´ ê°™ìœ¼ë¯€ë¡œ ì£¼ì˜
  - íŒŒì¼ ìƒì„± (src/main/resources/META-INF/srping/)
    + org.springframework.boot.autoconfigure.AutoConfiguration.imports
  - org.springframework.boot.autoconfigure.AutoConfiguration.imports
    + memory.MemoryAutoConfig
  - ì•ì„œ ë§Œë“  ìë™ êµ¬ì„±ì¸ memory.MemoryAutoConfigë¥¼ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•´ì„œ ì§€ì •
  - ğŸ’¡ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì‹œì‘ ì‹œì ì— org.springframework.boot.autoconfigure.AutoConfiguration.importsì˜ ì •ë³´ë¥¼ ì½ì–´ì„œ ìë™ êµ¬ì„±ìœ¼ë¡œ ì‚¬ìš©
  - ğŸ’¡ ë”°ë¼ì„œ, ë‚´ë¶€ì— ìˆëŠ” MemoryAutoConfigê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰

5. ë¹Œë“œí•˜ê¸°
   - ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ë¹Œë“œ : ./gradlew clean build
   - ë¹Œë“œ ê²°ê³¼ : build/libs/memory-v2.jar

6. ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ êµ¬ì„± ê¸°ëŠ¥ì´ í¬í•¨ëœ memory-v2.jarë¥¼ ì´ì œ í”„ë¡œì íŠ¸ì— ì ìš©

-----
### ìë™ êµ¬ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•˜ê¸° 1
-----
1. ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì— ìë™ êµ¬ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš©
2. project-v2 - build.gradle
```gradle
plugins {
    id 'org.springframework.boot' version '3.0.2'
    id 'io.spring.dependency-management' version '1.1.0'
    id 'java'
}

group = 'hello'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '17'

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

tasks.named('test') {
    useJUnitPlatform()
}
```
  - ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ Lombok, Spring Web ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ íƒ

3. HelloController
```java
package hello;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {

    @GetMapping("/hello")
    public String hello() {
        return "hello";
    }
}
```

-----
### ìë™ êµ¬ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•˜ê¸° 2
-----
1. memory-v2.jar ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ project-v2ì— ì ìš©
2. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
   - project-v2/libs í´ë” ìƒì„±
   - memory-v2 í”„ë¡œì íŠ¸ì—ì„œ ë¹Œë“œí•œ memory-v2.jarë¥¼ ì´ê³³ì— ë³µì‚¬
   - project-v2/build.gradleì— memory-v2.jar ì¶”ê°€
```gradle
dependencies {
    implementation files('libs/memory-v2.jar') // ì¶”ê°€
    
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
```

  - ğŸ’¡ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ íŒŒì¼ë¡œ ì§ì ‘ ê°€ì§€ê³  ìˆìœ¼ë©´  filesë¡œ ì§€ì •
  - gradle ë¦¬ë¡œë“œ
  - ğŸ’¡ ì¶”ê°€í•œ í´ë” ì´ë¦„ : libs
  - ì§€ê¸ˆì²˜ëŸ¼ ë¡œì»¬ì— íŒŒì¼ë¡œ ì¶”ê°€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ IntelliJê°€ ì˜ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ë‹¤ì‹œ í”„ë¡œì íŠ¸ Import

3. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
   - project-v1ì—ì„œëŠ” memory-v1ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡
   - project-v2ì—ì„œ ì‚¬ìš©í•˜ëŠ” memory-v2 ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ êµ¬ì„±ì´ ì ìš©
     + ë”°ë¼ì„œ, ë¹ˆì„ ë“±ë¡í•˜ëŠ” ë³„ë„ì˜ ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ë¨
   - memory-v2 ìë™ êµ¬ì„±ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ memory=on ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œë§Œ ì‹¤í–‰
```java
@AutoConfiguration
@ConditionalOnProperty(name = "memory", havingValue = "on")
public class MemoryAutoConfig {
    @Bean
    public MemoryController memoryController() {
        return new MemoryController(memoryFinder());
    }

    @Bean
    public MemoryFinder memoryFinder() {
        return new MemoryFinder();
    }
}
```
   - memory=on ì¡°ê±´ ì¶”ê°€ í›„ ì‹¤í–‰
<div align="center">
<img src="https://github.com/user-attachments/assets/3d38479c-129f-4b2a-96ec-58332091f604">
</div>

  - VM ì˜µì…˜ì„ ì¶”ê°€í•˜ëŠ” ê²½ìš° : -Dmemory=on ì‚¬ìš©

  - ë™ì‘ í›„ ì„œë²„ ì‹¤í–‰ ë¡œê·¸
```
[           main] memory.MemoryFinder                      : init memoryFinder
```

  - ê²°ê³¼
```
{
    "used": 19307400,
    "max": 2111832064
}
```
  - memory=on ì¡°ê±´ì„ ë„ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥

-----
### ì •ë¦¬
-----
1. ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” ìë™ êµ¬ì„± ë•ì— ë³µì¡í•œ ë¹ˆ ë“±ë¡ì´ë‚˜ ì¶”ê°€ ì„¤ì • ì—†ì´ ë‹¨ìˆœí•˜ê²Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ë§Œìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ í¸ë¦¬í•˜ê²Œ êµ¬ì„± ê°€ëŠ¥
2. @ConditionalOnXxx ë•ë¶„ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •ì„ ìœ ì—°í•˜ê²Œ ì œê³µ ê°€ëŠ¥
3. ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ìˆ˜ ë§ì€ ìë™ êµ¬ì„± ì œê³µí•˜ëŠ”ë°, ì´ ë•ë¶„ì— ìŠ¤í”„ë§ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í¬í•¨í•´ì„œ ìˆ˜ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥
