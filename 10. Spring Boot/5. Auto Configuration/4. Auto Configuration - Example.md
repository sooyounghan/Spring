-----
### ìë™ êµ¬ì„± ì§ì ‘ ë§Œë“¤ê¸° - ê¸°ë°˜ ì˜ˆì œ
-----
1. ì‹¤ì‹œê°„ìœ¼ë¡œ ìë°” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì›¹ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ì˜ˆì œ
2. Memory (ê¸°ì¡´ê³¼ ì™„ì „íˆ ë‹¤ë¥¸ íŒ¨í‚¤ì§€, hello íŒ¨í‚¤ì§€ í•˜ìœ„ê°€ ì•„ë‹˜)
```java
package memory;

public class Memory {
    private long used;
    private long max;

    public Memory(Long used, long max) {
        this.used = used;
        this.max = max;
    }

    public long getUsed() {
        return used;
    }

    public long getMax() {
        return max;
    }

    @Override
    public String toString() {
        return "Memory{" +
                "used=" + used +
                ", max=" + max +
                '}';
    }
}
```
  - used : ì‚¬ìš©ì¤‘ì¸ ë©”ëª¨ë¦¬
  - max : ìµœëŒ€ ë©”ëª¨ë¦¬
  - ì¦‰, usedê°€ maxë¥¼ ë„˜ê²Œë˜ë©´ ë©”ëª¨ë¦¬ ë¶€ì¡± ì˜¤ë¥˜ ë°œìƒ
    
3. MemoryFinder
```java
package memory;

import jakarta.annotation.PostConstruct;
import lombok.extern.slf4j.Slf4j;

@Slf4j
public class MemoryFinder {

    public Memory get() {
        long max = Runtime.getRuntime().maxMemory();
        long total = Runtime.getRuntime().totalMemory();
        long free = Runtime.getRuntime().freeMemory();

        long used = total - free;
        return new Memory(used, max);
    }

    @PostConstruct
    public void init() {
        log.info("init memoryFinder");
    }
}
```
  - JVMì—ì„œ ë©”ëª¨ë¦¬ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥
  - max : JVMì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë©”ëª¨ë¦¬, ì´ ìˆ˜ì¹˜ë¥¼ ë„˜ì–´ê°€ë©´ OOM ë°œìƒ
  - total : JVMì´ í™•ë³´í•œ ì „ì²´ ë©”ëª¨ë¦¬ (ğŸ’¡ JVMì€ ì²˜ìŒë¶€í„° maxê¹Œì§€ ë‹¤ í™•ë³´í•˜ì§€ ì•Šê³ , í•„ìš”í•  ë•Œë§ˆë‹¤ ì¡°ê¸ˆì”© í™•ë³´)
  - free : total ì¤‘ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ (JVMì´ í™•ë³´í•œ ì „ì²´ ë©”ëª¨ë¦¬ ì¤‘ì— ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²ƒ)
  - used : JVMì´ ì‚¬ìš© ì¤‘ì¸ ë©”ëª¨ë¦¬ (used = total - free)
    
4. MemoryController
```java
package memory;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@Slf4j
@RestController
@RequiredArgsConstructor
public class MemoryController {

    private final MemoryFinder memoryFinder;

    @GetMapping("/memory")
    public Memory system() {
        Memory memory = new MemoryFinder().get();
        log.info("memory = {}", memory);
        return memory;
    }
}
```
   - ë©”ëª¨ë¦¬ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
   - memoryFinderë¥¼ ì£¼ì… ë°›ì•„ ì‚¬ìš©

5. MemoryConfig
```java
package hello.config;

import memory.MemoryController;
import memory.MemoryFinder;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class MemoryConfig {

    @Bean
    public MemoryController memoryController() {
        return new MemoryController(memoryFinder());
    }

    @Bean
    public MemoryFinder memoryFinder() {
        return new MemoryFinder();
    }
}
```
  - memoryController, memoryFinder ë¹ˆìœ¼ë¡œ ë“±ë¡
  - ğŸ’¡ íŒ¨í‚¤ì§€ ìœ„ì¹˜ : hello.config

6. ê²°ê³¼
```
{
    "used": 30755216,
    "max": 2111832064
}
```

7. íŒ¨í‚¤ì§€ ìœ„ì¹˜
   - memoryëŠ” ì™„ì „íˆ ë³„ë„ì˜ ëª¨ë“ˆ
   - helloì—ì„œ memoryì˜ ê¸°ëŠ¥ì„ ë¶ˆëŸ¬ë‹¤ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í•˜ë©´ ë˜ë¯€ë¡œ, íŒ¨í‚¤ì§€ë¥¼ ë‚˜ëˆ”
