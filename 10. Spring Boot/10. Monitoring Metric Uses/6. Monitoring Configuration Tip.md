-----
### 실무 모니터링 환경 구성 팁
-----
1. 💡 모니터링 3단계
   - 💡💡💡 대시보드
   - 💡💡💡 애플리케이션 추적 - 핀포인트
   - 💡 로그

2. 💡 대시보드 : 전체를 한 눈에 볼 수 있는 가장 높은 뷰
   - 제품 : 마이크로미터, 프로메테우스, 그라파나 등
   - 💡 모니터링 대상 : 시스템 매트릭(CPU, 메모리) / 애플리케이션 메트릭(톰캣 쓰레드 풀, DB 커넥션 풀, 애플리케이션 호출 수) / 비즈니스 메트릭(주문 수, 취소 수)

3. 💡 애플리케이션 추적 : 주로 각각의 HTTP 요청 추적, 일부는 마이크로서비스 환경에서 분산 추적
   - 제품 : 💡 핀포인트(오픈소스), 스카우트(오픈소스), 와탭(상용), 제니퍼(상용)
     + https://github.com/pinpoint-apm/pinpoint

4. 💡 로그 : 가장 자세한 추적, 원하는 대로 커스텀 가능
   - 💡💡💡 같은 HTTP 요청을 묶어서 확인할 수 있는 방법 중요 (MDC(Mapped Diagnostic Context) 적용)
     + 💡 MDC (Mapped Diagnostic Context)
       * 💡 멀티 클라이언트 환경에서 다른 클라이언트와 값을 구별하여 로그를 추적할 수 있도록 제공되는 MAP
       * 💡 ThreadLocal을 통해 구별할 수 있는 키 값을 저장하여 Thread가 살아있는 동안 해당 키 값 활용
       * 사실상 쓰레드안에서 공유되는 Map을 할당하여 사용하는 개념
   - 💡 파일로 직접 로그를 남기는 경우
     + 💡 일반 로그와 에러 로그는 파일로 구분해서 남길 것
     + 💡 에러 로그만 확인해서 문제 바로 정리 가능
   - 클라우드에 로그를 저장하는 경우
     + 검색이 잘 되도록 구분

5. 모니터링 정리
   - 각 용도가 다름
   - 💡 관찰을 할 때는 전체에서 점점 좁게 할 것
   - 💡 핀포인트는 정말 좋음 (💡 마이크로 서비스 분산 모니터링도 가능, 대용량 트래픽에 대응 가능)

6. 알람
   - 모니터링 틀에서 일정 이상 수치가 넘어가면, 슬랙 / 문자 등을 연동
   - 💡 알람은 꼭 2가지 종류로 구분해서 관리 : 경고, 심각
     + 💡 경고 : 하루 1번 정도 사람이 직접 확인해도 되는 수준 (사람이 들어가서 확인)
     + 💡 심각 : 즉시 확인해야 함. 슬랙 알림 활용 (앱을 통해 알림을 받도록) 또는 문자, 전화
   - 예시
     + 디스크 사용량 70% : 경고
     + 디스크 사용량 80% : 심각
     + CPU 사용량 40% : 경고
     + CPU 사용량 50% : 심각
   - 경고와 심각을 잘 나누어서 업무와 삶에 방해가 되지 않도록 해야 함
   - 그리고 거짓(False) 알람은 바로바로 처리
