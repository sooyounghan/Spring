-----
### ê·¸ë¼íŒŒë‚˜ - ë©”íŠ¸ë¦­ì„ í†µí•œ ë¬¸ì œ í™•ì¸
-----
1. ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ, ê·¸ë¼íŒŒë‚˜ë¥¼ í†µí•´ ì–´ë–»ê²Œ ëª¨ë‹ˆí„°ë§ í•˜ëŠ”ì§€ í™•ì¸
2. ğŸ’¡ ì‹¤ë¬´ì—ì„œ ì£¼ë¡œ ë°œìƒí•˜ëŠ” 4ê°€ì§€ ëŒ€í‘œì ì¸ ì˜ˆì‹œ
   - CPU ì‚¬ìš©ëŸ‰ ì´ˆê³¼
   - JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì´ˆê³¼
   - ì»¤ë„¥ì…˜ í’€ ê³ ê°ˆ
   - ì—ëŸ¬ ë¡œê·¸ ê¸‰ì¦

3. CPU ì‚¬ìš©ëŸ‰ ì´ˆê³¼
   - CPUì— ê°„ë‹¨íˆ ë¶€í•˜ë¥¼ ì£¼ëŠ” ì½”ë“œ : TrafficController - cpu() ì¶”ê°€
```java
package hello.controller;

import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.GetMapping;

@Slf4j
@RestController
public class TrafficController {

    @GetMapping("/cpu")
    public String cpu() {
        log.info("cpu");

        long value = 0;

        for(long i = 0; i < 1000000000L; i++) {
            value++;
        }

        return "OK VALUE = " + value;
    }
}
```
  - ì»´í“¨í„° ì„±ëŠ¥ì— ë”°ë¼ ë£¨í”„ íšŸìˆ˜ ë³€ê²½ í•„ìš”

  - ê²°ê³¼ : ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•˜ë©´ CPU ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥
    + ìš”ì²­ í•˜ë‚˜ë‹¹ ì½”ì–´ í•˜ë‚˜ë¥¼ 100% ì‚¬ìš©í•  ê²ƒì´ë©°, ë” ë§ì´ ìš”ì²­í•˜ë©´ ë” ë§ì€ CPU ì‚¬ìš©

4. JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì´ˆê³¼
   - ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ëˆ„ì í•˜ëŠ” ì½”ë“œ ì¶”ê°€ : TrafficController - jvm() ì¶”ê°€
```java
private List<String> list = new ArrayList<>();

@GetMapping("/jvm")
public String jvm() {
    log.info("jvm");

    for(int i = 0; i < 10000000; i++) {
        list.add("hello jvm! " + i);
    }

    return "OK!";
}
```
  - ë¦¬ìŠ¤íŠ¸ì— ë¬¸ìë¥¼ ê²Œì† ì¶”ê°€
  - ì—¬ëŸ¬ ë²ˆ ìš”ì²­í•˜ê³  JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
  - ê²°ê³¼
    + ê³„ì† ìš”ì²­í•˜ë©´ì„œ ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•´ë³´ë©´ JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ê³„ì† ì¦ê°€í•˜ë‹¤ê°€ ìµœëŒ€ì¹˜ë¥¼ ë„˜ëŠ” ìˆœê°„ ë©”íŠ¸ë¦­ì´ ì¡íˆì§€ ì•ŠìŒ
    + JVM ë‚´ë¶€ì—ì„œ OOM ë°œìƒí–ˆê¸° ë•Œë¬¸ì„
    + ê¸°ë‹¤ë ¤ë³´ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ ë°œìƒ : java.lang.OutOfMemoryError: Java heap space

5. ì»¤ë„¥ì…˜ í’€ ê³ ê°ˆ
   - TrafficController - jdbc() ì¶”ê°€
```java
import javax.sql.DataSource;

@Autowired DataSource dataSource;

@GetMapping("/jdbc")
public String jdbc() throws SQLException {
    log.info("jdbc");

    Connection conn = dataSource.getConnection();
    log.info("connection info={}", conn);
    // conn.close(); // ì»¤ë„¥ì…˜ì„ ë‹«ì§€ ì•ŠìŒ
    return "OK";
}
```
  - 10ë²ˆ ì´ìƒ ì‹¤í–‰
  - ê²°ê³¼
    + Active ì»¤ë„¥ì…˜ì´ ì»¤ë„¥ì…˜ í’€ì˜ ìµœëŒ€ ìˆ«ìì¸ 10ê°œë¥¼ ë„˜ì–´ê°€ê¸° ìœ„í•´, ì»¤ë„¥ì…˜ì„ íšë“í•˜ê¸° ìœ„í•´ ëŒ€ê¸°(Pending)í•˜ê²Œ ë¨
    + ê·¸ë˜ì„œ ì»¤ë„¥ì…˜ íšë“ ë¶€ë¶„ì—ì„œ ì“°ë ˆë“œê°€ ëŒ€ê¸°í•˜ê²Œ ë˜ê³  ê²°ê³¼ì ìœ¼ë¡œ HTTP ìš”ì²­ì„ ì‘ë‹µí•˜ì§€ ëª»í•¨
    + DB ì»¤ë„¥ì…˜ì„ íšë“í•˜ê¸° ìœ„í•´ ëŒ€ê¸°í•˜ë˜ í†°ìº£ ì“°ë ˆë“œê°€ 30ì´ˆ ì´ìƒ DB ì»¤ë„¥ì…˜ì„ íšë“í•˜ì§€ ëª»í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜ˆì™¸ ë°œìƒ
      * Connection is not available, request timed out after 30004ms.

6. ì—ëŸ¬ ë¡œê·¸ ê¸‰ì¦
   - ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ERROR ë ˆë²¨ ë¡œê·¸ê°€ ê¸‰ì¦í•œë‹¤ë©´ ì‹¬ê°í•œ ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆìŒ
   - TrafficController - errorLog() ì¶”ê°€
```java
@GetMapping("/error")
public String error() {
     log.error("error log");
     return "error";
}
```
  - ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰
  - ERROR Log, logback_events_total ë©”íŠ¸ë¦­ì—ì„œ ERROR ë¡œê·¸ê°€ ê¸‰ì¦í•˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥

7. ì •ë¦¬ : ë©”íŠ¸ë¦­ì„ ë³´ëŠ” ê²ƒì€ ì •í™•í•œ ê°’ì„ ë³´ëŠ” ê²ƒì´ ëª©ì ì´ ì•„ë‹Œ, ëŒ€ëµì ì¸ ê°’ê³¼ ì¶”ì„¸ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì£¼ëª©ì 
