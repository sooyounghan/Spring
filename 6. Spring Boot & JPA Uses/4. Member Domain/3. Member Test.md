-----
### íšŒì› ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
-----
1. í…ŒìŠ¤íŠ¸ ìš”êµ¬ì‚¬í•­
   - íšŒì›ê°€ì…ì„ ì„±ê³µí•´ì•¼ í•¨
   - íšŒì›ê°€ì… í•  ë•Œ, ê°™ì€ ì´ë¦„ì´ ìˆìœ¼ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•¨

2. íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸ ì½”ë“œ
```java
package jpabook.jpashop.service;

import jpabook.jpashop.domain.Member;
import jpabook.jpashop.repository.MemberRepository;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.transaction.annotation.Transactional;

import static org.junit.Assert.*;

@RunWith(SpringRunner.class)
@SpringBootTest
@Transactional
public class MemberServiceTest {

    @Autowired MemberService memberService;
    @Autowired MemberRepository memberRepository;
    // @Autowired EntityManager em;

    @Test
    // @Rollback(false)
    public void íšŒì›ê°€ì…() throws Exception {
        // given
        Member member = new Member();
        member.setName("kim");

        // when
        Long saveId = memberService.join(member);

        // then
        // em.flush(); // INSERT SQL ì „ì†¡ (í™•ì¸ìš©) [ë˜ëŠ” @Rollback(false) ì• ë„ˆí…Œì´ì…˜ ì¶”ê°€]
        assertEquals(member, memberRepository.findOne(saveId));

    }

    @Test(expected = IllegalStateException.class) 
    public void ì¤‘ë³µ_íšŒì›_ì˜ˆì™¸() throws Exception {
        // given
        Member member1 = new Member();
        member1.setName("kim");

        Member member2 = new Member();
        member2.setName("kim");

        // when
        memberService.join(member1);
        memberService.join(member2); // ì˜ˆì™¸ ë°œìƒ

        // then
        fail("ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•œë‹¤."); // ì½”ë“œê°€ í•´ë‹¹ ì§€ì ì— ë„ë‹¬í•˜ì˜€ì„ ë•Œ, ì˜ˆì™¸ ë©”ì„¸ì§€ ì¶œë ¥
    }
}
```

2. ê¸°ìˆ  ì„¤ëª…
   - @Runwith(SpringRunner.class) : ìŠ¤í”„ë§ê³¼ í…ŒìŠ¤íŠ¸ í†µí•©
   - ğŸ’¡ @SpringBootTest : ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ë„ìš°ê³  í…ŒìŠ¤íŠ¸ (ì—†ë‹¤ë©´, @Autowired ëª¨ë‘ ì‹¤íŒ¨)
   - ğŸ’¡ğŸ’¡ğŸ’¡ @Transactional
     + ë°˜ë³µ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ì§€ì›
     + ğŸ’¡ğŸ’¡ğŸ’¡ ê° í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³ , í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ë©´ íŠ¸ëœì­ì…˜ ê°•ì œ ë¡¤ë°± (í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì—ì„œë§Œ ì‚¬ìš©ë  ë•Œë§Œ ë¡¤ë°±)

3. ê¸°ëŠ¥ ì„¤ëª…
   - íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸
   - ì¤‘ë³µ íšŒì› ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

4. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± (Given, When, Then)
  - http://martinfowler.com/bliki/GivenWhenThen.html
  - ì´ ë°©ë²•ì„ ê¸°ë³¸ìœ¼ë¡œ ë‹¤ì–‘í•˜ê²Œ ì‘ìš©í•˜ëŠ” ê²ƒ ê¶Œì¥

5. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ìœ„í•œ ì„¤ì •
   - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ê²©ë¦¬ëœ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ê³ , ëë‚˜ë©´ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ
   - ğŸ’¡ ê·¸ëŸ° ë©´ì—ì„œ ë©”ëª¨ë¦¬ DBë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì´ìƒì 
   - ğŸ’¡ ì¶”ê°€ë¡œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ìœ„í•œ ìŠ¤í”„ë§ í™˜ê²½ê³¼, ì¼ë°˜ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì„ ë³´í†µ ë‹¤ë¥´ë¯€ë¡œ ì„¤ì • íŒŒì¼ì„ ë‹¤ë¥´ê²Œ ì‚¬ìš©
   - ì¦‰, í…ŒìŠ¤íŠ¸ìš© ì„¤ì • íŒŒì¼ì„ ì¶”ê°€í•˜ë©´ ë¨
   - test/resources/application.properties
```properties
spring.application.name=jpashop

server.port=9090
spring.output.ansi.enabled=ALWAYS

# spring.datasource.url=jdbc:h2:tcp://localhost/~/jpashop
# spring.datasource.username=sa
# spring.datasource.password=

# spring.jpa.hibernate.ddl-auto=create
spring.jpa.properties.hibernate.show_sql=false
spring.jpa.properties.hibernate.format_sql=true

logging.level.org.hibernate.SQL=debug
logging.level.org.springframework.orm.jpa.JpaTransactionManager=DEBUG
logging.level.org.hibernate.resource.transaction=DEBUG

# logging.level.org.hibernate.type=trace # ìŠ¤í”„ë§ ë¶€íŠ¸ 2.x / Hibernate 5
logging.level.org.hibernate.orm.jdbc.bind=trace
```

  - test/resources/application.yml
```yml
spring:
#  datasource:
#    url: jdbc:h2:mem:testdb
#    username: sa
#    password:
#    driver-class-name: org.h2.Driver
#  jpa:
#    hibernate:
#      ddl-auto: create
#    properties:
#      hibernate:
#        show_sql: true
#        format_sql: true 
#    open-in-view: false

logging.level:
org.hibernate.SQL: debug 
#  org.hibernate.type: trace
```
  - í…ŒìŠ¤íŠ¸ì—ì„œ ìŠ¤í”„ë§ì„ ì‹¤í–‰í•˜ë©´ ì´ ìœ„ì¹˜ì— ìˆëŠ” ì„¤ì • íŒŒì¼ì„ ì½ìŒ
  - ì´ ìœ„ì¹˜ì— ì—†ë‹¤ë©´ src/resources/application.ymlì„ ì½ìŒ

6. ğŸ’¡ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” dataSource ì„¤ì •ì´ ì—†ìœ¼ë©´, ê¸°ë³¸ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ DBë¥¼ ì‚¬ìš©
   - ğŸ’¡ Driver-Classë„ í˜„ì¬ ë“±ë¡ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë³´ê³  ì°¾ìŒ
   - ğŸ’¡ ì¶”ê°€ë¡œ, ddl-autoë„ create-drop ëª¨ë“œë¡œ ë™ì‘
   - ë”°ë¼ì„œ, ë°ì´í„°ì†ŒìŠ¤ë‚˜, JPA ê´€ë ¨ëœ ë³„ë„ ì¶”ê°€ ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ë¨
