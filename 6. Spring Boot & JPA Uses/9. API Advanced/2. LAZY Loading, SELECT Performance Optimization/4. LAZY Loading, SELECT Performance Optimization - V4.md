-----
### ê°„ë‹¨í•œ ì£¼ë¬¸ ì¡°íšŒ V4 : JPAì—ì„œ DTOë¡œ ë°”ë¡œ ì¡°íšŒ
-----
1. OrderSimpleApiController - ì¶”ê°€
```java
private final OrderSimpleQueryRepository orderSimpleQueryRepository;

...

/**
 * V4 : JPAì—ì„œ DTOë¡œ ë°”ë¡œ ì¡°íšŒ
 *   - ì¿¼ë¦¬ 1ë²ˆ ì¡°íšŒ
 *   - SELECT ì ˆì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë§Œ ì„ íƒí•´ì„œ ì¡°íšŒ
 */
@GetMapping("/api/v4/simple-orders")
public List<OrderSimpleQueryDto> ordersV4() {
    return orderSimpleQueryRepository.findOrderDtos();
}
```

2. OrderSimpleQueryRepository - ì¡°íšŒ ì „ìš© ë ˆí¬ì§€í† ë¦¬
```java
package jpabook.jpashop.repository.order.simplequery;

import jakarta.persistence.EntityManager;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
@RequiredArgsConstructor
public class OrderSimpleQueryRepository {

    private final EntityManager em;

    public List<OrderSimpleQueryDto> findOrderDtos() {
        return em.createQuery("SELECT new jpabook.jpashop.repository.order.simplequery.OrderSimpleQueryDto(o.id, m.name, o.orderDate, o.status, d.address) "
                        + "FROM Order o "
                        + "JOIN o.member m "
                        + "JOIN o.delivery d", OrderSimpleQueryDto.class)
                .getResultList();
    }
}
```
  - V3 : ì„±ëŠ¥ì€ V4ë³´ë‹¤ ë–¨ì–´ì§€ë‚˜ ì¬ì‚¬ìš©ì„±ì´ ì¢‹ìŒ (Entity)
  - V4 : ì„±ëŠ¥ì€ V3ë³´ë‹¤ ì¢‹ìœ¼ë‚˜ ì¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§ (DTO)

3. OrderSimpleQueryDto - ë ˆí¬ì§€í† ë¦¬ì—ì„œ DTO ì§ì ‘ ì¡°íšŒ
```java
package jpabook.jpashop.repository;

import jpabook.jpashop.domain.Address;
import jpabook.jpashop.domain.OrderStatus;
import lombok.Data;

import java.time.LocalDateTime;

@Data
public class OrderSimpleQueryDto {

    private Long orderId;
    private String name;
    private LocalDateTime orderDate; // ì£¼ë¬¸ ì‹œê°„
    private OrderStatus orderStatus;
    private Address address;

    public OrderSimpleQueryDto(Long orderId, String name, LocalDateTime orderDate, OrderStatus orderStatus, Address address) {
        this.orderId = orderId;
        this.name = name;
        this.orderDate = orderDate;
        this.orderStatus = orderStatus;
        this.address = address;
    }
}
```
  - ì¼ë°˜ì ì¸ SQLì„ ì‚¬ìš©í•  ë•Œ ì²˜ëŸ¼ ì›í•˜ëŠ” ê°’ì„ ì„ íƒí•´ì„œ ì¡°íšŒ
  - ğŸ’¡ new ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ JPQL ê²°ê³¼ë¥¼ DTOë¡œ ì¦‰ì‹œ ë°˜í™˜
  - ğŸ’¡ SELECT ì ˆì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì§ì ‘ ì„ íƒí•˜ë¯€ë¡œ DB â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ë„¤íŠ¸ì›Œí¬ ìš©ëŸ‰ ìµœì í™” (ìƒê°ë³´ë‹¤ ë¯¸ë¹„í•¨)
  - ğŸ’¡ ë ˆí¬ì§€í† ë¦¬ ì¬ì‚¬ìš©ì„± ë–¨ì–´ì§€ë©°, API ìŠ¤í™ì— ë§ì¶˜ ì½”ë“œê°€ ë ˆí¬ì§€í† ë¦¬ì— ë“¤ì–´ê°€ëŠ” ë‹¨ì 

-----
### ì •ë¦¬
-----
1. ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜í•˜ê±°ë‚˜, DTOë¡œ ë°”ë¡œ ì¡°íšŒí•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²• ëª¨ë‘ ê°ê° ì¥ë‹¨ì  ì¡´ì¬
2. ë‘˜ ì¤‘ ìƒí™©ì— ë”°ë¼ ë” ë‚˜ì€ ë°©ë²• ì„ íƒí•  ê²ƒ
3. ğŸ’¡ ì—”í‹°í‹°ë¡œ ì¡°íšŒí•˜ë©´ ë ˆí¬ì§€í† ë¦¬ ì¬ì‚¬ìš©ì„±ë„ ì¢‹ê³ , ê°œë°œë„ ë‹¨ìˆœ
4. ğŸ’¡ğŸ’¡ğŸ’¡ ë”°ë¼ì„œ ê¶Œì¥í•˜ëŠ” ë°©ë²• (ì¿¼ë¦¬ ë°©ì‹ ì„ íƒ ê¶Œì¥ ìˆœì„œ)
  - ìš°ì„  ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²• ì„ íƒ
  - í•„ìš”í•˜ë©´ í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™” â†’ ëŒ€ë¶€ë¶„ ì„±ëŠ¥ ì´ìŠˆ í•´ê²°
  - ê·¸ë˜ë„ ì•ˆë˜ë©´ DTOë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ë°©ë²• ì‚¬ìš©
  - ìµœí›„ì˜ ë°©ë²•ì€ JPAê°€ ì œê³µí•˜ëŠ” ë„¤ì´í‹°ë¸Œ SQLì´ë‚˜ ìŠ¤í”„ë§ JDBC Templateì„ ì‚¬ìš©í•´ SQL ì§ì ‘ ì‚¬ìš©
