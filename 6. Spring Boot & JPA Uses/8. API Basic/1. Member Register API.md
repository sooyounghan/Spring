-----
### íšŒì› ë“±ë¡ API
-----
1. V1 : ì—”í‹°í‹°ë¥¼ Request Bodyì— ì§ì ‘ ë§¤í•‘
```java
package jpabook.jpashop.api;

import jakarta.validation.Valid;
import jpabook.jpashop.domain.Member;
import jpabook.jpashop.service.MemberService;
import lombok.Data;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequiredArgsConstructor
public class MemberApiController {
    private final MemberService memberService;

    /**
     * - ë“±ë¡ V1 : ìš”ì²­ ê°’ìœ¼ë¡œ Member ì—”í‹°í‹°ë¥¼ ì§ì ‘ ë°›ìŒ
     * - ë¬¸ì œì 
     *   1. ì—”í‹°í‹°ì— í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µì„ ìœ„í•œ ë¡œì§ ì¶”ê°€
     *   2. ì—”í‹°í‹°ì— API ê²€ì¦ì„ ìœ„í•œ ë¡œì§ì´ ë“¤ì–´ê° (@NotEmpty)
     *   3. ì‹¤ë¬´ì—ì„œëŠ” íšŒì› ì—”í‹°í‹°ë¥¼ ìœ„í•œ APIê°€ ë‹¤ì–‘í•˜ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ë°, í•œ ì—”í‹°í‹°ì— ê° APIë¥¼ ìœ„í•œ ëª¨ë“  ìš”ì²­ ìš”êµ¬ì‚¬í•­ì„ ë‹´ê¸°ëŠ” ì–´ë ¤ì›€
     *   4. ì—”í‹°í‹°ê°€ ë³€ê²½ë˜ë©´ API ìŠ¤í™ì´ ë³€í•¨
     *   
     * - ê²°ë¡ 
     *  : API ìš”ì²­ ìŠ¤í™ì— ë§ì¶”ì–´ ë³„ë„ì˜ DTOë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ
     */
    @PostMapping("/api/v1/members")
    public CreateMemberResponse saveMember(@RequestBody @Valid Member member) {
        Long id = memberService.join(member);

        return new CreateMemberResponse(id);
    }

    @Data
    static class CreateMemberResponse {
        private Long id;

        public CreateMemberResponse(Long id) {
            this.id = id;
        }
    }
}
```

   - ë¬¸ì œì 
     + ì—”í‹°í‹°ì— í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µì„ ìœ„í•œ ë¡œì§ ì¶”ê°€
     + ì—”í‹°í‹°ì— API ê²€ì¦ì„ ìœ„í•œ ë¡œì§ ë“¤ì–´ê° (@NotEmpty)
     + ì‹¤ë¬´ì—ì„œëŠ” íšŒì› ì—”í‹°í‹°ë¥¼ ìœ„í•œ APIê°€ ë‹¤ì–‘í•˜ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ë°, í•œ ì—”í‹°í‹°ì— ê° APIë¥¼ ìœ„í•œ ëª¨ë“  ìš”ì²­ ìš”êµ¬ì‚¬í•­ì„ ë‹´ê¸° ì–´ë ¤ì›€
     + ì—”í‹°í‹°ê°€ ë³€ê²½ë˜ë©´ API ìŠ¤í™ì´ ë³€í•¨

   - ê²°ë¡ 
     + API ìš”ì²­ ìŠ¤í™ì— ë§ì¶”ì–´ ë³„ë„ì˜ DTOë¥¼ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ìŒ

   - Postman (POST http://localhost:9090/api/v1/members)
```json
{
    "name": "hello"
}
```
   - ì‘ë‹µ
```json
{
    "id": 1
}
```
  - ë¡œê·¸ ê¸°ë¡
```
insert into member (city,street,zipcode,name,member_id) values (?,?,?,?,?)
insert into member (city,street,zipcode,name,member_id) values (NULL,NULL,NULL,'hello',1);
```

2. V2 : ì—”í‹°í‹° ëŒ€ì‹  DTOë¥¼ RequestBodyì— ë§¤í•‘
```java
package jpabook.jpashop.api;

import jakarta.validation.Valid;
import jpabook.jpashop.domain.Member;
import jpabook.jpashop.service.MemberService;
import lombok.Data;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequiredArgsConstructor
public class MemberApiController {
    private final MemberService memberService;

    ...

    /**
     * ë“±ë¡ V2 : ìš”ì²­ ê°’ìœ¼ë¡œ Member ì—”í‹°í‹° ëŒ€ì‹  ë³„ë„ì˜ DTOë¥¼ ë°›ìŒ
     */
    @PostMapping("/api/v2/members")
    public CreateMemberResponse saveMemberV2(@RequestBody @Valid CreateMemberRequest request) {
        Member member = new Member();
        member.setName(request.getName());

        Long id = memberService.join(member);
        return new CreateMemberResponse(id);
    }

    @Data
    static class CreateMemberRequest {
        @NotEmpty
        private String name;
    }

    @Data
    static class CreateMemberResponse {
        private Long id;

        public CreateMemberResponse(Long id) {
            this.id = id;
        }
    }
}
```
  - CreateMemberRequestë¥¼ Member ì—”í‹°í‹° ëŒ€ì‹  RequestBodyì™€ ë§¤í•‘
  - ì—”í‹°í‹°ì™€ í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µì„ ìœ„í•œ ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŒ
  - ì—”í‹°í‹°ì™€ API ìŠ¤í™ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ ê°€ëŠ¥
  - ì—”í‹°í‹°ê°€ ë³€í•´ë„ API ìŠ¤í™ì´ ë³€í•˜ì§€ ì•ŠìŒ
  - ğŸ’¡ ì°¸ê³  : ì‹¤ë¬´ì—ì„œëŠ” ì—”í‹°í‹°ë¥¼ API ìŠ¤í™ì— ë…¸ì¶œí•˜ë©´ ì•ˆ ë¨!
  - Postman
```json
{
    "name": "hello"
}
```
  - ê²°ê³¼
```json
{
    "id": 1
}
```
  - ë¡œê·¸ ê¸°ë¡
```
insert into member (city,street,zipcode,name,member_id) values (?,?,?,?,?)
insert into member (city,street,zipcode,name,member_id) values (NULL,NULL,NULL,'hello',1);
```
