-----
### 도메인 모델과 테이블 설계
-----
1. 도메인 모델과 테이블 설계
<div align="center">
<img src="https://github.com/user-attachments/assets/ee17b0d2-188f-41cd-92cf-22f96371ac05">
</div>  

  - 회원, 주문, 상품의 관계
    + 회원은 여러 상품 주문 가능
    + 💡 그리고 한 번 주문할 때, 여러 상품을 선택할 수 있으므로 주문과 상품은 다대다 관계
    + 💡 하지만, 이런 다대다 관계는 관계형 데이터베이스는 물론, 엔티티에서도 거의 사용하지 않음
    + 💡 따라서, 주문상품이라는 엔티티를 추가해서 다대다 관계를 일대다, 다대일 관계로 풀어냄

  - 상품 분류
    + 상품은 도서, 음반, 영화로 구분
    + 상품이라는 공통 속성을 사용하므로 상속 구조로 표현

2. 회원 엔티티 분석
<div align="center">
<img src="https://github.com/user-attachments/assets/91782666-d68b-41b1-94a1-df24a843b9bc">
</div>  

  - 회원(Member)
    + 이름과 임베디드 타입인 주소(Address)
    + 주문(orders) 리스트를 가짐

  - 주문(Order)
    + 한 번 주문 시 여러 상품을 주문할 수 있으므로 주문과 주문 상품(OrderItem)은 일대다 관계
    + 주문은 상품을 주문한 회원과 배송 정보, 주문 날짜, 주문 상태(status)를 가지고 있음
    + 주문 상태는 열거형을 사용했는데, 주문(ORDER), 취소(CANCEL)를 표현할 수 있음

  - 주문상품(OrderItem)
    + 주문한 상품 정보와 주문 금액(orderPrice), 주문 수량(count) 정보를 가지고 있음
    + 보통 OrderLine, LineItem으로 많이 표현

  - 상품(Item)
    + 이름, 가격, 재고수량(stockQuantity)을 가지고 있음
    + 상품을 주문하면 재고수량이 줄어듬
    + 상품의 종류로는 도서, 음반, 영화가 있는데, 각 사용하는 속성은 조금씩 다름

  - 배송(Delivery)
    + 주문 시 하나의 배송 정보를 생성
    + 주문과 배송은 일대일 관계

  - 카테고리(Category)
    + 상품과 다대다 관계를 맺음
    + parent, child로 부모, 자식 카테 고리를 연결
   
  - 주소(Address)
    + 값 타입(임베디드 타입)
    + 회원과 배송(Delivery)에서 사용

  - 💡 회원이 주문을 하므로, 회원이 주문리스트를 가지는 것이 잘 설계한 것 같지만, 실무에서는 회원이 주문을 참조하지 않고, 주문이 회원을 참조하는 것으로 충분

3. 회원 테이블 분석
<div align="center">
<img src="https://github.com/user-attachments/assets/4391efd3-37cb-428a-8f63-7b97567ad761">
</div>  

  - Member : 회원 엔티티의 Address 임베디드 타입 정보가 회원 테이블에 그대로 들어감 (DELIVERY 테이블도 동일)
  - 💡 ITEM : 앨범, 도서, 영화 타입을 통합해서 하나의 테이블(싱글 테이브 전략 사용) 로 만들었으며, DTYPE 컬럼으로 타입 구분
  - 참고 : 테이블명이 ORDER가 아니라 ORDERS인 것은 데이터베이스가 order by 때문에 예약어로 잡고 있는 경우가 많아 관례상 사용
  - 참고 : 실제 코드에서는 DB에 소문자 + _(언더스코어) 스타일 사용
    + 데이터베이스 테이블명, 컬럼명에 대한 관례는 회사마다 다름
    + 보통은 대문자 + _(언더스코어)나 소문자 + _(언더스코어) 방식 중 하나를 지정해 일관성 있게 사용
    + 객체와 차이를 나타내기 위해 데이터베이스 테이블, 컬럼명은 대문자를 사용했지만, 실제 코드는 소문자 + _ (언더스코어) 스타일 사용

4. 연관관계 매핑 분석
   - 회원과 주문
     + 일대다, 다대일 양방향 관계
     + 💡 따라서, 연관관계의 주인에 대해서는 외래 키가 있는 주문을 연관 관계의 주인으로 정하는 것이 좋음
     + 그러므로 Order.member를 ORDERS.MEMBER_ID 외래 키와 매핑

   - 주문상품과 주문
     + 다대일 양방향 관계
     + 💡 외래 키가 주문 상품에 있으므로 주문 상품이 연관관계의 주인
     + OrderItem.order를 ORDER_ITEM.ORDER_ID 외래키와 매핑

   - 주문상품과 상품
     + 💡 다대일 단방향 관계
     + OrderItem.item을 ORDER_ITEM.ITEM_ID 외래 키와 매핑

   - 주문과 배송
     + 일대일 양방향 관계
     + Order.delivery를 ORDERS.DELIVERY_ID 외래 키와 매핑

   - 카테고리와 상품
     + @ManyToMany를 사용해서 매핑 (여기서 다대다 관계를 보여주기 위해 사용)

   - 💡💡💡 참고 : 외래 키가 있는 곳을 연관관계의 주인으로 설정
     + 💡 연관관계의 주인은 단순히 외래 키를 누가 관리하냐의 문제이지, 비즈니스 상 우위에 있다고 주인으로 정하면 안 됨
     + 예를 들어, 자동차와 바퀴가 있다면, 💡 일대다 관계에서 항상 다쪽에 외래 키가 있으므로 외래 키가 있는 바퀴를 연관관계의 주인으로 정하면 됨
     + 물론, 자동차의 연관관계의 주인으로 정하는 것이 불가능한 것이 아니지만, 자동차를 연관관계의 주인으로 정하면 자동차가 관리하지 않는 바퀴 테이블의 외래 키 값이 업데이트 되므로 관리와 유지보수가 어려움
     + 추가적으로, 별도의 업데이트 쿼리가 발생하는 성능 문제 발생
