-----
### ê°’ íƒ€ì…
-----
1. ë³µì¡í•œ ê°ì²´ë¥¼ ì¡°ê¸ˆì´ë¼ë„ ë‹¨ìˆœí™”í•˜ê¸° ìœ„í•´ ë§Œë“  ê°œë…
2. ë”°ë¼ì„œ, ê°’ íƒ€ì…ì€ ë‹¨ìˆœí•˜ê³  ì•ˆì „í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆì–´ì•¼ í•¨

-----
### ê°’ íƒ€ì…ê³¼ ê³µìœ  ì°¸ì¡°
-----
1. ì„ë² ë””ë“œ íƒ€ì… ê°™ì€ ê°’ íƒ€ì…ì„ ì—¬ëŸ¬ ì—”í‹°í‹°ì—ì„œ ê³µìœ í•˜ë©´ ìœ„í—˜í•¨
2. ë¶€ì‘ìš© (Side Effect) ë°œìƒ
<div align="center">
<img src="https://github.com/user-attachments/assets/1e5da026-83a5-472b-84eb-192992b8cc88">
</div>

3. ì˜ˆì‹œ
   - Member
```java
package hellojpa;

import jakarta.persistence.*;

@Entity
public class Member {

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    // Period
    @Embedded
    private Period workPeriod;

    // Address
    @Embedded
    private Address homeAddress;

    ...

}
```
```java
package hellojpa;

import jakarta.persistence.*;
import org.hibernate.Hibernate;

import java.time.LocalDateTime;
import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Address address = new Address("city", "street", "10000");

            Member member1 = new Member();
            member1.setUsername("member1");
            member1.setHomeAddress(address);
            em.persist(member1);

            Member member2 = new Member();
            member2.setUsername("member2");
            member2.setHomeAddress(address);
            em.persist(member2);

            member1.getHomeAddress().setCity("newCity"); // Side Effect (ê°ì²´ëŠ” ê°’ íƒ€ì… ê³µìœ  ì°¸ì¡°)

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
...
Hibernate: 
    /* update
        for hellojpa.Member */update Member 
    set
        city=?,
        street=?,
        zipcode=?,
        USERNAME=?,
        endDate=?,
        startDate=? 
    where
        MEMBER_ID=?

Hibernate: 
    /* update
        for hellojpa.Member */update Member 
    set
        city=?,
        street=?,
        zipcode=?,
        USERNAME=?,
        endDate=?,
        startDate=? 
    where
        MEMBER_ID=?
```
<div align="center">
<img src="https://github.com/user-attachments/assets/be09d610-0c02-4ad0-8580-b6de9327bd32">
</div>

-----
### ê°’ íƒ€ì… ë³µì‚¬
-----
1. ê°’ íƒ€ì…ì˜ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ì¸ ê°’ì„ ê³µìœ í•˜ëŠ” ê²ƒì€ ìœ„í—˜
2. ëŒ€ì‹  ê°’(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ë³µì‚¬í•´ì„œ ì‚¬ìš©
<div align="center">
<img src="https://github.com/user-attachments/assets/957b0306-1aff-4388-b1aa-6f0390108586">
</div>

3. ì˜ˆì‹œ
```java
package hellojpa;

import jakarta.persistence.*;
import org.hibernate.Hibernate;

import java.time.LocalDateTime;
import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Address address = new Address("city", "street", "10000");

            Member member1 = new Member();
            member1.setUsername("member1");
            member1.setHomeAddress(address);
            em.persist(member1);

            Address copyAddress = new Address(address.getCity(), address.getStreet(), address.getZipcode()); // ê°ì²´ ê°’ ë³µì‚¬
            Member member2 = new Member();
            member2.setUsername("member2");
            member2.setHomeAddress(copyAddress);
            em.persist(member2);

            member1.getHomeAddress().setCity("newCity");

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```

-----
### ê°ì²´ íƒ€ì…ì˜ í•œê³„
-----
1. í•­ìƒ ê°’ì„ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ë©´, ê³µìœ  ì°¸ì¡°ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¶€ì‘ìš©ì„ í”¼í•  ìˆ˜ ìˆìŒ
2. ğŸ’¡ğŸ’¡ ë¬¸ì œëŠ” ì„ë² ë””ë“œ íƒ€ì…ì²˜ëŸ¼ ì§ì ‘ ì •ì˜í•œ ê°’ íƒ€ì…ì€ ìë°”ì˜ ê¸°ë³¸ íƒ€ì…ì´ ì•„ë‹ˆë¼ ê°ì²´ íƒ€ì…
3. ğŸ’¡ ìë°” ê¸°ë³¸ íƒ€ì…ì— ê°’ì„ ëŒ€ì…í•˜ë©´ ê°’ì„ ë³µì‚¬í•˜ì§€ë§Œ, ê°ì²´ íƒ€ì…ì€ ì°¸ì¡° ê°’ì„ ì§ì ‘ ëŒ€ì…í•˜ëŠ” ê²ƒì„ ë§‰ì„ ë°©ë²•ì´ ì—†ìŒ
  - ê¸°ë³¸ íƒ€ì… (Primitive Type)
```java
int a = 10;
int b = a; // ê¸°ë³¸ íƒ€ì…ì€ ê°’ì„ ë³µì‚¬
b = 4; // a ê°’ì€ ê·¸ëŒ€ë¡œ 10 ìœ ì§€
```

  - ê°ì²´ íƒ€ì…
```java
Address a = new Address("Old");
Address b = a; // ê°ì²´ íƒ€ì…ì€ ì°¸ì¡°ë¥¼ ì „ë‹¬
b.setCity("New"); // a, b ëª¨ë‘ ê°™ì€ ê°ì²´ì˜ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ë¯€ë¡œ Newë¡œ ê°±ì‹ 
```

4. ğŸ’¡ ì¦‰, ê°ì²´ì˜ ê³µìœ  ì°¸ì¡°ë¥¼ í”¼í•  ìˆ˜ ì—†ìŒ

-----
### ë¶ˆë³€ ê°ì²´
-----
1. ê°ì²´ íƒ€ì…ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ê²Œ ë§Œë“¤ë©´, ë¶€ì‘ìš©ì„ ì›ì²œ ì°¨ë‹¨ ê°€ëŠ¥
2. ğŸ’¡ ê°’ íƒ€ì…ì€ ë¶ˆë³€ ê°ì²´ë¡œ ì„¤ê³„ (Immnutable Obejct)ë¡œ ì„¤ê³„í•´ì•¼ í•¨
3. ğŸ’¡ğŸ’¡ğŸ’¡ ë¶ˆë³€ ê°ì²´ : ìƒì„± ì‹œì  ì´í›„ ì ˆëŒ€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ê°ì²´
4. ğŸ’¡ğŸ’¡ğŸ’¡ ìƒì„±ìë¡œë§Œ ê°’ì„ ì„¤ì •í•˜ê³ , ìˆ˜ì •ì(Setter)ë¥¼ ë§Œë“¤ì§€ ì•Šìœ¼ë©´ ë¨ (ë˜ëŠ” setterë¥¼ privateë¡œ ì„¤ì •)
5. ì°¸ê³  : Integer, Stringì€ ìë°”ê°€ ì œê³µí•˜ëŠ” ëŒ€í‘œì  ë¶ˆë³€ ê°ì²´
6. ì˜ˆì‹œ
  - Address (ìˆ˜ì •ì ì œê±°) [ë˜ëŠ” private ì„¤ì •]
```java
package hellojpa;

import jakarta.persistence.Embeddable;

@Embeddable
public class Address {
    private String city;
    private String street;
    private String zipcode;

    public Address() { // ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜
    }

    public Address(String city, String street, String zipcode) {
        this.city = city;
        this.street = street;
        this.zipcode = zipcode;
    }

    public String getCity() {
        return city;
    }

    public String getStreet() {
        return street;
    }
    public String getZipcode() {
        return zipcode;
    }

    private void setCity(String city) {
        this.city = city;
    }

    private void setStreet(String street) {
        this.street = street;
    }

    private void setZipcode(String zipcode) {
        this.zipcode = zipcode;
    }
}
```

```java
package hellojpa;

import jakarta.persistence.*;
import org.hibernate.Hibernate;

import java.time.LocalDateTime;
import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Address address = new Address("city", "street", "10000");

            Member member1 = new Member();
            member1.setUsername("member1");
            member1.setHomeAddress(address);
            em.persist(member1);

            Address newAddress = new Address("newAddress", address.getStreet(), address.getZipcode()); // ìƒˆë¡œ ê°ì²´ ìƒì„±
            
            member1.setHomeAddress(newAddress);

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
