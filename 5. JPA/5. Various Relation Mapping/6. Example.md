-----
### ë°°ì†¡, ì¹´í…Œê³ ë¦¬ ì¶”ê°€ - ì—”í‹°í‹°
-----
1. ì£¼ë¬¸ê³¼ ë°°ì†¡ì€ 1:1 (@OneToOne)
2. ìƒí’ˆê³¼ ì¹´í…Œê³ ë¦¬ëŠ” N:M (@ManyToMany)
<div align="center">
<img src="https://github.com/user-attachments/assets/d356cb3d-b820-4e3e-aad7-39e9d15e2110">
</div>

-----
### ë°°ì†¡, ì¹´í…Œê³ ë¦¬ ì¶”ê°€ - ERD
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/6e46616e-62a3-453d-a564-64ffd2d4bd9c">
</div>

-----
### ë°°ì†¡, ì¹´í…Œê³ ë¦¬ ì¶”ê°€ - Entity ìƒì„¸
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/dbacbb9a-0ef8-4c5b-bb05-528d0982d7e2">
</div>

-----
### ì½”ë“œ
-----
1. Order
```java
package jpabook.jpashop.domain;

import jakarta.persistence.*;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "ORDERS")
public class Order {

    @Id @GeneratedValue
    @Column(name = "ORDER_ID")
    private Long id;

    // @Column(name = "MEMBER_ID")
    // private Long memberId;

    @ManyToOne
    @JoinColumn(name = "MEMBER_ID")
    private Member member;

    @OneToOne
    @JoinColumn(name = "DELIVERY_ID")
    private Delivery delivery;

    @OneToMany(mappedBy = "order")
    private List<OrderItem> orderItems = new ArrayList<>();

    private LocalDateTime orderDate;

    @Enumerated(EnumType.STRING)
    private OrderStatus status;

    ...
}
```

2. Delivery
```java
package jpabook.jpashop.domain;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import jakarta.persistence.OneToOne;

@Entity
public class Delivery {
    @Id @GeneratedValue
    private Long id;

    private String city;
    private String street;
    private String zipcode;

    private DeliveryStatus status;

    @OneToOne(mappedBy = "delivery")
    private Order order;
}
```
  - DeliveryStatus (Enum)
```java
package jpabook.jpashop.domain;

public enum DeliveryStatus {

}
```

3. Catergory
```java
package jpabook.jpashop.domain;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Category {

    @Id @GeneratedValue
    private Long id;

    private String name;

    @ManyToOne
    @JoinColumn(name = "PARENT_ID")
    private Category parent;

    @OneToMany(mappedBy = "parent")
    private List<Category> child = new ArrayList<>();

    @ManyToMany
    @JoinTable(name = "CATEGORY_ITEM",
            joinColumns = @JoinColumn(name = "CATERGOY_ID"),
            inverseJoinColumns = @JoinColumn(name = "ITEM_ID")
    )
    private List<Item> items = new ArrayList<>();
}
```

4. Item
```java
package jpabook.jpashop.domain;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Item {
    @Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;

    private String name;
    private int price;
    private int StackQunatity;

    @ManyToMany(mappedBy = "items")
    private List<Category> categories = new ArrayList<>();

    ...
}
```

5. ì‹¤í–‰ ë¡œê·¸
```
Hibernate: 
    create table Category (
        PARENT_ID bigint,
        id bigint not null,
        name varchar(255),
        primary key (id)
    )

Hibernate: 
    create table CATEGORY_ITEM (
        CATERGOY_ID bigint not null,
        ITEM_ID bigint not null
    )

Hibernate: 
    create table Delivery (
        status tinyint check (status between 0 and -1),
        id bigint not null,
        city varchar(255),
        street varchar(255),
        zipcode varchar(255),
        primary key (id)
    )

Hibernate: 
    create table Item (
        StackQunatity integer not null,
        price integer not null,
        ITEM_ID bigint not null,
        name varchar(255),
        primary key (ITEM_ID)
    )

Hibernate: 
    create table Member (
        MEMBER_ID bigint not null,
        city varchar(255),
        name varchar(255),
        zipcode varchar(255),
        primary key (MEMBER_ID)
    )

Hibernate: 
    create table OrderItem (
        count integer not null,
        orderPrice integer not null,
        ITEM_ID bigint,
        ORDER_ID bigint,
        ORDER_ITEM_ID bigint not null,
        primary key (ORDER_ITEM_ID)
    )

Hibernate: 
    create table ORDERS (
        DELIVERY_ID bigint unique,
        MEMBER_ID bigint,
        ORDER_ID bigint not null,
        orderDate timestamp(6),
        status varchar(255) check (status in ('ORDER','CANCEL')),
        primary key (ORDER_ID)
    )

    ...

```

-----
### N:M ê´€ê³„ëŠ” 1:N, N:1ë¡œ ë³€ê²½
-----
1. í…Œì´ë¸”ì˜ N:Mì€ ì¤‘ê°„ í…Œì´ë¸”ì„ ì´ìš©í•´ 1:N, N:1ë¡œ ë³€ê²½
   - ì‹¤ì œ ì¤‘ê°„ í…Œì´ë¸”ì´ ë‹¨ìˆœí•˜ì§€ ì•ŠìŒ
2. @ManyToManyì˜ ì œì•½ : í•„ë“œ ì¶”ê°€ ë¶ˆê°€, Entity Table ë¶ˆì¼ì¹˜
3. ë”°ë¼ì„œ, ì‹¤ì „ì—ì„œëŠ” @ManyToManyë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

-----
### @JoinColumn
-----
1. ì™¸ë˜ í‚¤ë¥¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©
2. ì†ì„± / ì„¤ëª… / ê¸°ë³¸ê°’
   - ğŸ’¡ name : ë§¤í•‘í•  ì™¸ë˜ í‚¤ ì´ë¦„ (ê¸°ë³¸ê°’ : í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ë ´ëª…)
   - ğŸ’¡ referencedColumnName : ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒ í…Œì´ë¸”ì˜ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’ : ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ëª…)
   - foreignKey (DDL) : ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ì§ì ‘ ì„¤ì • ê°€ëŠ¥í•˜ë©°, ì´ ì†ì„±ì€ í…Œì´ë¸”ì„ ìƒì„±í•  ë–„ë§Œ ì‚¬ìš©
   - unique, nullable, insertable, updatable, columnDefinition, table : @Column ì†ì„±ê³¼ ê°™ìŒ

-----
### @ManyToOne ì£¼ìš” ì†ì„±
-----
1. ë‹¤ëŒ€ì¼ ê´€ê³„ ë§¤í•‘ (ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ë˜ì–´ì•¼ í•¨)
2. ì†ì„± / ì„¤ëª… / ê¸°ë³¸ê°’
   - optional : falseë¡œ ì„¤ì •í•˜ë©´ ì—°ê´€ëœ ì—”í‹°í‹°ê°€ í•­ìƒ ìˆì–´ì•¼ í•¨ (ê¸°ë³¸ê°’ : TRUE)
   - fetch : ê¸€ë¡œë²Œ Fetch ì „ëµ ì„¤ì • (ğŸ’¡ @ManyToOne = FetchType.EAGER / @OneToMany = FetchType.LAZY)
   - cascade : ì˜ì†ì„± ì „ì´ ê¸°ëŠ¥ ì‚¬ìš©
   - targetEntity : ì—°ê´€ëœ ì—”í‹°í‹° íƒ€ì… ì •ë³´ ì„¤ì • (ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ). ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ë„ ì œë„¤ë¦­ìœ¼ë¡œ íƒ€ì… ì •ë³´ ì•Œ ìˆ˜ ìˆìŒ

-----
### @OneToMany ì£¼ìš” ì†ì„±
-----
1. ì¼ëŒ€ë‹¤ ê´€ê³„ ë§¤í•‘
2. ì†ì„± / ì„¤ëª… / ê¸°ë³¸ê°’
   - ğŸ’¡ mappedBy : ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ í•„ë“œ ì„ íƒ
   - fetch : ê¸€ë¡œë²Œ Fetch ì „ëµ ì„¤ì • (ğŸ’¡ @ManyToOne = FetchType.EAGER / @OneToMany = FetchType.LAZY)
   - cascade : ì˜ì†ì„± ì „ì´ ê¸°ëŠ¥ ì‚¬ìš©     
   - targetEntity : ì—°ê´€ëœ ì—”í‹°í‹° íƒ€ì… ì •ë³´ ì„¤ì • (ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ). ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ë„ ì œë„¤ë¦­ìœ¼ë¡œ íƒ€ì… ì •ë³´ ì•Œ ìˆ˜ ìˆìŒ
