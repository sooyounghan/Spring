-----
### í”„ë¡ì‹œ (Proxy)
-----
1. Memberë¥¼ ì¡°íšŒí•  ë•Œ, Teamë„ í•¨ê»˜ ì¡°íšŒí•´ì•¼ í•˜ëŠ”ê°€?
<div align="center">
<img src="https://github.com/user-attachments/assets/e07977d5-16b3-4f8f-8c15-70845452e630">
</div>

  - íšŒì›ê³¼ íŒ€ í•¨ê»˜ ì¶œë ¥
```java
public void printUserAndTeam(String memberId) {
    Member member = em.find(Member.class, memberId);
    Team team = member.getTeam();

    System.out.println("íšŒì› ì´ë¦„ : " + member.getUsername());
    System.out.println("ì†Œì†íŒ€ : " + team.getTeam());
}
```

  - íšŒì›ë§Œ ì¶œë ¥
```java
public void printUserAndTeam(String memberId) {
    Member member = em.find(Member.class, memberId);
    Team team = member.getTeam();

    System.out.println("íšŒì› ì´ë¦„ : " + member.getUsername());
}
```

2. í”„ë¡ì‹œ ê¸°ì´ˆ
   - em.find()ì™€ em.getReference()
     + ğŸ’¡ em.find() : ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•´ì„œ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ ì¡°íšŒ
     + ğŸ’¡ em.getReference() : ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ë¯¸ë£¨ëŠ” ê°€ì§œ(í”„ë¡ì‹œ) ì—”í‹°í‹° ê°ì²´ ì¡°íšŒ
<div align="center">
<img src="https://github.com/user-attachments/assets/b86140d5-8d1b-4e0b-9472-7c580fb6cacd">
</div>

  - Entity target : ì—”í‹°í‹° ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” target (ì´ˆê¸°ê°’ : null (ì•„ë¬´ê²ƒë„ ê°€ë¦¬í‚¤ì§€ ì•ŠìŒ))
    
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Member member = new Member();
            member.setUsername("Hello");

            em.persist(member);

            em.flush();
            em.clear();

            // em.find()
            /*
            Member findMember = em.find(Member.class, member.getId()); 
            System.out.println("findMember.id = " + findMember.getId()); 
            System.out.println("findMember.username = " + findMember.getUsername());
            */

            // em.getReference()
            Member findMember = em.getReference(Member.class, member.getId()); // getReferecneë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¡°íšŒë¥¼ ë¯¸ë£¨ëŠ” ê°€ì§œ í”„ë¡ì‹œ ê°ì²´
            System.out.println("findMember.getClass() = " + findMember.getClass());
            System.out.println("findMember.id = " + findMember.getId()); // ğŸ’¡ ìœ„ ì¤„ì—ì„œ ì‹¤í–‰í•  ë•Œ idê°’ì„ ë°›ì•„ì™”ê¸° ë•Œë¬¸ì— ì¿¼ë¦¬ ë¯¸ì‹¤í–‰
            System.out.println("findMember.username = " + findMember.getUsername()); // ğŸ’¡ DBì— ì¡´ì¬í•˜ë¯€ë¡œ SQL ì¿¼ë¦¬ ì‹¤í–‰
            
            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
  - em.find()
```
Hibernate: 
    select
        m1_0.MEMBER_ID,
        m1_0.createdBy,
        m1_0.createdDate,
        m1_0.lastModifiedBy,
        m1_0.lastModifiedDate,
        t1_0.TEAM_ID,
        t1_0.createdBy,
        t1_0.createdDate,
        t1_0.lastModifiedBy,
        t1_0.lastModifiedDate,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

findMember.id = 1
findMember.username = Hello
```
  - em.getReference()
```
findMember.getClass() = class hellojpa.Member$HibernateProxy$fOE6kEph // ğŸ’¡ Hibernateê°€ ìƒì„±í•œ ê°€ì§œ Proxy
findMember.id = 1

Hibernate: 
    select
        m1_0.MEMBER_ID,
        m1_0.createdBy,
        m1_0.createdDate,
        m1_0.lastModifiedBy,
        m1_0.lastModifiedDate,
        t1_0.TEAM_ID,
        t1_0.createdBy,
        t1_0.createdDate,
        t1_0.lastModifiedBy,
        t1_0.lastModifiedDate,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

findMember.username = Hello
```

3. í”„ë¡ì‹œ íŠ¹ì§•
<div align="center">
<img src="https://github.com/user-attachments/assets/92303c87-886a-4b09-906a-f711218b3449">
</div>

   - ğŸ’¡ ì‹¤ì œ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ ë§Œë“¤ì–´ì§
   - ì‹¤ì œ í´ë˜ìŠ¤ì™€ ê²‰ ëª¨ì–‘ì´ ê°™ìŒ
   - ğŸ’¡ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œëŠ” ì§„ì§œ ê°ì²´ì¸ì§€, í”„ë¡ì‹œ ê°ì²´ì¸ì§€ êµ¬ë¶„í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ë©´ ë¨ (ì´ë¡ ìƒ)
   - ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ì°¸ì¡°(target)ë¥¼ ë³´ê´€
   - ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ë©´, í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ë©”ì†Œë“œ í˜¸ì¶œ
     
<div align="center">
<img src="https://github.com/user-attachments/assets/a246164b-ef3f-4a32-becf-829083e9cbad">
</div>

4. ğŸ’¡ğŸ’¡ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ì˜ ì´ˆê¸°í™”
```java
Member member = em.getReference(Member.class, "id1"); // ğŸ’¡ Proxy ê°ì²´ 
member.getName();
```
<div align="center">
<img src="https://github.com/user-attachments/assets/684ec41f-ae62-4f57-869e-d1b856bb32e0">
</div>

   - ğŸ’¡ getName()ì„ ìš”ì²­í•˜ì§€ë§Œ, MemberProxyì— nameê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì´ˆê¸°í™” ìš”ì²­
   - ğŸ’¡ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” DBë¥¼ ì¡°íšŒí•´ì„œ ì‹¤ì œ Entity ê°ì²´ë¥¼ ìƒì„±í•¨
   - ğŸ’¡ ì´í›„, targetê³¼ ì‹¤ì œ Entity ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ ì—°ê²°í•˜ì—¬ target.getName()ì„ í†µí•´ ì‹¤ì œ ì—”í‹°í‹°ì˜ getName() í˜¸ì¶œ

```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Member member = new Member();
            member.setUsername("Hello");

            em.persist(member);

            em.flush();
            em.clear();

            // em.find()
            /*
            Member findMember = em.find(Member.class, member.getId());
            System.out.println("findMember.id = " + findMember.getId());
            System.out.println("findMember.username = " + findMember.getUsername());
            */

            // em.getReference()
            Member findMember = em.getReference(Member.class, member.getId());
            System.out.println("findMember.getClass() = " + findMember.getClass());
            System.out.println("findMember.id = " + findMember.getId());
            System.out.println("findMember.username = " + findMember.getUsername()); // í”„ë¡ì‹œ ê°ì²´ ì´ˆê¸°í™” ì™„ë£Œ
            System.out.println("findMember.username = " + findMember.getUsername()); // ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ, ì¿¼ë¦¬ ë¯¸í˜¸ì¶œ
            
            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```java

findMember.getClass() = class hellojpa.Member$HibernateProxy$k4JIMnDo
findMember.id = 1

Hibernate: 
    select
        m1_0.MEMBER_ID,
        m1_0.createdBy,
        m1_0.createdDate,
        m1_0.lastModifiedBy,
        m1_0.lastModifiedDate,
        t1_0.TEAM_ID,
        t1_0.createdBy,
        t1_0.createdDate,
        t1_0.lastModifiedBy,
        t1_0.lastModifiedDate,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

findMember.username = Hello
findMember.username = Hello
```

5. ğŸ’¡ğŸ’¡ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ íŠ¹ì§•
   - ğŸ’¡ğŸ’¡ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ëŠ” ì²˜ìŒ ì‚¬ìš©í•  ë•Œ í•œ ë²ˆë§Œ ì´ˆê¸°í™”
   - ğŸ’¡ğŸ’¡ğŸ’¡ (ì¤‘ìš”) í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•  ë•Œ, í”„ë¡ì‹œ ê°ì²´ê°€ ì‹¤ì œ ì—”í‹°í‹°ë¡œ ë°”ë€ŒëŠ” ê²ƒì€ ì•„ë‹˜
     + ğŸ’¡ğŸ’¡ğŸ’¡ (ì¤‘ìš”) ì´ˆê¸°í™”ë˜ë©´ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ì„œ ì‹¤ì œ ì—”í‹°í‹°ì— ì ‘ê·¼ ê°€ëŠ¥
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Member member = new Member();
            member.setUsername("Hello");

            em.persist(member);

            em.flush();
            em.clear();

            // em.find()
            /*
            Member findMember = em.find(Member.class, member.getId());
            System.out.println("findMember.id = " + findMember.getId());
            System.out.println("findMember.username = " + findMember.getUsername());
            */

            // em.getReference()
            Member findMember = em.getReference(Member.class, member.getId());
            System.out.println("before findMember.getClass() = " + findMember.getClass());
            System.out.println("findMember.id = " + findMember.getId());
            System.out.println("findMember.username = " + findMember.getUsername());
            
            System.out.println("findMember.username = " + findMember.getUsername());
            System.out.println("after findMember.getClass() = " + findMember.getClass());
            
            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
````
```java
before findMember.getClass() = class hellojpa.Member$HibernateProxy$STGQg6wT
findMember.id = 1

...

findMember.username = Hello
findMember.username = Hello
after findMember.getClass() = class hellojpa.Member$HibernateProxy$STGQg6wT // ë™ì¼
```

   - ğŸ’¡ í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ì—”í‹°í‹°ë¥¼ ìƒì†ë°›ìŒ
     + ğŸ’¡ğŸ’¡ğŸ’¡ ë”°ë¼ì„œ íƒ€ì… ì²´í¬ ì‹œ ì£¼ì˜ (ë¹„êµì—°ì‚°ì(==) ë¹„êµ ì‹¤íŒ¨, ëŒ€ì‹  instanceof ì‚¬ìš©)
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Member member1 = new Member();
            member1.setUsername("member1");
            em.persist(member1);

            Member member2 = new Member();
            member2.setUsername("member2");
            em.persist(member2);

            em.flush();
            em.clear();

            Member m1 = em.find(Member.class, member1.getId());
            Member m2 = em.find(Member.class, member2.getId());
            System.out.println("m1 == m2 : " + (m1.getClass() == m2.getClass())); // em.find() : ì‹¤ì œ Entity - True

            em.flush();
            em.clear();

            Member m3 = em.find(Member.class, member1.getId()); // ì‹¤ì œ Entity
            Member m4 = em.getReference(Member.class, member2.getId()); // ê°€ì§œ Proxy ê°ì²´
            System.out.println("m3 == m4 = " + (m3.getClass() == m4.getClass())); // em.getReference() : ê°€ì§œ Proxy ê°ì²´ - false
            System.out.println("m3 instanceof Member Class = " + (m3 instanceof Member)); // true
            System.out.println("m3 instanceof Member Class = " + (m4 instanceof Member)); // true

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
m1 == m2 : true

Hibernate: 
    select
        m1_0.MEMBER_ID,
        m1_0.createdBy,
        m1_0.createdDate,
        m1_0.lastModifiedBy,
        m1_0.lastModifiedDate,
        t1_0.TEAM_ID,
        t1_0.createdBy,
        t1_0.createdDate,
        t1_0.lastModifiedBy,
        t1_0.lastModifiedDate,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

m3 == m4 = false
m3 instanceof Member Class = true
m3 instanceof Member Class = true
```

   - ğŸ’¡ğŸ’¡ğŸ’¡ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì°¾ëŠ” ì—”í‹°í‹°ê°€ ì´ë¯¸ ìˆìœ¼ë©´, em.getReference()ë¥¼ í˜¸ì¶œí•´ë„ ì‹¤ì œ ì—”í‹°í‹° ë°˜í™˜
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            Member member1 = new Member();
            member1.setUsername("member1");
            em.persist(member1);


            em.flush();
            em.clear();

            Member m1 = em.find(Member.class, member1.getId());
            System.out.println("m1 = " + m1.getClass()); // ì‹¤ì œ Entity (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì¡´ì¬)

            Member reference = em.getReference(Member.class, member1.getId());
            System.out.println("reference = " + reference.getClass()); // ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì¡´ì¬í•˜ë¯€ë¡œ ì‹¤ì œ Entity ë°˜í™˜

            System.out.println("m1 == reference : " + (m1 == reference));

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
m1 = class hellojpa.Member
reference = class hellojpa.Member
m1 == reference : true
```

   - ğŸ’¡ğŸ’¡ğŸ’¡ ì´ì™€ ë°˜ëŒ€ë¡œ, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì´ë¯¸ í”„ë¡ì‹œë¥¼ ë¨¼ì € í˜¸ì¶œí–ˆë‹¤ë©´, em.find()ë¥¼ í˜¸ì¶œí•˜ë©´ ê°€ì§œ í”„ë¡ì‹œ ë°˜í™˜
   - ì¦‰, Proxy ê°ì²´ê°€ í•œ ë²ˆ í˜¸ì¶œ ë˜ë©´, ì´í›„ em.find()ë¡œ ì‹¤ì œ Entityë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„, í”„ë¡ì‹œ ê°ì²´ ë°˜í™˜
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            Member member1 = new Member();
            member1.setUsername("member1");
            em.persist(member1);


            em.flush();
            em.clear();

            Member reference = em.getReference(Member.class, member1.getId()); // Proxy
            System.out.println("reference = " + reference.getClass());

            Member member = em.find(Member.class, member1.getId()); // Entity (Member) 
            System.out.println("member = " + member.getClass()); // Proxy ê°ì²´ë¡œ ë°˜í™˜ (íŠ¹ìˆ˜ ê²½ìš°)

            System.out.println("reference == member : " + (reference == member));

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
reference = class hellojpa.Member$HibernateProxy$B3djKyar

Hibernate: 
    select
        m1_0.MEMBER_ID,
        m1_0.createdBy,
        m1_0.createdDate,
        m1_0.lastModifiedBy,
        m1_0.lastModifiedDate,
        t1_0.TEAM_ID,
        t1_0.createdBy,
        t1_0.createdDate,
        t1_0.lastModifiedBy,
        t1_0.lastModifiedDate,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

member = class hellojpa.Member$HibernateProxy$B3djKyar
reference == member : true
```
   - ğŸ’¡ğŸ’¡ğŸ’¡ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ì—†ëŠ” ì¤€ì˜ì† ìƒíƒœì¼ ë•Œ, í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•˜ë©´ ë¬¸ì œ ë°œìƒ (HibernateëŠ” org.hibernate.LazyInitializationException ì˜ˆì™¸ ë°œìƒ)
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            Member member1 = new Member();
            member1.setUsername("member1");
            em.persist(member1);


            em.flush();
            em.clear();

            Member reference = em.getReference(Member.class, member1.getId()); // Proxy
            System.out.println("reference = " + reference.getClass());

            em.detach(reference); // = em.close(), em.clear() // refernce ì¤€ì˜ì†í™”
            System.out.println("reference.username = " + reference.getUsername()); // ì¤€ì˜ì† ìƒíƒœì—ì„œ í”„ë¡ì‹œ ê°ì²´ ì´ˆê¸°í™”

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
reference = class hellojpa.Member$HibernateProxy$ewPkwUuY

org.hibernate.LazyInitializationException: could not initialize proxy [hellojpa.Member#1] - no Session
	at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:165)
	at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:314)
	at org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:44)
	at org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:102)
	at hellojpa.Member$HibernateProxy$ewPkwUuY.getUsername(Unknown Source)
	at hellojpa.JpaMain.main(JpaMain.java:30)
```

6. í”„ë¡ì‹œ í™•ì¸
   - í”„ë¡ì‹œ ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ì—¬ë¶€ í™•ì¸ : PersistenceUnitUtil.isLoaded(Object entity)
   - í”„ë¡ì‹œ í´ë˜ìŠ¤ í™•ì¸ ë°©ë²• : entity.getClass().getName() ì¶œë ¥ (..javasist.. or HibernateProxy...)
   - í”„ë¡ì‹œ ê°•ì œ ì´ˆê¸°í™” : org.hiberante.Hibernate.initialize(entity);
   - ğŸ’¡ ì°¸ê³  : JPA í‘œì¤€ì€ ê°•ì œ ì´ˆê¸°í™” ì—†ìŒ
     + ë”°ë¼ì„œ, JPAëŠ” ê°•ì œ í˜¸ì¶œë¡œ ê°•ì œ ì´ˆê¸°í™” ì²˜ë¦¬ : member.getName()
 ```java
package hellojpa;

import jakarta.persistence.*;
import org.hibernate.Hibernate;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            Member member1 = new Member();
            member1.setUsername("member1");
            em.persist(member1);


            em.flush();
            em.clear();

            Member reference = em.getReference(Member.class, member1.getId()); // Proxy

            System.out.println("isLoaded = " + emf.getPersistenceUnitUtil().isLoaded(reference)); // false
            reference.getUsername(); // ê°•ì œ ì´ˆê¸°í™”
            System.out.println("isLoaded = " + emf.getPersistenceUnitUtil().isLoaded(reference)); // true

            System.out.println("reference = " + reference.getClass()); // í”„ë¡ì‹œ í´ë˜ìŠ¤ í™•ì¸
            System.out.println("reference = " + reference.getClass().getName()); // í”„ë¡ì‹œ í´ë˜ìŠ¤ í™•ì¸

            Hibernate.initialize(reference); // ê°•ì œ ì´ˆê¸°í™”
            
            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
isLoaded = false

Hibernate: 
    select
        m1_0.MEMBER_ID,
        m1_0.createdBy,
        m1_0.createdDate,
        m1_0.lastModifiedBy,
        m1_0.lastModifiedDate,
        t1_0.TEAM_ID,
        t1_0.createdBy,
        t1_0.createdDate,
        t1_0.lastModifiedBy,
        t1_0.lastModifiedDate,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

isLoaded = true

reference = class hellojpa.Member$HibernateProxy$UfsACjlY
reference = hellojpa.Member$HibernateProxy$UfsACjlY
``` 
