-----
### ì–‘ë°©í–¥ ë§¤í•‘
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/4a14b849-176a-4849-a31e-d0ea2ea6b273">
</div>

1. Member Entity : ë‹¨ë°©í–¥ê³¼ ë™ì¼
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.Date;

@Entity
public class Member {

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;

    ...
}
```

2. Team Entity : ì»¬ë ‰ì…˜ ì¶”ê°€
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Team {
    @Id @GeneratedValue
    @Column(name = "TEAM_ID")
    private Long id;

    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();

    ...
}
```
  - Teamì€ í•˜ë‚˜(One) â†’ MemberëŠ” ë‹¤ìˆ˜(Many) : Team Entity ê¸°ì¤€ @OneToMany
  - Memberì˜ ì–´ë– í•œ í•„ë“œì— Mappingì„ ì‹œí‚¬ ê²ƒì¸ì§€ ì†ì„± ì¶”ê°€ : mappedBy = "team"

3. ì–‘ë°©í–¥ ë§¤í•‘ (ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰)
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);

            Member member = new Member();
            member.setUsername("member1");
            member.setTeam(team);
            em.persist(member);


            em.flush(); // DBë¡œ INSERT SQL ì¿¼ë¦¬ ì „ì†¡
            em.clear(); // 1ì°¨ ìºì‹œ ë‚´ìš© ì‚­ì œ

            // ì¡°íšŒ
            Member findMember = em.find(Member.class, member.getId());

            // ì–‘ë°©í–¥ ì—°ê²°ê´€ê³„ (ì—­ë°©í–¥ ì¡°íšŒ)
            List<Member> members = findMember.getTeam().getMembers();
            for (Member m : members) {
                System.out.println("m = " + m.getUsername());
            }

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}

```
  - ì‹¤í–‰ ë¡œê·¸
```
Hibernate: 
    create table Team (
        TEAM_ID bigint not null,
        name varchar(255),
        primary key (TEAM_ID)
    )

Hibernate: 
    alter table if exists Member 
       add constraint FKl7wsny760hjy6x19kqnduasbm 
       foreign key (TEAM_ID) 
       references Team

Hibernate: 
    select
        next value for Team_SEQ
Hibernate: 
    select
        next value for Member_SEQ

Hibernate: 
    /* insert for
        hellojpa.Team */insert 
    into
        Team (name, TEAM_ID) 
    values
        (?, ?)

Hibernate: 
    /* insert for
        hellojpa.Member */insert 
    into
        Member (TEAM_ID, USERNAME, MEMBER_ID) 
    values
        (?, ?, ?)

Hibernate: 
    select
        m1_0.MEMBER_ID,
        t1_0.TEAM_ID,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

Hibernate: 
    select
        m1_0.TEAM_ID,
        m1_0.MEMBER_ID,
        m1_0.USERNAME 
    from
        Member m1_0 
    where
        m1_0.TEAM_ID=?

m = member1
```

-----
### ì—°ê´€ê´€ê³„ ì£¼ì¸ê³¼ mappedBy
-----
1. ğŸ’¡ ê°ì²´ì™€ í…Œì´ë¸” ê°„ì— ì—°ê´€ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´
  - ê°ì²´ ì—°ê´€ ê´€ê³„ = 2ê°œ
    + íšŒì› â†’ íŒ€ ì—°ê´€ê´€ê³„ : 1ê°œ (ë‹¨ë°©í–¥)
    + íŒ€ â†’ íšŒì› ì—°ê´€ê´€ê³„ : 1ê°œ (ë‹¨ë°©í–¥)
  - í…Œì´ë¸” ì—°ê´€ ê´€ê³„ = 1ê°œ
    + íšŒì› â†” íŒ€ì˜ ì—°ê´€ê´€ê³„ : 1ê°œ (ì–‘ë°©í–¥)

<div align="center">
<img src="https://github.com/user-attachments/assets/bc4bdec6-9f51-4837-b76b-0b599f52325e">
</div>

2. ğŸ’¡ ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹ˆë¼ ì„œë¡œ ë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œ
  - ğŸ’¡ ê°ì²´ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì°¸ì¡°í•˜ë ¤ë©´ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ 2ê°œ ë§Œë“¤ì–´ì•¼ í•¨
  - A â†’ B (a.getB())
```java
class A {
    B b;
}
```

  - B â†’ A (b.getA())
```java
class B {
    A a;
}
```

3. í…Œì´ë¸”ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„
   - í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬
   - MEMBER.TEAM_ID ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì§ (ì–‘ìª½ìœ¼ë¡œ ì¡°ì¸ ê°€ëŠ¥)

```sql
SELECT *
FROM MEMBER M
JOIN TEAM T ON M.TEAM_ID = T.TEAM_ID
```
```sql
SELECT *
FROM TEAM T
JOIN MEMBER M ON T.TEAM_ID = M.TEAM_ID
```

  - ğŸ’¡ ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•´ì•¼ í•¨
<div align="center">
<img src="https://github.com/user-attachments/assets/3aae1a73-19df-4679-8917-e8a1da28cb04">
</div>

  - ì¦‰, Memberì˜ teamìœ¼ë¡œ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ í†µí•´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê²ƒì¸ì§€, Teamì˜ membersìœ¼ë¡œ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ í†µí•´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê²ƒì¸ì§€ ê³ ë¯¼ í•„ìš”

4. ğŸ’¡ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ (Owner) - ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™
   - ê°ì²´ì˜ ë‘ ê´€ê³„ ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •
   - ğŸ’¡ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬ (ë“±ë¡, ìˆ˜ì •)
   - ğŸ’¡ ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥
   - ğŸ’¡ ì£¼ì¸ì€ mappedBy ì†ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
   - ğŸ’¡ ì£¼ì¸ì´ ì•„ë‹ˆë¼ë©´ mappedBy ì†ì„±ìœ¼ë¡œ ì£¼ì¸ ì§€ì •
   - ğŸ’¡ğŸ’¡ğŸ’¡ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ ì§€ì • (ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ : ë‹¤(N), ì™¸ë˜í‚¤ê°€ ì—†ëŠ” ê³³ : 1)
     + ğŸ’¡ ì¦‰, Nìª½ì´ ë¬´ì¡°ê±´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ (@ManyToOne : ì—°ê´€ê´€ê³„ ì£¼ì¸) 
     + ğŸ’¡ ì¦‰, 1ìª½ì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹˜ (@OneToMany : ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹˜) - mappedBy
     + ğŸ’¡ ì—¬ê¸°ì„œëŠ” Member.teamì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
<div align="center">
<img src="https://github.com/user-attachments/assets/b6f2f0fb-8eef-4c39-a258-5fb3ab7aae39">
</div>

-----
### ì£¼ì˜ì 
------
1. ğŸ’¡ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•˜ì§€ ì•ŠëŠ” ê²½ìš°
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;
"
public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            // ì €ì¥
            Member member = new Member();
            member.setUsername("member1");
            em.persist(member);

            Team team = new Team();
            team.setName("TeamA");
            // ì—­ë°©í–¥ (ì£¼ì¸ì´ ì•„ë‹Œ ë°©í–¥)ë§Œ ì—°ê´€ê´€ê³„ ì„¤ì •
            team.getMembers().add(member); // ì—°ê´€ ê´€ê³„ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šê³ , ì£¼ì¸ì´ ì•„ë‹Œ ê°’ì— ê°’ì„ ì…ë ¥
            em.persist(team);

            em.flush();
            em.clear();

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
<div align="center">
<img src="https://github.com/user-attachments/assets/3e51de2d-a1db-48de-b326-4b0d6e963f75">
</div>

2. ğŸ’¡ğŸ’¡ğŸ’¡ ì–‘ë°©í–¥ ë§¤í•‘ ì‹œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì—ê²Œ ê°’ì„ ì…ë ¥í•´ì•¼ í•¨
   - ğŸ’¡ğŸ’¡ğŸ’¡ ìˆœìˆ˜í•œ ê°ì²´ ê´€ê³„ë¥¼ ê³ ë ¤í•˜ë©´, í•­ìƒ ì–‘ìª½ ë‹¤ ê°’ì„ ì…ë ¥í•´ì•¼ í•¨
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);
            
            Member member = new Member();
            member.setUsername("member1");

            team.getMembers().add(member); // ì—°ê´€ ê´€ê³„ê°€ ì•„ë‹Œ ê°’ ì„¤ì • (ìˆœìˆ˜í•œ ê°ì²´ ê´€ê³„ ê³ ë ¤ ì‹œ, ì–‘ìª½ ëª¨ë‘ ê°’ ì…ë ¥í•˜ëŠ” ê²ƒì´ ë§ìŒ)
            member.setTeam(team); // ì—°ê´€ ê´€ê³„ ì£¼ì¸ì—ê²Œ ê°’ì„ ì„¤ì •

            em.persist(member);

            em.flush();
            em.clear();

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
<div align="center">
<img src="https://github.com/user-attachments/assets/78297e14-4014-4d33-a330-b086b5f02701">
</div>

3. ğŸ’¡ğŸ’¡ğŸ’¡ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹Œ ê°’ì„ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ë¬¸ì œëŠ” ë°œìƒí•˜ì§€ ì•Šìœ¼ë‚˜, ì›ì¹™ì ìœ¼ë¡œ ë„£ì–´ì£¼ëŠ” ê²ƒì´ ë§ìŒ. ê·¸ë ‡ë‹¤ë©´ ì™œ ë„£ì–´ì¤˜ì•¼ í•˜ëŠ”ê°€?
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);

            Member member = new Member();
            member.setUsername("member1");
            // team.getMembers().add(member); // ğŸ’¡ ì—°ê´€ ê´€ê³„ê°€ ì•„ë‹Œ ê°’ ì„¤ì • (ìˆœìˆ˜í•œ ê°ì²´ ê´€ê³„ ê³ ë ¤ ì‹œ, ì–‘ìª½ ëª¨ë‘ ê°’ ì…ë ¥í•˜ëŠ” ê²ƒì´ ë§ìŒ)
            member.setTeam(team); // ğŸ’¡ ì—°ê´€ ê´€ê³„ ì£¼ì¸ì—ê²Œ ê°’ì„ ì…ë ¥
            em.persist(member);

            em.flush();
            em.clear();

            Team findTeam = em.find(Team.class, team.getId()); // ì§€ì—° ë¡œë”©
            List<Member> members = findTeam.getMembers();

            for (Member m : members) {
                System.out.println("m = " + m.getUsername());
            }

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
  - ì‹¤í–‰ ë¡œê·¸
```
...
Hibernate: 
    /* insert for
        hellojpa.Team */insert 
    into
        Team (name, TEAM_ID) 
    values
        (?, ?)

Hibernate: 
    /* insert for
        hellojpa.Member */insert 
    into
        Member (TEAM_ID, USERNAME, MEMBER_ID) 
    values
        (?, ?, ?)

Hibernate: 
    select
        t1_0.TEAM_ID,
        t1_0.name 
    from
        Team t1_0 
    where
        t1_0.TEAM_ID=?

Hibernate: 
    select
        m1_0.TEAM_ID,
        m1_0.MEMBER_ID,
        m1_0.USERNAME 
    from
        Member m1_0 
    where
        m1_0.TEAM_ID=?
m = member1
```
   - ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹Œ ê°’ì„ ì„¤ì •í•˜ì§€ ì•Šì•„ë„, ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë©°, ì‹¤í–‰ ë¡œê·¸ë¥¼ ë³´ë©´, ì •ìƒì ìœ¼ë¡œ JPAê°€ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ
   - í•˜ì§€ë§Œ, ë¬¸ì œ ë°œìƒ (2ê°€ì§€)
     + persistì™€ flsuhë¥¼ í•˜ì§€ ì•Šìœ¼ë©´, í˜„ì¬ 1ì°¨ ìºì‹œì— ì¡´ì¬í•˜ë¯€ë¡œ ì—°ê´€ ê´€ê³„ê°€ ì•„ë‹Œ ê°’ì„ ì„¤ì •í•´ì¤¬ì„ ë•ŒëŠ” ë¬¸ì œê°€ ì—†ìŒ
     + ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ ê°’ê³¼ ì•„ë‹Œ ê°’ ëª¨ë‘ ì„¤ì •ì„ í•˜ì—¬ì„œ ì—°ê´€ ê´€ê³„ ì„¤ì • ë° ë‘ ê°’ ëª¨ë‘ persistë¥¼ í†µí•´ 1ì°¨ ìºì‹œì— ì¡´ì¬
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);

            Member member = new Member();
            member.setUsername("member1");
            member.setTeam(team); // ì—°ê´€ ê´€ê³„ ì£¼ì¸ì—ê²Œ ê°’ì„ ì…ë ¥
            em.persist(member);

            team.getMembers().add(member); // íŒ€ì˜ ì»¬ë ‰ì…˜ì— ê°’ì„ ì €ì¥
            
            // em.flush();
            // em.clear();

            Team findTeam = em.find(Team.class, team.getId()); // 1ì°¨ ìºì‹œì— ì¡´ì¬
            List<Member> members = findTeam.getMembers();

            for (Member m : members) {
                System.out.println("m = " + m.getUsername());
            }

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
...

m = member1 // 1ì°¨ ìºì‹œë¥¼ í†µí•´ ê°’ì„ ì–»ìœ¼ë¯€ë¡œ SELECT ì¿¼ë¦¬ ì—†ìŒ
Hibernate: 
    /* insert for
        hellojpa.Team */insert 
    into
        Team (name, TEAM_ID) 
    values
        (?, ?)
Hibernate: 
    /* insert for
        hellojpa.Member */insert 
    into
        Member (TEAM_ID, USERNAME, MEMBER_ID) 
    values
        (?, ?, ?)
```
   - ğŸ’¡ í•˜ì§€ë§Œ, ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹Œ ê°’ì— ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´, teamê³¼ memberëŠ” 1ì°¨ ìºì‹œì— ì¡´ì¬í•¨. í•˜ì§€ë§Œ, teamì˜ ì»¬ë ‰ì…˜ì—ëŠ” memberì˜ ê°’ì„ ì €ì¥í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ, ë¹ˆ ì»¬ë ‰ì…˜ ì¶œë ¥
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);

            Member member = new Member();
            member.setUsername("member1");
            member.setTeam(team); // ì—°ê´€ ê´€ê³„ ì£¼ì¸ì—ê²Œ ê°’ì„ ì…ë ¥
            em.persist(member);

            // team.getMembers().add(member);

            // em.flush();
            // em.clear();

            Team findTeam = em.find(Team.class, team.getId()); // 1ì°¨ ìºì‹œì— ë¡œë”©
            List<Member> members = findTeam.getMembers();

            System.out.println("======");
            for (Member m : members) {
                System.out.println("m = " + m.getUsername());
            }
            System.out.println("======");

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
====== // ğŸ’¡ ì•„ë¬´ê²ƒë„ ì¶œë ¥ë˜ì§€ ì•ŠìŒ
======
Hibernate: 
    /* insert for
        hellojpa.Team */insert 
    into
        Team (name, TEAM_ID) 
    values
        (?, ?)
Hibernate: 
    /* insert for
        hellojpa.Member */insert 
    into
        Member (TEAM_ID, USERNAME, MEMBER_ID) 
    values
        (?, ?, ?)
```

   - ë˜í•œ, í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±ì‹œì—ë„ ë¬¸ì œ ë°œìƒ
     + í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” JPA ì—†ì´, ìˆœìˆ˜ ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ëŠ” ê²½ìš° ì¡´ì¬í•˜ëŠ”ë°, ê°ì²´ ê´€ê³„ë¥¼ ìƒê°í•˜ë©´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì— ëŒ€í•´ì„œëŠ” ì–‘ìª½ ëª¨ë‘ ê°’ì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ ë§ìŒ

4. ğŸ’¡ğŸ’¡ğŸ’¡ ê²°ë¡  : ìˆœìˆ˜ ê°ì²´ ìƒíƒœë¥¼ ê³ ë ¤í•´ì„œ í•­ìƒ ì–‘ìª½ì— ê°’ì„ ì„¤ì • (ì–‘ë°©í–¥ ëª¨ë‘ ê°’ì„ ì„¤ì •)
   - ğŸ’¡ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ìƒì„± (N ë˜ëŠ” 1 ë‘˜ ì¤‘ ì–´ëŠ ê³³ì— ë„£ì–´ë„ ìƒê´€ ì—†ìœ¼ë‚˜, í•œ ê³³ì—ë§Œ ì„¤ì •)
   - Member Entityì— ì—°ê´€ ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ìƒì„± (ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì„¤ì •)
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.Date;

@Entity
public class Member {

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    // @Column(name = "TEAM_ID")
    // private Long teamId;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;

    ...

    public void setTeam(Team team) {
        this.team = team;
    }

    public void changeTeam(Team team) {
        this.team = team;
        team.getMembers().add(this); // ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ : í˜„ì¬ memberë¥¼ team ê°ì²´ì— ì¶”ê°€
    }
}
```
   - JpaMain
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);

            Member member = new Member();
            member.setUsername("member1");
            member.changeTeam(team); // ì—°ê´€ ê´€ê³„ ì£¼ì¸ì—ê²Œ ê°’ì„ ì…ë ¥
            em.persist(member);

            // team.getMembers().add(member); Member Entityì—ì„œ setTeamì— ì²˜ë¦¬

            em.flush();
            em.clear();

            Team findTeam = em.find(Team.class, team.getId()); // 1ì°¨ ìºì‹œì— ì¡´ì¬
            List<Member> members = findTeam.getMembers();

            System.out.println("======");
            for (Member m : members) {
                System.out.println("m = " + m.getUsername());
            }
            System.out.println("======");

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
======
m = member1
======
Hibernate: 
    /* insert for
        hellojpa.Team */insert 
    into
        Team (name, TEAM_ID) 
    values
        (?, ?)

Hibernate: 
    /* insert for
        hellojpa.Member */insert 
    into
        Member (TEAM_ID, USERNAME, MEMBER_ID) 
    values
        (?, ?, ?)
```

   - TeamEntityì— ì—°ê´€ ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ìƒì„±í•˜ëŠ” ë°©ë²• (ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì„¤ì •)
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Team {
    @Id @GeneratedValue
    @Column(name = "TEAM_ID")
    private Long id;

    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();

    ...

    public void setMembers(List<Member> members) {
        this.members = members;
    }

    public List<Member> getMembers() {
        return members;
    }

    public void addMember(Member member) { // Team í´ë˜ìŠ¤ì— ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ë¶€ì—¬
        member.setTeam(this);
        members.add(member);
    }
}
```

   - ğŸ’¡ğŸ’¡ğŸ’¡ ì–‘ë°©í–¥ ë§¤í•‘ ì‹œ ë¬´í•œ ë£¨í”„ ì¡°ì‹¬
     + ì˜ˆ) toString(), Lombok, JSON ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬
     + ğŸ’¡ğŸ’¡ğŸ’¡ ì˜ˆì‹œ) toString() : team â†” membersì˜ toStringì„ ë¬´í•œ í˜¸ì¶œ
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.Date;

@Entity
public class Member {

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    // @Column(name = "TEAM_ID")
    // private Long teamId;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;

    public Long getId() {
        return id;
    }

    public String getUsername() {
        return username;
    }

    public Team getTeam() {
        return team;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setTeam(Team team) {
        this.team = team;
    }

    public void changeTeam(Team team) {
        this.team = team;
        team.getMembers().add(this); // ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ : í˜„ì¬ memberë¥¼ team ê°ì²´ì— ì¶”ê°€
    }

    @Override
    public String toString() {
        return "Member{" +
                "id=" + id +
                ", username='" + username + '\'' +
                ", team=" + team + // team ê°ì²´ í˜¸ì¶œ
                '}';
    }
}
```

```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Team {
    @Id @GeneratedValue
    @Column(name = "TEAM_ID")
    private Long id;

    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();

    public void setId(Long id) {
        this.id = id;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setMembers(List<Member> members) {
        this.members = members;
    }

    public Long getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public List<Member> getMembers() {
        return members;
    }

    public void addMember(Member member) {
        member.setTeam(this);
        members.add(member);
    }

    @Override
    public String toString() {
        return "Team{" +
                "id=" + id +
                ", name='" + name + '\'' +
                ", members=" + members + // member ì»¬ë ‰ì…˜, ì¦‰ member ê°ì²´ í˜¸ì¶œ
                '}';
    }
}
```

   - ë”°ë¼ì„œ, Lombokì˜ toStringì˜ ê¸°ëŠ¥ì€ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ
   - JSON ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì— Entityë¥¼ ë°˜í™˜í•˜ì§€ ì•Šë„ë¡ í•  ê²ƒ (DTOë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•˜ëŠ” ê²ƒ ì¶”ì²œ)

-----
### ì •ë¦¬
-----
1. ë‹¨ë°©í–¥ ë§¤í•‘ë§Œìœ¼ë¡œë„ ì´ë¯¸ ì—°ê´€ê´€ê³„ ë§¤í•‘ì€ ì™„ë£Œ (ğŸ’¡ JPA ì„¤ê³„ëŠ” ë‹¨ë°©í–¥ ë§¤í•‘ë§Œìœ¼ë¡œ ì„¤ê³„ê°€ ì™„ë£Œ)
2. ğŸ’¡ ì–‘ë°©í–¥ ë§¤í•‘ì€ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì¡°íšŒ(ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰) ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ê²ƒ
   - ğŸ’¡ JPQLì—ì„œëŠ” ì—­ë°©í–¥ìœ¼ë¡œ íƒìƒ‰í•  ì¼ì´ ë§ìŒ
3. ğŸ’¡ ë‹¨ë°©í–¥ ë§¤í•‘ì„ ì˜ í•˜ê³ , ì–‘ë°©í–¥ì€ í•„ìš”í•  ë•Œ ì¶”ê°€í•´ë„ ë¨ (í…Œì´ë¸”ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ)
4. ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•˜ëŠ” ê¸°ì¤€
   - ğŸ’¡ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê¸°ì¤€ìœ¼ë¡œ ì—°ê´€ê´€ê³„ ì£¼ì¸ì„ ì„ íƒí•´ì„œ ì•ˆ ë¨
   - ğŸ’¡ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ ì™¸ë˜ í‚¤ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •í•´ì•¼ í•¨
