-----
### ì–‘ë°©í–¥ ë§¤í•‘
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/4a14b849-176a-4849-a31e-d0ea2ea6b273">
</div>

1. Member Entity : ë‹¨ë°©í–¥ê³¼ ë™ì¼
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.Date;

@Entity
public class Member {

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;

    ...
}
```

2. Team Entity : ì»¬ë ‰ì…˜ ì¶”ê°€
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Team {
    @Id @GeneratedValue
    @Column(name = "TEAM_ID")
    private Long id;

    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();

    ...
}
```
  - Teamì€ í•˜ë‚˜(One) â†’ MemberëŠ” ë‹¤ìˆ˜(Many) : Team Entity ê¸°ì¤€ @OneToMany
  - Memberì˜ ì–´ë– í•œ í•„ë“œì— Mappingì„ ì‹œí‚¬ ê²ƒì¸ì§€ ì†ì„± ì¶”ê°€ : mappedBy = "team"

3. ì–‘ë°©í–¥ ë§¤í•‘ (ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰)
```java
package hellojpa;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘


        try {
            // ì €ì¥
            Team team = new Team();
            team.setName("TeamA");
            em.persist(team);

            Member member = new Member();
            member.setUsername("member1");
            member.setTeam(team);
            em.persist(member);


            em.flush(); // DBë¡œ INSERT SQL ì¿¼ë¦¬ ì „ì†¡
            em.clear(); // 1ì°¨ ìºì‹œ ë‚´ìš© ì‚­ì œ

            // ì¡°íšŒ
            Member findMember = em.find(Member.class, member.getId());

            // ì–‘ë°©í–¥ ì—°ê²°ê´€ê³„ (ì—­ë°©í–¥ ì¡°íšŒ)
            List<Member> members = findMember.getTeam().getMembers();
            for (Member m : members) {
                System.out.println("m = " + m.getUsername());
            }

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}

```
  - ì‹¤í–‰ ë¡œê·¸
```
Hibernate: 
    create table Team (
        TEAM_ID bigint not null,
        name varchar(255),
        primary key (TEAM_ID)
    )

Hibernate: 
    alter table if exists Member 
       add constraint FKl7wsny760hjy6x19kqnduasbm 
       foreign key (TEAM_ID) 
       references Team

Hibernate: 
    select
        next value for Team_SEQ
Hibernate: 
    select
        next value for Member_SEQ

Hibernate: 
    /* insert for
        hellojpa.Team */insert 
    into
        Team (name, TEAM_ID) 
    values
        (?, ?)

Hibernate: 
    /* insert for
        hellojpa.Member */insert 
    into
        Member (TEAM_ID, USERNAME, MEMBER_ID) 
    values
        (?, ?, ?)

Hibernate: 
    select
        m1_0.MEMBER_ID,
        t1_0.TEAM_ID,
        t1_0.name,
        m1_0.USERNAME 
    from
        Member m1_0 
    left join
        Team t1_0 
            on t1_0.TEAM_ID=m1_0.TEAM_ID 
    where
        m1_0.MEMBER_ID=?

Hibernate: 
    select
        m1_0.TEAM_ID,
        m1_0.MEMBER_ID,
        m1_0.USERNAME 
    from
        Member m1_0 
    where
        m1_0.TEAM_ID=?

m = member1
```

-----
### ì—°ê´€ê´€ê³„ ì£¼ì¸ê³¼ mappedBy
-----
1. ğŸ’¡ ê°ì²´ì™€ í…Œì´ë¸” ê°„ì— ì—°ê´€ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´
  - ê°ì²´ ì—°ê´€ ê´€ê³„ = 2ê°œ
    + íšŒì› â†’ íŒ€ ì—°ê´€ê´€ê³„ : 1ê°œ (ë‹¨ë°©í–¥)
    + íŒ€ â†’ íšŒì› ì—°ê´€ê´€ê³„ : 1ê°œ (ë‹¨ë°©í–¥)
  - í…Œì´ë¸” ì—°ê´€ ê´€ê³„ = 1ê°œ
    + íšŒì› â†” íŒ€ì˜ ì—°ê´€ê´€ê³„ : 1ê°œ (ì–‘ë°©í–¥)

<div align="center">
<img src="https://github.com/user-attachments/assets/bc4bdec6-9f51-4837-b76b-0b599f52325e">
</div>

2. ğŸ’¡ ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹ˆë¼ ì„œë¡œ ë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œ
  - ğŸ’¡ ê°ì²´ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì°¸ì¡°í•˜ë ¤ë©´ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ 2ê°œ ë§Œë“¤ì–´ì•¼ í•¨
  - A â†’ B (a.getB())
```java
class A {
    B b;
}
```

  - B â†’ A (b.getA())
```java
class B {
    A a;
}
```

3. í…Œì´ë¸”ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„
   - í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬
   - MEMBER.TEAM_ID ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì§ (ì–‘ìª½ìœ¼ë¡œ ì¡°ì¸ ê°€ëŠ¥)

```sql
SELECT *
FROM MEMBER M
JOIN TEAM T ON M.TEAM_ID = T.TEAM_ID
```
```sql
SELECT *
FROM TEAM T
JOIN MEMBER M ON T.TEAM_ID = M.TEAM_ID
```

  - ğŸ’¡ ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•´ì•¼ í•¨
<div align="center">
<img src="https://github.com/user-attachments/assets/3aae1a73-19df-4679-8917-e8a1da28cb04">
</div>

  - ì¦‰, Memberì˜ teamìœ¼ë¡œ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ í†µí•´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê²ƒì¸ì§€, Teamì˜ membersìœ¼ë¡œ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ í†µí•´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê²ƒì¸ì§€ ê³ ë¯¼ í•„ìš”

4. ğŸ’¡ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ (Owner) - ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™
   - ê°ì²´ì˜ ë‘ ê´€ê³„ ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •
   - ğŸ’¡ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬ (ë“±ë¡, ìˆ˜ì •)
   - ğŸ’¡ ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥
   - ğŸ’¡ ì£¼ì¸ì€ mappedBy ì†ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
   - ğŸ’¡ ì£¼ì¸ì´ ì•„ë‹ˆë¼ë©´ mappedBy ì†ì„±ìœ¼ë¡œ ì£¼ì¸ ì§€ì •
   - ğŸ’¡ğŸ’¡ğŸ’¡ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ ì§€ì • (ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ : ë‹¤(N), ì™¸ë˜í‚¤ê°€ ì—†ëŠ” ê³³ : 1)
     + ğŸ’¡ ì¦‰, Nìª½ì´ ë¬´ì¡°ê±´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ (@ManyToOne : ì—°ê´€ê´€ê³„ ì£¼ì¸) 
     + ğŸ’¡ ì¦‰, 1ìª½ì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹˜ (@OneToMany : ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹˜) - mappedBy
     + ğŸ’¡ ì—¬ê¸°ì„œëŠ” Member.teamì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
<div align="center">
<img src="https://github.com/user-attachments/assets/b6f2f0fb-8eef-4c39-a258-5fb3ab7aae39">
</div>
