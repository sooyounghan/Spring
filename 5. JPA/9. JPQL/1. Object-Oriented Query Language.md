-----
### ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´
-----
1. JPAëŠ” ë‹¤ì–‘í•œ ì¿¼ë¦¬ ë°©ë²• ì§€ì›
   - JPQL
   - JPA Criteria
   - QueryDSL
   - ë„¤ì´í‹°ë¸Œ SQL
   - JDBC API ì§ì ‘ ì‚¬ìš© / MyBatis, SpringJdbcTemplate í•¨ê»˜ ì‚¬ìš©

2. ê°€ì¥ ë‹¨ìˆœí•œ ì¡°íšŒ ë°©ë²•
   - EntityManager.find()
   - ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰(a.getB().getC())

3. JPAë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ê°ì²´ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œ
   - ğŸ’¡ ë¬¸ì œëŠ” ê²€ìƒ‰ ì¿¼ë¦¬ì¸ë°, ê²€ìƒ‰ì„ í•  ë•Œë„ í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰
   - ëª¨ë“  DB ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ê²€ìƒ‰í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥
   - ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ë°ì´í„°ë§Œ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´, ê²°êµ­ ê²€ìƒ‰ ì¡°ê±´ì´ í¬í•¨ëœ SQL í•„ìš”

4. JPAëŠ” SQLì„ ì¶”ìƒí™”í•œ JPQLì´ë¼ëŠ” ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ ì œê³µ
   - SQLê³¼ ë¬¸ë²• ìœ ì‚¬ (SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN ì§€ì›[ANSI SQL ë¬¸ë²• ëŒ€ë¶€ë¶„ ì§€ì›])
   - JPQLëŠ” ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ (SQLëŠ” ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬)

```java
package hellojpa;

import jakarta.persistence.*;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            // ê²€ìƒ‰
            List<Member> result = em.createQuery("SELECT m FROM Member m WHERE m.username LIKE '%kim%'", Member.class)
                                    .getResultList();
            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}

```
```
Hibernate: 
    /* SELECT
        m 
    FROM
        Member m 
    WHERE
        m.username LIKE '%kim%' */ select
            m1_0.MEMBER_ID,
            m1_0.city,
            m1_0.street,
            m1_0.zipcode,
            m1_0.USERNAME 
        from
            Member m1_0 
        where
            m1_0.USERNAME like '%kim%'
```
5. ğŸ’¡ ì¦‰, í…Œì´ë¸”ì´ ì•„ë‹Œ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰í•˜ëŠ” ê°ì²´ ì§€í–¥ ì¿¼ë¦¬
   - ğŸ’¡ SQLì„ ì¶”ìƒí™”í•´ì„œ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ SQLì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
   - JPQLì„ í•œë§ˆë””ë¡œ ì •ì˜ : ê°ì²´ ì§€í–¥ SQL
   - JPQLê³¼ ì‹¤í–‰ëœ SQL
```java
// ê²€ìƒ‰
String jpql = "SELECT m FROM Member m WHERE m.age > 18";

List<Member> result = em.createQuery(jpql, Member.class)
                        .getResultList();
```
```
Hibernate: 
    /* SELECT
        m 
    FROM
        Member m 
    WHERE
        m.age > 18 */ select
            m1_0.MEMBER_ID,
            m1_0.age,
            m1_0.city,
            m1_0.street,
            m1_0.zipcode,
            m1_0.USERNAME 
        from
            Member m1_0 
        where
            m1_0.age>18
```

-----
### Criteria ì†Œê°œ
-----
```java
package hellojpa;

import jakarta.persistence.*;
import jakarta.persistence.criteria.CriteriaBuilder;
import jakarta.persistence.criteria.CriteriaQuery;
import jakarta.persistence.criteria.Root;

import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction(); // íŠ¸ëœì­ì…˜
        tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

        try {
            // Criteria ì‚¬ìš© ì¤€ë¹„
            CriteriaBuilder cb = em.getCriteriaBuilder();
            CriteriaQuery<Member> query = cb.createQuery(Member.class);

            // ë£¨íŠ¸ í´ë˜ìŠ¤ (ì¡°íšŒë¥¼ ì‹œì‘í•  í´ë˜ìŠ¤)
            Root<Member> m = query.from(Member.class);

            // ì¿¼ë¦¬ ìƒì„±
            CriteriaQuery<Member> cq = query.select(m).where(cb.equal(m.get("username"), "kim"));
            List<Member> resultList= em.createQuery(cq).getResultList();

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
            e.printStackTrace();
        } finally {
            em.close();
        }
        emf.close();
    }
}
```
```
Hibernate: 
    /* <criteria> */ select
        m1_0.MEMBER_ID,
        m1_0.age,
        m1_0.city,
        m1_0.street,
        m1_0.zipcode,
        m1_0.USERNAME 
    from
        Member m1_0 
    where
        m1_0.USERNAME=?
```

1. ğŸ’¡ ì¥ì  : ë¬¸ìê°€ ì•„ë‹Œ ìë°” ì½”ë“œë¡œ JPQL ì‘ì„± ê°€ëŠ¥ (ì»´íŒŒì¼ ì‹œì  ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŒ), ë™ì  ì¿¼ë¦¬ ì‘ì„± ìš©ì´
2. JPQL ë¹Œë” ì—­í• 
3. JPA ê³µì‹ ê¸°ëŠ¥
4. ğŸ’¡ ë‹¨ì  : ë„ˆë¬´ ë³µì¡í•˜ê³  ì‹¤ìš©ì„±ì´ ì—†ìŒ
5. ë”°ë¼ì„œ, Criteria ëŒ€ì‹  QueryDSL ì‚¬ìš© ê¶Œì¥

-----
### QueryDSL ì†Œê°œ
-----
```java
// JPQL
// SELECT m FROM Member m WHERE m.age > 18
JPAFactoryQuery query = new JPAQueryFactory(em);
QMember m = QMember.member;

List<Member> list = query.selectFrom(m) // = query.select(m).from(m)
                          .where(m.age.gt(18)) // .where(m.name.like("kim")) 
                          .orderBy(m.name.desc())
                          .fetch();
```
1. ë¬¸ìê°€ ì•„ë‹Œ ìë°” ì½”ë“œë¡œ JPQL ì‘ì„± ê°€ëŠ¥
2. JPQL ë¹Œë” ì—­í• 
3. ğŸ’¡ ì»´íŒŒì¼ ì‹œì  ë¬¸ë²• ì˜¤ë¥˜ ì°¾ì„ ìˆ˜ ìˆìŒ
4. ğŸ’¡ ë™ì  ì¿¼ë¦¬ ì‘ì„±ì´ í¸ë¦¬
5. ğŸ’¡ ë‹¨ìˆœí•˜ê³  ì‰¬ìš°ë©°, ì‹¤ë¬´ì—ì„œ ì‚¬ìš© ê¶Œì¥

-----
### ë„¤ì´í‹°ë¸Œ SQL ì†Œê°œ
-----
1. JPAê°€ ì œê³µí•˜ëŠ” SQLì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥
2. JPQLë¡œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´ì ì¸ ê¸°ëŠ¥
   - ì˜ˆ) ì˜¤ë¼í´ì˜ CONNECT BY, íŠ¹ì • DBë§Œ ì‚¬ìš©í•˜ëŠ” SQL íŒíŠ¸
```java
String sql = "SELECT MEMBER_ID, CITY, STREET, ZIPCODE, USERNAME FROM MEMBER";

List<Member> resultList = em.createNativeQuery(sql, Member.class).getResultList();
```
```
Hibernate: 
    /* dynamic native SQL query */ SELECT
        MEMBER_ID,
        CITY,
        STREET,
        ZIPCODE,
        USERNAME 
    FROM
        MEMBER
```

-----
### JDBC ì§ì ‘ ì‚¬ìš©, SpringJdbcTemplate ë“±
-----
1. JPAë¥¼ ì‚¬ìš©í•˜ë©´ì„œ JDBC ì»¤ë„¥ì…˜ì„ ì§ì ‘ ì‚¬ìš©í•˜ê±°ë‚˜, ìŠ¤í”„ë§ JdbcTemplate, MyBatis ë“±ì„ í•¨ê»˜ ì‚¬ìš© ê°€ëŠ¥
2. ğŸ’¡ ë‹¨, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì ì ˆí•œ ì‹œì ì— ê°•ì œë¡œ í”ŒëŸ¬ì‹œ(Commit, Query ì „ì†¡ ì‹œ Flush ì‹¤í–‰) í•„ìš”
   - ì˜ˆ) JPAë¥¼ ìš°íšŒí•´ì„œ SQLì„ ì‹¤í–‰í•˜ê¸° ì§ì „ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ìˆ˜ë™ í”ŒëŸ¬ì‹œ
   
