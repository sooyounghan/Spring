-----
### JDBC ê°œë°œ - ì¡°íšŒ
-----
```java
import java.util.NoSuchElementException;

public Member findById(String memberId) throws SQLException {
    String sql = "SELECT * FROM MEMBER WHERE member_id = ?";

    Connection conn = null;
    PreparedStatement pstmt = null;
    ResultSet rs = null;

    try {
        conn = getConnection();
        pstmt = conn.prepareStatement(sql);
        pstmt.setString(1, memberId);

        rs = pstmt.executeQuery();

        if(rs.next()) {
            Member member = new Member();
            member.setMemberId(rs.getString("member_id"));
            member.setMoney(rs.getInt("money"));
            return member;
        } else {
            throw new NoSuchElementException("Member Not Fount MemberId = " + memberId);
        }
    } catch(SQLException e) {
        log.error("Error", e);
        throw e;
    } finally {
        close(conn, pstmt, rs);
    }
}
```

1. findById() : ì¿¼ë¦¬ ì‹¤í–‰
   - String sql : ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•œ SELECT SQL ì¤€ë¹„
   - rs = pstmt.executeQuery()
     + ë°ì´í„° ë³€ê²½ : executeUpdate()
     + ë°ì´í„° ì¡°íšŒ : executeQuery()
     + ê²°ê³¼ë¥¼ ResultSetì— ë‹´ì•„ì„œ ë°˜í™˜
```java
Resultset executeQuery() throws SQLException;
```

2. ResultSet
   - ë‹¤ìŒê³¼ ê°™ì€ ë°ì´í„° êµ¬ì¡°ë¡œ, ë³´í†µ SELECT ì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ìˆœì„œëŒ€ë¡œ ë“¤ì–´ê°
     + ì˜ˆ) SELECT member_id, moneyë¼ê³  ì§€ì •í•˜ë©´, member_id, moneyë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë°ì´í„°ê°€ ì €ì¥
     + ì°¸ê³ ë¡œ SELECT * ì„ ì‚¬ìš© : í…Œì´ë¸”ì˜ ëª¨ë“  ì»¬ëŸ¼ì„ ë‹¤ ì§€ì •
   - ResultSet ë‚´ë¶€ì— ìˆëŠ” ì»¤ì„œ(Cursor)ë¥¼ ì´ë™í•´ ë‹¤ìŒ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥
   - rs.next() : ì»¤ì„œê°€ ë‹¤ìŒìœ¼ë¡œ ì´ë™
     + ìµœì´ˆì˜ ì»¤ì„œëŠ” ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì—, rs.next()ë¥¼ ìµœì´ˆ í•œ ë²ˆì€ í˜¸ì¶œí•´ì•¼ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥
     + rs.next()ì˜ ê²°ê³¼ê°€ trueì´ë©´, ì»¤ì„œì˜ ì´ë™ ê²°ê³¼ ë°ì´í„°ê°€ ìˆë‹¤ëŠ” ëœ»
     + rs.next()ì˜ ê²°ê³¼ê°€ falseì´ë©´, ë” ì´ìƒ ì»¤ì„œê°€ ê°€ë¦¬í‚¤ëŠ” ë°ì´í„°ê°€ ì—†ë‹¤ëŠ” ëœ»
   - rs.getString("member_id") : í˜„ì¬ ì»¤ì„œê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìœ„ì¹˜ì˜ member_id ë°ì´í„°ë¥¼ String íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
   - rs.getInt("money") : í˜„ì¬ ì»¤ì„œê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìœ„ì¹˜ì˜ money ë°ì´í„°ë¥¼ int íƒ€ì…ìœ¼ë¡œ ë°˜í™˜
  
3. ResultSet ê²°ê³¼ ì˜ˆì‹œ
<div align="center">
<img src="https://github.com/sooyounghan/Spring/assets/34672301/69b5dabb-abd1-41a4-a13c-dbe7020c0cc2">
</div>

  - ResultSetì˜ ê²°ê³¼ ì˜ˆì‹œëŠ” íšŒì›ì´ 2ëª… ì¡°íšŒë˜ëŠ” ê²½ìš°
  - 1-1ì—ì„œ rs.next() í˜¸ì¶œ
  - 1-2ì—ì„œ cursorê°€ ë‹¤ìŒìœ¼ë¡œ ì´ë™ (ì´ ê²½ìš°, cursorê°€ ê°€ë¦¬í‚¤ëŠ” ë°ì´í„°ê°€ ìˆìœ¼ë¯€ë¡œ true ë°˜í™˜)
  - 2-1ì—ì„œ rs.next() í˜¸ì¶œ
  - 2-2ì˜ ê²°ê³¼ë¡œ cursorê°€ ë‹¤ìŒìœ¼ë¡œ ì´ë™ (ì´ ê²½ìš°, cursorê°€ ê°€ë¦¬í‚¤ëŠ” ë°ì´í„°ê°€ ìˆìœ¼ë¯€ë¡œ true ë°˜í™˜)
  - 3-1ì—ì„œ rs.next() í˜¸ì¶œ
  - 3-2ì˜ ê²°ê³¼ë¡œ cursorê°€ ë‹¤ìŒìœ¼ë¡œ ì´ë™í•˜ì§€ë§Œ, cursor ê°€ë¦¬í‚¤ëŠ” ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ false ë°˜í™˜

4. findById()ëŠ” íšŒì› í•˜ë‚˜ë¥¼ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ëª©ì 
   - ë”°ë¼ì„œ, ì¡°íšŒ ê²°ê³¼ê°€ í•­ìƒ 1ì´ë¯€ë¡œ whileë¬¸ ëŒ€ì‹  ifë¬¸ ì‚¬ìš©
   - PKì¸ member_idë¥¼ í•­ìƒ ì§€ì •í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ
```sql
SELECT * FROM member WHERE member_id = ?
```

5. í…ŒìŠ¤íŠ¸ ì½”ë“œ
```java
package hello.jdbc.repository;

import hello.jdbc.domain.Member;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import java.sql.SQLException;

import static org.assertj.core.api.Assertions.assertThat;


@Slf4j
class MemberRepositoryV0Test {
    MemberRepositoryV0 repository = new MemberRepositoryV0();

    @Test
    void crud() throws SQLException {
        Member member = new Member("memberV0", 10000);
        repository.save(member);

        // findById
        Member findMember = repository.findById(member.getMemberId());
        log.info("findMember={}", findMember);
        assertThat(findMember).isEqualTo(member);
    }
}
```
<div align="center">
<img src="https://github.com/sooyounghan/Spring/assets/34672301/0af92390-8ffa-419e-be95-ad53475d02be">
</div>

  - íšŒì›ì„ ë“±ë¡í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë°”ë¡œ ì¡°íšŒí•´ì„œ í™•ì¸
  - ğŸ’¡ ì°¸ê³ ë¡œ ì‹¤í–‰ ê²°ê³¼ì— member ê°ì²´ì˜ ì°¸ì¡° ê°’ì´ ì•„ë‹ˆë¼ ì‹¤ì œ ë°ì´í„°ê°€ ë³´ì´ëŠ” ì´ìœ ëŠ” Lombokì˜ @Dataê°€ toString()ì„ ì ì ˆíˆ ì˜¤ë²„ë¼ì´ë”©í•´ì„œ ë³´ì—¬ì£¼ê¸° ë•Œë¬¸ì„
<div align="center">
<img src="https://github.com/sooyounghan/Spring/assets/34672301/cbe8f4a7-70a9-4db1-be90-59095ddff272">
</div>

  - ğŸ’¡ isEqualTo() : findMember.equals(member)ë¥¼ ë¹„êµ (memberì™€ findMemberëŠ” ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤)
    + ğŸ’¡ ê²°ê³¼ê°€ ì°¸ì¸ ì´ìœ ëŠ” Lombokì˜ @DataëŠ” í•´ë‹¹ ê°ì²´ì˜ ëª¨ë“  í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ equals()ë¥¼ ì˜¤ë²„ë¼ì´ë”© í–ˆê¸° ë•Œë¬¸ì„ (member.equals(findMember) true : Lombokìœ¼ë¡œ í†µí•´ equals ì¬ì •ì˜)
  - ì´ í…ŒìŠ¤íŠ¸ëŠ” 2ë²ˆ ì‹¤í–‰í•˜ë©´ PK ì¤‘ë³µ ì˜¤ë¥˜ ë°œìƒ (ì´ ê²½ìš°, DELETE FROM member ì¿¼ë¦¬ë¡œ ë°ì´í„°ë¥¼ ì‚­ì œí•œ ë‹¤ìŒ ì‹¤í–‰)

```
org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_8 ON PUBLIC.MEMBER(MEMBER_ID) VALUES 9"; SQL statement:
```
