-----
### 데이터베이스 테이블 생성
-----
1. H2 데이터베이스 접근해 item 테이블 생성
```sql
DROP TABLE IF EXISTS item CASCADE;

CREATE TABLE item (
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY,
    item_name   VARCHAR(10),
    price       INTEGER,
    quantity    INTEGER,
    PRIMARY KEY(id)
);
```
  - GENERATED BY DEFAULT AS IDENTITY
    + IDENTITY 전략이라고 하는데, 기본 키 생성을 데이터베이스에 위임하는 것
    + MySQL의 AUTO_INCREMENT와 같은 방법
    + 여기서 PK로 사용되는 id는 직접 지정하는 것이 아닌 비워두고 저장하면 됨
    + 그러면, 데이터베이스가 순서대로 증가하는 값을 사용해서 넣어줌

2. 테이블 생성 후, 등록 쿼리 및 조회
```sql
INSERT INTO item(item_name, price, quantity) VALUES ('ItemTest', 10000, 10);
```
```sql
SELECT * FROM item;
```
  - 실행하면 데이터베이스가 생성한 id값을 포함해서 등록한 데이터가 잘 저장되어 있는 것 확인 가능

-----
### 💡 권장하는 식별자 선택 전략
-----
1. 데이터베이스 기본키 3가지 만족 조건
   - NULL 값을 허용하지 않음
   - 유일해야 함
   - 변해선 안 됨

2. 💡 테이블의 기본 키를 선택하는 2가지 전략
   - 자연 키 (Natural Key)
     + 비즈니스에 의미가 있는 키
     + 예) 주민등록번호, 이메일, 전화번호

  - 대리 키 (Surrogate Key) = 대체 키 (Alternate Key)
     + 비즈니스와 관련 없는 임의로 만들어진 키
     + 예) Oracle의 Sequence, MySQL의 AUTO_INCREMENT, IDENTITY, 키 생성 테이블 사용

3. 💡 자연 키보다는 대리 키를 권장
   - 자연 키와 대리 키 중 되도록 대리 키 사용을 권장
   - 예를 들어, 자연 키인 전화번호를 기본 키로 한다면, 그 번호는 유일할 수 있지만, 전화번호가 있을 수 있지만, 없을 수도 있고, 변경될 수 있음
   - 따라서, 기본 키로 적당하지 않음
   - 문제는, 주민등록번호처럼 그럴듯하게 보이는 값
   - 이러한 값은 NULL이 아니고 유일하며, 변하지 않는다는 3가지 조건을 모두 만족하는 것 같아보임
   - 하지만, 현실과 비즈니스 규칙은 쉽게 변함 (주민등록번호 또한 여러 가지 이유로 변경될 수도 있음)

4. 💡 비즈니스 환경은 언젠가 변함
   - 레거시 시스템을 유지보수 하다가 회원 테이블에 주민등록번호가 기본 키로 잡혀 있는 경우
   - 회원과 관련된 수 많은 테이블에 조인을 위해 주민등록번호를 외래 키로 가지고 있었고, 심지어 자식 테이블의 자식 테이블까지 주민 등록 번호가 내려가 있는 경우
   - 문제는, 정부 정책이 변경되면서 법적으로 주민등록번호를 저장할 수 없게 되었음
   - 결국, 데이터베이스 테이블은 물론이고 수많은 애플리케이션 로직을 수정해야 함
   - 만약, 데이터베이스를 처음 설계했을 때 부터 자연 키인 주민등록번호 대신 비즈니스와 관련 없는 대리 키를 사용했다면, 수정할 부분이 많지는 않았을 것
   - 💡 기본 키의 조건을 현재는 물론이고 미래까지 충족할 자연키를 찾는 것은 쉽지 않음
   - 💡 대리 키는 비즈니스와 무관한 임의의 값이므로 요구사항이 변경되도 기본 키가 변경되는 일은 드뭄
   - 💡 대리 키를 기본 키로 사용하되, 주민 등록 번호나 이메일처럼 자연 키의 후보가 되는 컬럼들은 필요에 따라 유니크 인덱스를 설정해서 사용하는 것 권장
   - 💡 참고로, JPA는 모든 엔티티의 일관된 방식으로 대리 키 사용 권장
   - 비즈니스 요구 사항은 계속 변하는데 테이블은 한 번 정의하면 변경하기 어려우므로, 대리 키가 일반적으로 좋은 선택
