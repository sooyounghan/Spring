-----
### ğŸ’¡ íŠ¸ëœì­ì…˜ AOP ì£¼ì˜ ì‚¬í•­ - í”„ë¡ì‹œ ë‚´ë¶€ í˜¸ì¶œ
-----
1. @Transactionalì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ì˜ íŠ¸ëœì­ì…˜ AOPê°€ ì ìš©
2. íŠ¸ëœì­ì…˜ AOPëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡ì‹œ ë°©ì‹ì˜ AOPë¥¼ ì‚¬ìš©
3. ğŸ’¡ @Transactionalì„ ì ìš©í•˜ë©´ í”„ë¡ì‹œ ê°ì²´ê°€ ìš”ì²­ì„ ë¨¼ì € ë°›ì•„ì„œ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ê³ , ì‹¤ì œ ê°ì²´ë¥¼ í˜¸ì¶œ
4. ğŸ’¡ ë”°ë¼ì„œ, íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ë ¤ë©´ í•­ìƒ í”„ë¡ì‹œë¥¼ í†µí•´ ëŒ€ìƒ ê°ì²´(Target)ì„ í˜¸ì¶œ
5. ì´ë ‡ê²Œ í•´ì•¼ í”„ë¡ì‹œì—ì„œ ë¨¼ì € íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ê³ , ì´í›„ì— ëŒ€ìƒ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê²Œ ë¨
6. ğŸ’¡ ë§Œì•½, í”„ë¡ì‹œë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ëŒ€ìƒ ê°ì²´ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, AOPê°€ ì ìš©ë˜ì§€ ì•Šê³ , íŠ¸ëœì­ì…˜ë„ ì ìš©ë˜ì§€ ì•ŠìŒ

<div align="center">
<img src="https://github.com/user-attachments/assets/d05075c9-9375-4f1e-87f7-c79ea3f30941">
</div>

  - AOPë¥¼ ì ìš©í•˜ë©´ ìŠ¤í”„ë§ì€ ëŒ€ìƒ ê°ì²´ ëŒ€ì‹  í”„ë¡ì‹œë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
  - ë”°ë¼ì„œ, ìŠ¤í”„ë§ì€ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì‹œ í•­ìƒ ì‹¤ì œ ê°ì²´ ëŒ€ì‹ ì— í”„ë¡ì‹œ ê°ì²´ë¥¼ ì£¼ì…
  - í”„ë¡ì‹œ ê°ì²´ê°€ ì£¼ì…ë˜ê¸° ë–„ë¬¸ì—, ëŒ€ìƒ ê°ì²´ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ë¬¸ì œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°œìƒí•˜ì§€ ì•ŠìŒ
  - ğŸ’¡ í•˜ì§€ë§Œ, ëŒ€ìƒ ê°ì²´ ë‚´ë¶€ì—ì„œ ë©”ì„œë“œ í˜¸ì¶œì´ ë°œìƒí•˜ë©´, í”„ë¡ì‹œë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ëŒ€ìƒ ê°ì²´ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ë¬¸ì œ ë°œìƒ
  - ì´ë ‡ê²Œ ë˜ë©´, @Transactionalì´ ìˆì–´ë„ íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ì§€ ì•ŠìŒ

7. InternalCallV1Test
```java
package hello.springtx.apply;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.context.annotation.Bean;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.transaction.support.TransactionSynchronizationManager;

@Slf4j
@SpringBootTest
public class InternalCallV1Test {

    @Autowired CallService callService;

    @Test
    void printProxy() {
        log.info("callService class = {}", callService.getClass());
    }

    @Test
    void internalCall() {
        callService.internal();
    }

    @Test
    void externalCall() {
        callService.external();
    }

    @TestConfiguration
    static class InternalCallV1TestConfig {

        @Bean
        CallService callService() {
            return new CallService();
        }
    }

    @Slf4j
    static class CallService {
        public void external() {
            log.info("Call External");
            printExInfo();
            internal(); // ê°ì²´ ë‚´ë¶€ì—ì„œ íŠ¸ëœì­ì…˜ ë©”ì„œë“œ í˜¸ì¶œ
        }

        @Transactional
        public void internal() {
            log.info("Call Internal");
            printExInfo();
        }

        private void printExInfo() {
            boolean txActive = TransactionSynchronizationManager.isActualTransactionActive();
            log.info("txActive = {}", txActive);
        }
    }
}
```

8. CallService
   - external()ì€ íŠ¸ëœì­ì…˜ ì—†ìŒ
   - internal()ì€ @Transactionalì„ í†µí•´ íŠ¸ëœì­ì…˜ ì ìš©
   - ğŸ’¡ @Transactionalì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œ ê°ì²´ê°€ ë§Œë“¤ì–´ì§
   - ê·¸ë¦¬ê³  callService ë¹ˆì„ ì£¼ì… ë°›ìœ¼ë©´ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œ ê°ì²´ê°€ ëŒ€ì‹  ì£¼ì…

9. printProxy()
```java
@Test
void printProxy() {
    log.info("callService class = {}", callService.getClass());
}
```
  - ì—¬ê¸°ì„œëŠ” í…ŒìŠ¤íŠ¸ì—ì„œ callServiceë¥¼ ì£¼ì… ë°›ëŠ”ë°, í•´ë‹¹ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì¶œë ¥í•˜ë©´ CGLIBê°€ ë¶™ì€ ê²ƒ í™•ì¸ ê°€ëŠ¥
  - ì¦‰, ì›ë³¸ ê°ì²´ ëŒ€ì‹  íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ì£¼ì… ë°›ì€ ê²ƒ
```
[springtx] [    Test worker] h.springtx.apply.InternalCallV1Test      : callService class = class hello.springtx.apply.InternalCallV1Test$CallService$$SpringCGLIB$$0
```

10. internalCall() ì‹¤í–‰ : íŠ¸ëœì­ì…˜ì´ ìˆëŠ” ì½”ë“œì¸ internal() í˜¸ì¶œ
```java
@Transactional
public void internal() {
    log.info("Call Internal");
    printExInfo();
}
```
<div align="center">
<img src="https://github.com/user-attachments/assets/4538d3ff-da29-4faf-b84e-3ce983b67bdd">
</div>

  - í´ë¼ì´ì–¸íŠ¸ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì¸ callService.internal()ì„ í˜¸ì¶œ (ì—¬ê¸°ì„œëŠ” callServiceëŠ” í”„ë¡ì‹œ ê°ì²´)
  - callServiceì˜ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œê°€ í˜¸ì¶œ
  - internal() ë©”ì„œë“œì— @Transactionalì´ ë¶™ì–´ ìˆìœ¼ë¯€ë¡œ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œëŠ” íŠ¸ëœì­ì…˜ ì ìš©
  - ğŸ’¡ íŠ¸ëœì­ì…˜ ì ìš© í›„ callService ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ internal() í˜¸ì¶œ
  - ğŸ’¡ ì‹¤ì œ callServiceê°€ ì²˜ë¦¬ë¥¼ ì™„ë£Œí•˜ë©´, ì‘ë‹µì´ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œë¡œ ëŒì•„ì˜¤ê³ , íŠ¸ëœì­ì…˜ í”„ë¡ì‹œëŠ” íŠ¸ëœì­ì…˜ ì™„ë£Œ
  - ì‹¤í–‰ ë¡œê·¸ - internalCall()
```
[springtx] [    Test worker] o.s.t.i.TransactionInterceptor           : Getting transaction for [hello.springtx.apply.InternalCallV1Test$CallService.internal]
[springtx] [    Test worker] h.s.a.InternalCallV1Test$CallService     : Call Internal
[springtx] [    Test worker] h.s.a.InternalCallV1Test$CallService     : txActive = true
[springtx] [    Test worker] o.s.t.i.TransactionInterceptor           : Completing transaction for [hello.springtx.apply.InternalCallV1Test$CallService.internal]
```
  - TransactionInterceptorê°€ ë‚¨ê¸´ ë¡œê·¸ë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œê°€ íŠ¸ëœì­ì…˜ì„ ì ìš©í•œ ê²ƒ í™•ì¸ ê°€ëŠ¥
  - CallServiceê°€ ë‚¨ê¸´ tx active=true ë¡œê·¸ë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ ì ìš©ëœ ê²ƒì„ í™•ì¸ ê°€ëŠ¥

11. externalCall() ì‹¤í–‰ : íŠ¸ëœì­ì…˜ì´ ì—†ëŠ” ì½”ë“œì¸ external() í˜¸ì¶œ
```java
public void external() {
    log.info("Call External");
    printExInfo();
    internal(); // ê°ì²´ ë‚´ë¶€ì—ì„œ íŠ¸ëœì­ì…˜ ë©”ì„œë“œ í˜¸ì¶œ
}

@Transactional
public void internal() {
    log.info("Call Internal");
    printExInfo();
}
```
  - external()ì€ @Transactional ì• ë„ˆí…Œì´ì…˜ì´ ì—†ìŒ
  - ë”°ë¼ì„œ, íŠ¸ëœì­ì…˜ ì—†ì´ ì‹œì‘
  - ê·¸ëŸ°ë° ë‚´ë¶€ì—ì„œ @Transactionalì´ ìˆëŠ” internal()ì„ í˜¸ì¶œ
  - ì´ ê²½ìš°, external()ì€ íŠ¸ëœì­ì…˜ì´ ì—†ì§€ë§Œ, internal() ì—ì„œëŠ” íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì„
  - ì‹¤í–‰ ë¡œê·¸ - externalCall()
```
[springtx] [    Test worker] h.s.a.InternalCallV1Test$CallService     : Call External
[springtx] [    Test worker] h.s.a.InternalCallV1Test$CallService     : txActive = false

[springtx] [    Test worker] h.s.a.InternalCallV1Test$CallService     : Call Internal
[springtx] [    Test worker] h.s.a.InternalCallV1Test$CallService     : txActive = false
```
  - ì‹¤í–‰ ë¡œê·¸ë¥¼ ë³´ë©´ íŠ¸ëœì­ì…˜ ê´€ë ¨ ì½”ë“œê°€ ì „í˜€ ë³´ì´ì§€ ì•ŠìŒ
  - ê·¸ë¦¬ê³ , í”„ë¡ì‹œê°€ ì•„ë‹Œ ì‹¤ì œ callServiceì—ì„œ ë‚¨ê¸´ ë¡œê·¸ë§Œ í™•ì¸ë¨
  - ì¶”ê°€ë¡œ, internal() ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•œ tx active = false ë¡œê·¸ë¥¼ í†µí•´ í™•ì‹¤íˆ íŠ¸ëœì­ì…˜ì´ ìˆ˜í–‰ë˜ì§€ ì•Šì€ ê²ƒì„ í™•ì¸ ê°€ëŠ¥

12. ğŸ’¡ í”„ë¡ì‹œì™€ ë‚´ë¶€ í˜¸ì¶œ íë¦„
<div align="center">
<img src="https://github.com/user-attachments/assets/2ae03108-8999-46f0-ade7-1a7c7d300b45">
</div>

  - ğŸ’¡ í´ë¼ì´ì–¸íŠ¸ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” callService.external()ì„ í˜¸ì¶œí•˜ë©°, ì—¬ê¸°ì„œ callServiceëŠ” íŠ¸ëœì­ì…˜ í”„ë¡ì‹œ
  - callServiceì˜ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œê°€ í˜¸ì¶œ
  - external() ë©”ì„œë“œì—ëŠ” @Transactionalì´ ì—†ìœ¼ë¯€ë¡œ, íŠ¸ëœì­ì…˜ í”„ë¡ì‹œëŠ” íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ì§€ ì•ŠìŒ
  - íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ì§€ ì•Šê³ , ì‹¤ì œ callService ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ external() í˜¸ì¶œ
  - external()ì€ ë‚´ë¶€ì—ì„œ internal() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ë°, ì—¬ê¸°ì„œ ë¬¸ì œ ë°œìƒ

13. ë¬¸ì œ ë°œìƒ
    - ìë°” ì–¸ì–´ì—ì„œ ë©”ì„œë“œ ì•ì— ë³„ë„ ì°¸ì¡°ê°€ ì—†ìœ¼ë©´ ì´ëŠ” thisë¼ëŠ” ëœ»ìœ¼ë¡œ ìê¸° ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚´
    - ê²°ê³¼ì ìœ¼ë¡œ, ìê¸° ìì‹ ì˜ ë‚´ë¶€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” this.internal()ì´ ë˜ëŠ”ë°, ì—¬ê¸°ì„œ thisëŠ” ìê¸° ìì‹ ì„ ê°€ë¦¬í‚¤ë¯€ë¡œ ì‹¤ì œ ëŒ€ìƒ ê°ì²´(targer)ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëœ»í•¨
    - ğŸ’¡ ê²°ê³¼ì ìœ¼ë¡œ, ì´ëŸ¬í•œ ë‚´ë¶€ í˜¸ì¶œì€ í”„ë¡ì‹œë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ
    - ğŸ’¡ ë”°ë¼ì„œ, íŠ¸ëœì­ì…˜ì„ ì ìš©í•  ìˆ˜ ì—†ê³ , ê²°ê³¼ì ìœ¼ë¡œ targetì— ìˆëŠ” internal()ì„ ì§ì ‘ í˜¸ì¶œí•˜ê²Œ ëœ ê²ƒ

14. ğŸ’¡ í”„ë¡ì‹œ ë°©ì‹ì˜ AOP í•œê³„
   - @Transactionalë¥¼ ì‚¬ìš©í•˜ëŠ” íŠ¸ëœì­ì…˜ AOPëŠ” í”„ë¡ì‹œë¥¼ ì‚¬ìš©
   - ğŸ’¡ í•˜ì§€ë§Œ, í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë©´ ë©”ì„œë“œ ë‚´ë¶€ í˜¸ì¶œì— í”„ë¡ì‹œë¥¼ ì ìš©í•  ìˆ˜ ì—†ìŒ
   - ê°€ì¥ ë‹¨ìˆœí•œ ë°©ë²•ì€ ë‚´ë¶€ í˜¸ì¶œì„ í”¼í•˜ê¸° ìœ„í•´ internal() ë©”ì„œë“œë¥¼ ë³„ë„ì˜ í´ë˜ìŠ¤ì— ë¶„ë¦¬í•˜ëŠ” ê²ƒ

-----
### internal() ë©”ì„œë“œë¥¼ ë³„ë„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬
-----
1. InterCallV2Test
```java
package hello.springtx.apply;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.context.annotation.Bean;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.transaction.support.TransactionSynchronizationManager;

@Slf4j
@SpringBootTest
public class InternalCallV2Test {

    @Autowired CallService callService;

    @Test
    void printProxy() {
        log.info("callService class = {}", callService.getClass());
    }

    @Test
    void externalCallV2() {
        callService.external();
    }

    @TestConfiguration
    static class InternalCallV1TestConfig {

        @Bean
        CallService callService() {
            return new CallService(internalService());
        }

        @Bean
        InternalService internalService() {
            return new InternalService();
        }
    }

    @Slf4j
    @RequiredArgsConstructor
    static class CallService {

        private final InternalService internalService;

        public void external() {
            log.info("Call External");
            printExInfo();
            internalService.internal(); // ê°ì²´ ë‚´ë¶€ì—ì„œ íŠ¸ëœì­ì…˜ ë©”ì„œë“œ í˜¸ì¶œ
        }

        private void printExInfo() {
            boolean txActive = TransactionSynchronizationManager.isActualTransactionActive();
            log.info("txActive = {}", txActive);
        }
    }

    @Slf4j
    static class InternalService {
        @Transactional
        public void internal() {
            log.info("Call Internal");
            printExInfo();
        }

        private void printExInfo() {
            boolean txActive = TransactionSynchronizationManager.isActualTransactionActive();
            log.info("txActive = {}", txActive);
        }
    }
}
```

2. InternalService í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , internal() ë©”ì„œë“œ ì´ë™ (ë©”ì„œë“œ ë‚´ë¶€ í˜¸ì¶œì—ì„œ ì™¸ë¶€ í˜¸ì¶œë¡œ ë³€ê²½)
3. CallServiceì—ëŠ” íŠ¸ëœì­ì…˜ ê´€ë ¨ ì½”ë“œê°€ ì—†ìœ¼ë¯€ë¡œ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œê°€ ì ìš©ë˜ì§€ ì•ŠìŒ
4. InternalServiceì—ëŠ” íŠ¸ëœì­ì…˜ ê´€ë ¨ ì½”ë“œê°€ ìˆìœ¼ë¯€ë¡œ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œ ì ìš©
5. ì‹¤ì œ í˜¸ì¶œ íë¦„
<div align="center">
<img src="https://github.com/user-attachments/assets/8d4736af-1db4-4822-ac81-3a86d8545a1a">
</div>

  - í´ë¼ì´ì–¸íŠ¸ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” callService.external() í˜¸ì¶œ
  - callServiceëŠ” ì‹¤ì œ callService ê°ì²´ ì¸ìŠ¤í„´ìŠ¤
  - callServiceëŠ” ì£¼ì… ë°›ì€ internalService.internal() í˜¸ì¶œ
  - internalServiceëŠ” íŠ¸ëœì­ì…˜ í”„ë¡ì‹œì´ë©°, internal() ë©”ì„œë“œì— @Transactionalì´ ë¶™ì–´ìˆìœ¼ë¯€ë¡œ, íŠ¸ëœì­ì…˜ í”„ë¡ì‹œëŠ” íŠ¸ëœì­ì…˜ ì ìš©
  - íŠ¸ëœì­ì…˜ ì ìš© í›„ ì‹¤ì œ internalService ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ internal() í˜¸ì¶œ

6. ì‹¤í–‰ ë¡œê·¸ - externalCallV2()
```
[springtx] [    Test worker] h.s.a.InternalCallV2Test$CallService     : Call External
[springtx] [    Test worker] h.s.a.InternalCallV2Test$CallService     : txActive = false

[springtx] [    Test worker] o.s.t.i.TransactionInterceptor           : Getting transaction for [hello.springtx.apply.InternalCallV2Test$InternalService.internal]
[springtx] [    Test worker] h.springtx.apply.InternalCallV2Test      : Call Internal
[springtx] [    Test worker] h.springtx.apply.InternalCallV2Test      : txActive = true
[springtx] [    Test worker] o.s.t.i.TransactionInterceptor           : Completing transaction for [hello.springtx.apply.InternalCallV2Test$InternalService.internal]
```
  - TransactionInterceptorë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ ì ìš©ë˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥
  - InternalServiceì˜ tx active = true ë¡œê·¸ë¥¼ í†µí•´ internal() í˜¸ì¶œì—ì„œ íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥
  - ğŸ’¡ ì‹¤ë¬´ì—ì„œëŠ” ì´ë ‡ê²Œ ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ë°©ë²• ì£¼ë¡œ ì‚¬ìš©

-----
### public ë©”ì„œë“œë§Œ íŠ¸ëœì­ì…˜ ì ìš©
-----
1. ğŸ’¡ ìŠ¤í”„ë§ íŠ¸ëœì­ì…˜ AOP ê¸°ëŠ¥ì€ public ë©”ì„œë“œì—ë§Œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ë„ë¡ ê¸°ë³¸ ì„¤ì •ì´ ë˜ì–´ ìˆìŒ
2. ë”°ë¼ì„œ, protected, private, package-visible(default)ì—ëŠ” íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ì§€ ì•ŠìŒ
   - í•˜ì§€ë§Œ, protected, package-visibleë„ ì™¸ë¶€ì—ì„œ í˜¸ì¶œì´ ê°€ëŠ¥
   - ì´ëŠ”, í”„ë¡ì‹œ ë‚´ë¶€ í˜¸ì¶œê³¼ ë¬´ê´€í•˜ê³ , ìŠ¤í”„ë§ì´ ë§‰ì•„ë‘” ê²ƒ
3. ìŠ¤í”„ë§ì´ publicì—ë§Œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ëŠ” ì´ìœ 
```java
@Transactional
public class Hello {
    public method1(); // public

    method2(); // package-visible (default)

    protected method3(); // protected

    private method4(); // private 
```
  - ğŸ’¡ ì´ë ‡ê²Œ í´ë˜ìŠ¤ ë ˆë²¨ì— íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ë©´, ëª¨ë“  ë©”ì„œë“œì— íŠ¸ëœì­ì…˜ì´ ê±¸ë¦´ ìˆ˜ ìˆìŒ
  - ğŸ’¡ ê·¸ëŸ¬ë©´, íŠ¸ëœì­ì…˜ì„ ì˜ë„í•˜ì§€ ì•ŠëŠ” ê³³ ê¹Œì§€ íŠ¸ëœì­ì…˜ì´ ê³¼ë„í•˜ê²Œ ì ìš©
  - ğŸ’¡ íŠ¸ëœì­ì…˜ì€ ì£¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì‹œì‘ì ì— ê±¸ê¸° ë•Œë¬¸ì—, ëŒ€ë¶€ë¶„ ì™¸ë¶€ì— ì—´ì–´ì¤€ ê³³(public)ì„ ì‹œì‘ì ìœ¼ë¡œ ì‚¬ìš©
  - ì´ëŸ° ì´ìœ ë¡œ public ë©”ì„œë“œì—ë§Œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ë„ë¡ ì„¤ì •
  - ì•ì„œ ì‹¤í–‰í•œ ì½”ë“œë¥¼ package-visibleë¡œ ë³€ê²½í•˜ë©´ ì ìš©ë˜ì§€ ì•ŠìŒ
  - ğŸ’¡ ì°¸ê³ ë¡œ, publicì´ ì•„ë‹Œ ê³³ì— @Transacitonalì´ ë¶™ì–´ìˆìœ¼ë©´, ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šê³ , íŠ¸ëœì­ì…˜ ì ìš©ë§Œ ë¬´ì‹œ
  - ğŸ’¡ ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0ë¶€í„°ëŠ” protected, package-visible(default ì ‘ê·¼ì œí•œì)ì—ë„ íŠ¸ëœì­ì…˜ ì ìš©

-----
### ì´ˆê¸°í™” ì‹œì 
-----
1. ìŠ¤í”„ë§ ì´ˆê¸°í™” ì‹œì ì— íŠ¸ëœì­ì…˜ AOPê°€ ì ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
2. ì˜ˆì œ ì½”ë“œ
```java
package hello.springtx.apply;

import jakarta.annotation.PostConstruct;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;
import org.springframework.boot.context.event.ApplicationReadyEvent;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.context.annotation.Bean;
import org.springframework.context.event.EventListener;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.transaction.support.TransactionSynchronizationManager;

@SpringBootTest
public class InitTxTest {

    @Test
    void go() {
        // ì´ˆê¸°í™” ì½”ë“œëŠ” ìŠ¤í”„ë§ì´ ì´ˆê¸°í™” ì‹œì ì— í˜¸ì¶œ
    }

    @TestConfiguration
    static class InitTxTestConfig {
        @Bean
        Hello hello() {
            return new Hello();
        }
    }

    @Slf4j
    static class Hello {

        @PostConstruct
        @Transactional
        public void initV1() {
            boolean isActive = TransactionSynchronizationManager.isActualTransactionActive();
            log.info("Hello Init @PostConstruct tx active = {}", isActive);
        }

        @EventListener(ApplicationReadyEvent.class)
        @Transactional
        public void initV2() {
            boolean isActive = TransactionSynchronizationManager.isActualTransactionActive();
            log.info("Hello Init ApplicationReadyEvent tx active = {}", isActive);
        }
    }
}
```

3. ì´ˆê¸°í™” ì½”ë“œ(ì˜ˆ) @PostConstruct)ì™€ @Trnasactionalì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ì§€ ì•ŠìŒ
```java
@PostConstruct
@Transactional
public void initV1() {
    boolean isActive = TransactionSynchronizationManager.isActualTransactionActive();
    log.info("Hello Init @PostConstruct tx active = {}", isActive);
}
```
  - ğŸ’¡ ì´ˆê¸°í™” ì½”ë“œ(@PostConstruct)ê°€ ë¨¼ì € í˜¸ì¶œë˜ê³ , ê·¸ ë‹¤ìŒ íŠ¸ëœì­ì…˜ AOPê°€ ì ìš©ë¨
  - ğŸ’¡ ë”°ë¼ì„œ, ì´ˆê¸°í™” ì‹œì ì—ëŠ” í•´ë‹¹ ë©”ì„œë“œì— íŠ¸ëœì­ì…˜ íšë“í•  ìˆ˜ ì—†ìŒ
  - initV1 ê´€ë ¨ ë¡œê·¸
```
[springtx] [    Test worker] hello.springtx.apply.InitTxTest$Hello    : Hello Init @PostConstruct tx active = false
```

4. ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•ì€ ApplicationReadyEvent ì´ë²¤íŠ¸ ìƒìš”
```java
@EventListener(ApplicationReadyEvent.class)
@Transactional
public void initV2() {
    boolean isActive = TransactionSynchronizationManager.isActualTransactionActive();
    log.info("Hello Init ApplicationReadyEvent tx active = {}", isActive);
}
```
  - ğŸ’¡ ì´ ì´ë²¤íŠ¸ëŠ” íŠ¸ëœì­ì…˜ AOPë¥¼ í¬í•¨í•œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì™„ì „íˆ ìƒì„±ë˜ê³  ë‚œ ë‹¤ìŒì— ì´ë²¤íŠ¸ê°€ ë¶™ì€ ë©”ì„œë“œë¥¼ í˜¸ì¶œ
  - ë”°ë¼ì„œ, init2()ëŠ” íŠ¸ëê°œì…˜ì´ ì ìš©ëœ ê²ƒ í™•ì¸ ê°€ëŠ¥
  - init2() - ApplicationReadyEvent ì´ë²¤íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ì½”ë“œ
```
[springtx] [    Test worker] hello.springtx.apply.InitTxTest$Hello    : Hello Init @PostConstruct tx active = false
...
[springtx] [    Test worker] o.s.t.i.TransactionInterceptor           : Getting transaction for [hello.springtx.apply.InitTxTest$Hello.initV2]
[springtx] [    Test worker] hello.springtx.apply.InitTxTest$Hello    : Hello Init ApplicationReadyEvent tx active = true
[springtx] [    Test worker] o.s.t.i.TransactionInterceptor           : Completing transaction for [hello.springtx.apply.InitTxTest$Hello.initV2]
```
