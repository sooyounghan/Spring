-----
### ìŠ¤í”„ë§ ì˜ˆì™¸ ì¶”ìƒí™”
-----
1. ìŠ¤í”„ë§ì€ ë°ì´í„° ì ‘ê·¼ê³¼ ê´€ë ¨ëœ ì˜ˆì™¸ë¥¼ ì¶”ìƒí™”í•´ì„œ ì œê³µ
2. ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ ê³„ì¸µ (ê·¸ë¦¼ ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ì¼ë¶€ ê³„ì¸µ ìƒëµ)
<div align="center">
<img src="https://github.com/sooyounghan/Spring/assets/34672301/d7c8e010-eeff-4009-9e81-8c2e4df6c646">
</div>

  - ìŠ¤í”„ë§ì€ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì— ëŒ€í•œ ìˆ˜ì‹­ ê°€ì§€ ì˜ˆì™¸ë¥¼ ì •ë¦¬í•´ì„œ ì¼ê´€ëœ ì˜ˆì™¸ ê³„ì¸µ ì œê³µ
  - ê° ì˜ˆì™¸ëŠ” íŠ¹ì • ê¸°ìˆ ì— ì¢…ì†ì ì´ì§€ ì•Šê²Œ ì„¤ê³„
  - ë”°ë¼ì„œ, ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œë„ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë¨
  - ì˜ˆë¥¼ ë“¤ì–´ì„œ, JDBC ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë“ , JPA ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë“  ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë¨
  - JDBCë‚˜ JPAë¥¼ ì‚¬ìš©í•  ë•Œ, ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ˆì™¸ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì—­í• ë„ ìŠ¤í”„ë§ì´ ì œê³µ
  - ì˜ˆì™¸ì˜ ìµœê³  ìƒìœ„ëŠ” org.springframework.dao.DataAccessExceptionìœ¼ë¡œ, Runtime ì˜ˆì™¸ë¥¼ ìƒì†ë°›ì•˜ê¸° ë•Œë¬¸ì—, ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì˜ ëª¨ë“  ì˜ˆì™¸ëŠ” Runtime ì˜ˆì™¸
  - DataAccessExceptionì€ í¬ê²Œ 2ê°€ì§€ë¡œ êµ¬ë¶„í•˜ëŠ”ë°, NotTransient ì˜ˆì™¸ì™€ Transient ì˜ˆì™¸
    + TransientëŠ” ì¼ì‹œì ì´ë¼ëŠ” ëœ»ìœ¼ë¡œ, ì´ í•˜ìœ„ ì˜ˆì™¸ëŠ” ë™ì¼í•œ SQLì„ ë‹¤ì‹œ ì‹œë„í–ˆì„ ë•Œ, ì„±ê³µí•  ê°€ëŠ¥ì„±ì´ ìˆìŒ
      * ì˜ˆë¥¼ ë“¤ì–´, ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒ, ë½ê³¼ ê°™ì€ ì˜¤ë¥˜ë“¤ì´ë©°, ì´ëŸ° ì˜¤ë¥˜ë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœê°€ ì¢‹ì•„ì§€ê±°ë‚˜, ë½ì´ í’€ë ¸ì„ ë•Œ ë‹¤ì‹œ ì‹œë„í•˜ë©´ ì„±ê³µí•  ìˆ˜ ìˆìŒ
    + NotTransientëŠ” ì¼ì‹œì ì´ì§€ ì•Šë‹¤ëŠ” ëœ»ìœ¼ë¡œ, ê°™ì€ SQLì„ ê·¸ëŒ€ë¡œ ë°˜ë³µí•´ì„œ ì‹¤í–‰í•˜ë©´ ì‹¤íŒ¨
      * SQL ë¬¸ë²• ì˜¤ë¥˜, ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ìœ„ë°° ë“± ì¡´ì¬

3. ìŠ¤í”„ë§ ë©”ë‰´ì–¼ì— ëª¨ë“  ì˜ˆì™¸ê°€ ì •ë¦¬ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì—, ì½”ë“œë¥¼ ì§ì ‘ ì—´ì–´ í™•ì¸í•´ë³´ëŠ” ê²ƒì´ í•„ìš”

-----
### ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ˆì™¸ ë³€í™˜ê¸°
-----
1. ìŠ¤í”„ë§ì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ ìŠ¤í”„ë§ì´ ì •ì˜í•œ ì˜ˆì™¸ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” ë³€í™˜ê¸° ì œê³µ
2. SpringExceptionTranslatorTest
```java
package hello.jdbc.exception.translator;

import hello.jdbc.connection.ConnectionConst;
import lombok.extern.slf4j.Slf4j;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.jdbc.datasource.DriverManagerDataSource;

import javax.sql.DataSource;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import static hello.jdbc.connection.ConnectionConst.*;
import static org.assertj.core.api.Assertions.*;

@Slf4j
public class SpringExceptionTranslatorTest {

    DataSource dataSource;

    @BeforeEach
    void init() {
        dataSource = new DriverManagerDataSource(URL, USERNAME, PASSWORD);
    }

    @Test
    void sqlExceptionErrorCode() {
        String sql = "SELECT bad grammar";

        try {
            Connection conn = dataSource.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql);
            pstmt.executeQuery();
        } catch (SQLException e) {
            assertThat(e.getErrorCode()).isEqualTo(42122);
            int errorCode = e.getErrorCode();
            log.info("errorCode={}", errorCode);
            log.info("error", e);
        }
    }
}
```
  - SQL ErrorCodeë¥¼ ì§ì ‘ í™•ì¸í•˜ëŠ” ë°©ë²•
  - ì´ë ‡ê²Œ ì§ì ‘ ì˜ˆì™¸ë¥¼ í™•ì¸í•˜ê³  í•˜ë‚˜ì”© ìŠ¤í”„ë§ì´ ë§Œë“¤ì–´ì¤€ ì˜ˆì™¸ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì€ í˜„ì‹¤ì„±ì´ ì—†ìŒ
  - ì´ë ‡ê²Œ í•˜ë ¤ë©´, í•´ë‹¹ ì˜¤ë¥˜ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  ìŠ¤í”„ë§ì˜ ì˜ˆì™¸ ì²´ê³„ì— ë§ì¶”ì–´ ì˜ˆì™¸ë¥¼ ì§ì ‘ ë³€í™˜í•´ì•¼ í•  ê²ƒ
  - ë˜í•œ, ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ì˜¤ë¥˜ ì½”ë“œê°€ ë‹¤ë¥´ë‹¤ëŠ” ì ë„ í•´ê²°í•´ì•¼ í•¨
  - ë”°ë¼ì„œ, ìŠ¤í”„ë§ì€ ì˜ˆì™¸ ë³€í™˜ê¸° ì œê³µ

3. SpringExceptionTranslatorTest - ì¶”ê°€ : exceptionTranslator
```java
package hello.jdbc.exception.translator;

import hello.jdbc.connection.ConnectionConst;
import lombok.extern.slf4j.Slf4j;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.dao.DataAccessException;
import org.springframework.jdbc.BadSqlGrammarException;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator;

import javax.sql.DataSource;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import static hello.jdbc.connection.ConnectionConst.*;
import static org.assertj.core.api.Assertions.*;

@Slf4j
public class SpringExceptionTranslatorTest {

    DataSource dataSource;

    @BeforeEach
    void init() {
        dataSource = new DriverManagerDataSource(URL, USERNAME, PASSWORD);
    }

    @Test
    void sqlExceptionErrorCode() {
        String sql = "SELECT bad grammar";

        try {
            Connection conn = dataSource.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql);
            pstmt.executeQuery();
        } catch (SQLException e) {
            assertThat(e.getErrorCode()).isEqualTo(42122);
            int errorCode = e.getErrorCode();
            log.info("errorCode={}", errorCode);
            log.info("error", e);
        }
    }

    @Test
    void exceptionTranslator() {
        String sql = "SELECT bad grammar";

        try {
            Connection conn = dataSource.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql);
            pstmt.executeQuery();
        } catch(SQLException e) {
            assertThat(e.getErrorCode()).isEqualTo(42122);

            SQLErrorCodeSQLExceptionTranslator exTranslator = new SQLErrorCodeSQLExceptionTranslator(dataSource);

            // BadSqlGrammarException
            // org.springframework.support.sql-error-codes.xml
            DataAccessException resultEx = exTranslator.translate("SELECT", sql, e);
            log.info("resultEx", resultEx);
            assertThat(resultEx.getClass()).isEqualTo(BadSqlGrammarException.class);
        }
    }
}
```
  - ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” SQL ì˜ˆì™¸ ë³€í™˜ê¸°
```java
SQLErrorCodeSQLExceptionTranslator exTranslator = new SQLErrorCodeSQLExceptionTranslator(dataSource);
DataAccessException resultEx = exTranslator.translate("SELECT", sql, e);
```
  - translate() ë©”ì„œë“œì˜ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ì½ì„ ìˆ˜ ìˆëŠ” ì„¤ëª…ì´ê³ , ë‘ ë²ˆì§¸ëŠ” ì‹¤í–‰í•œ sql, ë§ˆì§€ë§‰ì€ ë°œìƒëœ SQLException ì „ë‹¬
  - ì´ë ‡ê²Œ í•¨ìœ¼ë¡œ, ì ì ˆí•œ ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ ì˜ˆì™¸ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜
  - ì˜ˆì œì—ì„œëŠ” SQL ë¬¸ë²•ì´ ì˜ëª»ë˜ì—ˆìœ¼ë¯€ë¡œ BadSqlGrammarExceptionì„ ë°˜í™˜ë˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥
    + ëˆˆì— ë³´ì´ëŠ” ë°˜í™˜ íƒ€ì…ì€ ìµœìƒìœ„ íƒ€ì…ì¸ DataAccessExceptionì´ì§€ë§Œ, ì‹¤ì œë¡œëŠ” BadSqlGrammarException ì˜ˆì™¸ê°€ ë°˜í™˜
    + ì°¸ê³ ë¡œ, BalSqlGrammarExceptionì€ ìµœìƒìœ„ íƒ€ì…ì¸ DataAccessExceptionì„ ìƒì† ë°›ì•„ ë§Œë“¤ì–´ì§

4. ê° DBë§ˆë‹¤ SQL ErrorCodeëŠ” ë‹¤ë¥¸ë°, ìŠ¤í”„ë§ì€ ì–´ë–»ê²Œ DBê°€ ì œê³µí•˜ëŠ” SQL ErrorCodeê¹Œì§€ ê³ ë ¤í•´ì„œ ì˜ˆì™¸ë¥¼ ë³€í™˜í• ê¹Œ?
   - sql-error-codes.xml (org.springframework.support.sql-error-codes.xml)
```xml
<bean id="H2" class="org.springframework.jdbc.support.SQLErrorCodes"> 
    <property name="badSqlGrammarCodes">
        <value>42000,42001,42101,42102,42111,42112,42121,42122,42132</value> 
    </property>
    <property name="duplicateKeyCodes"> 
        <value>23001,23505</value>
    </property> 
</bean>

<bean id="MySQL" class="org.springframework.jdbc.support.SQLErrorCodes"> 
    <property name="badSqlGrammarCodes">
        <value>1054,1064,1146</value> 
    </property>
    <property name="duplicateKeyCodes">
        <value>1062</value> 
    </property>
</bean>
```

  - ìŠ¤í”„ë§ SQL ì˜ˆì™¸ ë³€í™˜ê¸°ëŠ” SQL ErrorCodeë¥¼ ì´ íŒŒì¼ì— ëŒ€ì…í•´ì„œ ì–´ë–¤ ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¡œ ì „í™˜í• ì§€ ì°¾ì•„ëƒ„
  - ì˜ˆë¥¼ ë“¤ì–´ H2 ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ 42000ì´ ë°œìƒí•˜ë©´ badSqlGrmmarCodesì´ê¸° ë•Œë¬¸ì— BadSqlGrammarException ë°˜í™˜
  - í•´ë‹¹ íŒŒì¼ì„ í™•ì¸í•´ë³´ë©´, 10ê°œ ì´ìƒì˜ ëŒ€ë¶€ë¶„ì˜ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§€ì›í•˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥

5. ì •ë¦¬
   - ìŠ¤í”„ë§ì€ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì— ëŒ€í•œ ì¼ê´€ëœ ì˜ˆì™¸ ì¶”ìƒí™” ì œê³µ
   - ìŠ¤í”„ë§ì€ ì˜ˆì™¸ ë³€í™˜ê¸°ë¥¼ í†µí•´ SQLExceptionê³¼ ErrorCodeì— ë§ëŠ” ì ì ˆí•œ ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¡œ ë³€í™˜í•´ì¤Œ
   - ë§Œì•½, ì„œë¹„ìŠ¤, ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë©´ íŠ¹ì • ê¸°ìˆ ì— ì¢…ì†ì ì¸ SQLException ê°™ì€ ì˜ˆì™¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë¨
   - ìŠ¤í”„ë§ ì˜ˆì™¸ ì¶”ìƒí™” ë•ë¶„ì— íŠ¹ì • ê¸°ìˆ ì— ì¢…ì†ì ì´ì§€ ì•Šê²Œ ë¨
   - ì¦‰, JDBCì—ì„œ JPAê°™ì€ ê¸°ìˆ ë¡œ ë³€ê²½ë˜ì–´ë„ ì˜ˆì™¸ë¡œ ì¸í•œ ë³€ê²½ ìµœì†Œí™” ê°€ëŠ¥
   - ë˜í•œ, í–¥í›„ JDBCì—ì„œ JPAë¡œ êµ¬í˜„ ê¸°ìˆ ì„ ë³€ê²½í•˜ë”ë¼ë„, ìŠ¤í”„ë§ì€ JPA ì˜ˆì™¸ë¥¼ ì ì ˆí•œ ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¡œ ë³€í™˜í•´ì¤Œ
   - ë¬¼ë¡ , ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ìŠ¤í”„ë§ì— ëŒ€í•œ ê¸°ìˆ  ì¢…ì†ì„±ì€ ë°œìƒ
     + ìŠ¤í”„ë§ì— ëŒ€í•œ ê¸°ìˆ  ì¢…ì†ì„±ê¹Œì§€ ì™„ì „íˆ ì œê±°í•˜ë ¤ë©´ ì˜ˆì™¸ë¥¼ ëª¨ë‘ ì§ì ‘ ì •ì˜í•˜ê³  ì˜ˆì™¸ ë³€í™˜ë„ ì§ì ‘í•˜ë©´ ë˜ì§€ë§Œ, ì‹¤ìš©ì  ë°©ë²•ì€ ì•„ë‹˜

-----
### ìŠ¤í”„ë§ ì˜ˆì™¸ ì¶”ìƒí™” ì ìš©
-----
1. MemberRepositoryV4_2
```java
package hello.jdbc.repository;

import hello.jdbc.domain.Member;
import hello.jdbc.repository.ex.MyDbException;
import lombok.extern.slf4j.Slf4j;
import org.springframework.jdbc.datasource.DataSourceUtils;
import org.springframework.jdbc.support.JdbcUtils;
import org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator;
import org.springframework.jdbc.support.SQLExceptionTranslator;

import javax.sql.DataSource;
import java.sql.*;
import java.util.NoSuchElementException;

/**
 * SQLExceptionTranslator ì¶”ê°€
 */

@Slf4j
public class MemberRepositoryV4_2 implements MemberRepository {
    private final DataSource dataSource;
    private final SQLExceptionTranslator exTranslator;

    public MemberRepositoryV4_2(DataSource dataSource) {
        this.dataSource = dataSource;
        this.exTranslator = new SQLErrorCodeSQLExceptionTranslator(dataSource);
    }

    @Override
    public Member save(Member member) {
        String sql = "INSERT INTO member(member_id, money) VALUES(?, ?)"; // SQL Query

        Connection conn = null; // Connection ê°ì²´
        PreparedStatement pstmt = null; // SQL ì¿¼ë¦¬ ê°ì²´

        try {
            conn = getConnection(); // Connection ê°ì²´ ì–»ê¸°
            pstmt = conn.prepareStatement(sql); // SQL ì¿¼ë¦¬ ë‹´ê¸°
            pstmt.setString(1, member.getMemberId()); // ? ê°’ ëŒ€ì…
            pstmt.setInt(2, member.getMoney()); // ? ê°’ ëŒ€ì…
            pstmt.executeUpdate();
            return member; // ë°˜í™˜
        } catch (SQLException e) {
            throw exTranslator.translate("save", sql, e);
        } finally {
            close(conn, pstmt, null); // ìì› ë°˜í™˜
        }
    }

    @Override
    public Member findById(String memberId) {
        String sql = "SELECT * FROM MEMBER WHERE member_id = ?";

        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;

        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql);
            pstmt.setString(1, memberId);

            rs = pstmt.executeQuery();

            if(rs.next()) {
                Member member = new Member();
                member.setMemberId(rs.getString("member_id"));
                member.setMoney(rs.getInt("money"));
                return member;
            } else {
                throw new NoSuchElementException("Member Not Fount MemberId = " + memberId);
            }
        } catch(SQLException e) {
            throw exTranslator.translate("findById", sql, e);
        } finally {
            close(conn, pstmt, rs);
        }
    }

    @Override
    public void update(String memberId, int money) {
        String sql = "UPDATE member SET money = ? WHERE member_id = ?";

        Connection conn = null;
        PreparedStatement pstmt = null;

        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql);
            pstmt.setInt(1, money);
            pstmt.setString(2, memberId);
            int resultSize = pstmt.executeUpdate();
            log.info("resultSize={} " + resultSize);
        } catch(SQLException e) {
            throw exTranslator.translate("update", sql, e);
        } finally {
            close(conn, pstmt, null);
        }
    }

    @Override
    public void delete(String member_id) {
        String sql = "DELETE FROM member WHERE member_id = ?";

        Connection conn = null;
        PreparedStatement pstmt = null;

        try {
            conn = getConnection();
            pstmt = conn.prepareStatement(sql);
            pstmt.setString(1, member_id);
            int resultSize = pstmt.executeUpdate();
            log.info("resultSize={} " + resultSize);
        } catch(SQLException e) {
            throw exTranslator.translate("delete", sql, e);
        } finally {
            close(conn, pstmt, null);
        }
    }

    private Connection getConnection() {
        // ğŸ’¡ íŠ¸ëœì­ì…˜ ë™ê¸°í™”ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ DataSourceUtilsë¥¼ ì‚¬ìš©
        Connection connection = DataSourceUtils.getConnection(dataSource);

        log.info("get Connection{}, class={}", connection, connection.getClass());
        return connection;
    }

    private void close(Connection conn, Statement stmt, ResultSet rs) {
        JdbcUtils.closeResultSet(rs);
        JdbcUtils.closeStatement(stmt);

        // ğŸ’¡ íŠ¸ëœì­ì…˜ ë™ê¸°í™”ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ DataSourceUtilsë¥¼ ì‚¬ìš©
        DataSourceUtils.releaseConnection(conn, dataSource);
    }
}
```

  - ê¸°ì¡´ ì½”ë“œì—ì„œ ìŠ¤í”„ë§ ì˜ˆì™¸ ë³€í™˜ê¸°ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
```java
private final SQLExceptionTranslator exTranslator;

public MemberRepositoryV4_2(DataSource dataSource) {
    this.dataSource = dataSource;
    this.exTranslator = new SQLErrorCodeSQLExceptionTranslator(dataSource);
}

@Override
public Member save(Member member) {
    ...

    try {
        ...
    } catch (SQLException e) {
        throw exTranslator.translate("save", sql, e);
    }
    ...
}
```

2. MemberServiceV4Test - ìˆ˜ì •
```java
@Bean // memberRepositoryV4_2 ë“±ë¡
MemberRepository memberRepository() {
    // return new MemberRepositoryV4_1(dataSource); // ë‹¨ìˆœ ì˜ˆì™¸ ë°˜í™˜
    return new MemberRepositoryV4_2(dataSource);
}
```
  - MemberRepository ì¸í„°í˜ì´ìŠ¤ê°€ ì œê³µë˜ë¯€ë¡œ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡í•  ë¹ˆë§Œ êµì²´í•´ì£¼ë©´ ë ˆí¬ì§€í† ë¦¬ë¥¼ ë³€ê²½í•´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

-----
### ì •ë¦¬
-----
1. ì˜ˆì™¸ì— ëŒ€í•œ ë¶€ë¶„ì´ ê¹”ë”í•˜ê²Œ ì •ë¦¬
2. ìŠ¤í”„ë§ì´ ì˜ˆì™¸ë¥¼ ì¶”ìƒí™”í•´ì¤€ ë•ë¶„ì—, ì„œë¹„ìŠ¤ ê³„ì¸µì€ íŠ¹ì • ë ˆí¬ì§€í† ë¦¬ êµ¬í˜„ ê¸°ìˆ ê³¼ ì˜ˆì™¸ì— ì¢…ì†ì ì´ì§€ ì•Šê²Œ ë¨
3. ë”°ë¼ì„œ, ì„œë¹„ìŠ¤ ê³„ì¸µì€ íŠ¹ì • êµ¬í˜„ ê¸°ìˆ ì´ ë³€ê²½ë˜ì–´ë„ ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìœ¼ë©°, DIë¥¼ ì œëŒ€ë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë¨
4. ì¶”ê°€ë¡œ, ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ ë³µêµ¬í•´ì•¼ í•˜ëŠ” ê²½ìš°, ì˜ˆì™¸ê°€ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¡œ ë³€ê²½ë˜ì–´ ë„˜ì–´ì˜¤ë¯€ë¡œ í•„ìš”í•œ ê²½ìš° ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ ë³µêµ¬í•˜ë©´ ë¨
