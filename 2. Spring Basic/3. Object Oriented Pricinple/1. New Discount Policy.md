-----
### μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°
-----
1. μ”κµ¬μ‚¬ν•­
   - μ„λΉ„μ¤ μ¤ν” μ§μ „μ— ν• μΈ μ •μ±…μ„ κ³ μ • κΈμ•΅ ν• μΈμ΄ μ•„λ‹ μΆ€ λ” ν•©λ¦¬μ μΈ μ£Όλ¬Έ κΈμ•΅λ‹Ή ν• μΈν•λ” μ •λ¥ (%) ν• μΈμΌλ΅ λ³€κ²½ μ”μ²­
   - μλ¥Ό λ“¤μ–΄, κΈ°μ΅΄ μ •μ±…μ€ VIPκ°€ 10000μ›μ„ μ£Όλ¬Έν•λ“ , 20000μ›μ„ μ£Όλ¬Έν•λ“  ν•­μƒ 1000μ› ν• μΈν•λ” μ •μ•΅ ν• μΈ μ •μ±…
   - μƒλ΅ λ‚μ¨ μ •μ±…μ€ 10%λ΅ μ§€μ •ν•λ„λ΅ μ”κµ¬μ‚¬ν•­ μ”μ²­
2. μ£Όλ¬Έν• κΈμ•΅μ %λ¥Ό ν• μΈν•΄μ£Όλ” μƒλ΅μ΄ μ •λ¥  ν• μΈ μ •μ±…μ„ μ¶”κ°€
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/2b034c97-5501-4ca7-a987-35b69ef59ab5">
</div>

3. RateDiscountPolicy μ½”λ“ μ¶”κ°€
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy {

    private int discountPercent = 10; // 10% μ •λ¥  ν• μΈ

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```

4. ν…μ¤νΈ μ‘μ„±
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.*;
import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {
    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIPλ” 10% ν• μΈμ΄ μ μ©λμ–΄μ•Ό ν•λ‹¤.") // ν…μ¤νΈ ν™”λ©΄μ— ν‘μ‹
    void vip_o() {
        // Given
        Member member = new Member(1L, "memberVIP", Grade.VIP);

        // When
        int discount = discountPolicy.discount(member, 10000);

        // Then
        assertThat(discount).isEqualTo(1000); // static import ν•λ” νΈμ΄ μΆ‹μ
    }

    @Test
    @DisplayName("VIPκ°€ μ•„λ‹λ©΄ ν• μΈμ΄ μ μ©λμ§€ μ•μ•„μ•Ό ν•λ‹¤.")
    void vip_x() {
        // Given
        Member member = new Member(2L, "memberVIP", Grade.BASIC);

        // When
        int discount = discountPolicy.discount(member, 10000);

        // Then
        assertThat(discount).isEqualTo(0);
    }
}
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/58894475-6941-46d7-93ec-686d6dd3e92a">
</div>

-----
### μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 
-----
1. ν• μΈ μ •μ±…μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ μ©
   - ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImpl μ½”λ“λ¥Ό μμ •
```java
...

public class OrderServiceImpl implements OrderService {
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy(); 
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();

    ...
}
```

2. λ¬Έμ μ  λ°κ²¬
  - μ—­ν• (μΈν„°νμ΄μ¤)κ³Ό κµ¬ν„(κµ¬ν„μ²΄ ν΄λμ¤)λ¥Ό λ¶„λ¦¬ : OK
  - λ‹¤ν•μ„± ν™μ©, μΈν„°νμ΄μ¤ κµ¬ν„ κ°μ²΄ λ¶„λ¦¬ : OK
  - π’΅ OCP, DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¤€μ : NO!

3. DIP : OrderServiceImpl(μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ)λ” DiscounPolicy μΈν„°νμ΄μ¤μ—μ„ μμ΅΄κ³Ό λ”λ¶μ–΄, κµ¬ν„ ν΄λμ¤μ—λ„ μμ΅΄ν•λ―€λ΅ DIP μ„λ°
   - ν΄λμ¤ μμ΅΄ κ΄€κ³„λ¥Ό λ¶„μ„ν•΄λ³΄λ©΄, μ¶”μƒ(μΈν„°νμ΄μ¤) λΏλ§ μ•„λ‹λΌ κµ¬μ²΄(κµ¬ν„) ν΄λμ¤μ—λ„ μμ΅΄
   - μ¶”μƒ(μΈν„°νμ΄μ¤ μμ΅΄) : DiscountPolicy
   - κµ¬μ²΄(κµ¬ν„) ν΄λμ¤ : FixDiscountPolicy, RateDiscountPolicy

   - κΈ°λ€ν–λ μμ΅΄κ΄€κ³„
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/2af17194-176b-41d9-a7cb-3bac5abb319e">
</div>

   - μ‹¤μ  μμ΅΄ κ΄€κ³„
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/5f9e85d9-9419-489a-b65d-32d71da4ef94">
</div>

   - π’΅ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImplλ” DiscountPolicy μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ FixDiscountPolicyμΈ κµ¬μ²΄ ν΄λμ¤μ—λ„ ν•¨κ» μμ΅΄ (DIP μ„λ°)

   - μ •μ±… λ³€κ²½
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/907eb656-6c1d-4dc3-89b7-44991a7bdd22">
</div>

   - π’΅ λ”°λΌμ„, FixDiscountPolicyλ¥Ό RateDiscountPolicyλ΅ λ³€κ²½ν•λ” μκ°„ OrderServiceImplμ μ†μ¤μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Όν•¨ (OCP μ„λ°)

4. OCP : ν„μ¬ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄ λ³€κ²½ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ£Όλ―€λ΅ OCP μ„λ°

-----
### μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ© λ¬Έμ μ— λ€ν• ν•΄κ²° λ°©λ²•
-----
1. ν„μ¬ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ OrderServiceImplμ€ DisocuntPolicy μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬ν„μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄
2. λ”°λΌμ„, κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ•, ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Όν•¨
3. DIP μ„λ° : μ¶”μƒμ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½(μ¦‰, μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½)
4. DIPλ¥Ό μ„λ°ν•μ§€ μ•λ„λ΅, μΈν„°νμ΄μ¤λ§ μμ΅΄ν•λ„λ΅ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/782a9b3a-fcfe-4443-b588-9ae7e5c4b9c7">
</div>

5. μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“ λ³€κ²½
```java
...
public class OrderServiceImpl implements OrderService {
    // private final DiscountPolicy discountPolicy = new RateDiscountPolicy(); 
    private DiscountPolicy discountPolicy;

    ...
}
```
  - μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„μ™€ μ½”λ“λ¥Ό λ³€κ²½
  - κ·Έλ°λ° κµ¬ν„μ²΄κ°€ μ—†λ”λ° μ–΄λ–»κ² μ½”λ“λ¥Ό μ‹¤ν–‰ν•  μ μμ„κΉ? μ‹¤μ  μ‹¤ν–‰ν•΄λ³΄λ©΄ NPE(NullPointerException) λ°μƒ
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/8fe55b14-6ef3-481b-9db7-8ff8b3e97c05">
</div>

6. ν•΄κ²° λ°©μ•
   - ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImplμ— DiscountPolicyμ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ¤μ•Όν•¨

   
