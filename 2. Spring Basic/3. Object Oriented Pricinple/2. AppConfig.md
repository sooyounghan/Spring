-----
### AppConfigì˜ ë“±ì¥
-----
1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(Config)í•˜ê¸° ìœ„í•´, êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ ìƒì„±
2. AppConfig
```java
package hello.core;

import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }
}
```

3. AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±
   - MemberServiceImpl
   - MemoryMemberRepository
   - OrderServiceImpl
   - FixDiscountPolicy

4. AppConfigëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ ìƒì„±ìë¥¼ í†µí•´ ì£¼ì…(ì—°ê²°)
   - MemberServiceImpl : MemoryMemberRepository
   - OrderServiceImpl : MemoryMemberRepository, FixDiscountPolicy

* ì§€ê¸ˆì€ ê° í´ë˜ìŠ¤ì— ìƒì„±ìê°€ ì—†ìœ¼ë¯€ë¡œ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ. ìƒì„±ìë¥¼ ìƒì„±í•´ì•¼í•¨

5. MemberSeriveImpl - ìƒì„±ì ì£¼ì…
```java
package hello.core.member;

public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) { // Constructor Injection
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```
  - ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ MemberServiceImplì€ MemoryMemberRepositoryë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠìŒ
  - ë‹¨ì§€, MemberRepository ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´
  - MemberServiceImpl ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì£¼ì…ë ì§€ ì•Œ ìˆ˜ ì—†ìŒ
  - MemberServiceImplì˜ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(AppConfig)ì—ì„œ ê²°ì •
  - ì¦‰, MemberServiceImplì€ ì´ì œ ì˜ì¡´ ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€(AppConfig)ì— ë§¡ê¸°ê³  ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘

6. í´ë˜ìŠ¤ ë‹¤ì´ì–´ ê·¸ë¨
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/e6daeae4-8c26-4dac-87bb-c03fed3f8a8f">
</div>

  - ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ AppConfigì—ì„œ ë‹´ë‹¹
  - DIP ì™„ì„± : MemberServiceImplì€ MemberRepositoryì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´ (êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ëª°ë¼ë„ ë¨)
  - ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ : ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬

7. íšŒì› ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/f66913f8-3777-48f5-9a17-7511339812e5">
</div>

  - appConfig ê°ì²´ëŠ” memoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImplì„ ìƒì„±í•˜ë©´ì„œ, ìƒì„±ìë¡œ ì „ë‹¬
  - ğŸ’¡ í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•˜ì—¬ 'DI(Dependency Injection)', ì¦‰ ì˜ì¡´ì„± ì£¼ì…(ì˜ì¡´ê´€ê³„ ì£¼ì…) ì´ë¼ê³  í•¨

8. OrderServiceImpl - ìƒì„±ì ì£¼ì…
```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) { // Constructor Injection
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);

        // í• ì¸ ì •ì±…ì— ëŒ€í•´ì„œ OrderServiceImplì—ì„œ ê´€ì—¬í•˜ì§€ ì•ŠìŒ. ì¦‰, í• ì¸ ì •ì±… ì—­í• ì— ìœ„ì„í–ˆê¸°ì— ê·¸ ê²°ê³¼ë§Œ ë°›ìœ¼ë©´ ë¨
        // ì¦‰, SRP (ë‹¨ì¼ ì±…ì„ ì›ì¹™)ì„ ì˜ ì§€í‚¨ ì˜ˆ (í• ì¸ì— ëŒ€í•œ ë³€ê²½ì´ í•„ìš”í•˜ë©´, í• ì¸ ì—­í•  ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ë¨)
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

  - ì„¤ê³„ ë³€ê²½ì„ OrderServiceImplì€ FixDiscountPolicyë¥¼ ì˜ì¡´í•˜ì§€ ì•Šìœ¼ë©°, ì˜¤ì§ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´
  - OrderServiceImpl ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì£¼ì…ë ì§€ ì•Œ ìˆ˜ ì—†ìŒ
  - OrderServiceImplì˜ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(AppConfig)ì—ì„œ ê²°ì •
  - OrderServiceImplì€ ì´ì œ ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘
  - OrderServiceImplì€ MemoryMemberRespository, FixDiscountPolicy ê°ì²´ì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…

-----
### AppConfig ì‹¤í–‰
-----
1. MemberApp
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;

public class MemberApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();

        Member member = new Member(1L, "MemberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find member = " + findMember.getName());
    }
}
```

2. OrderApp
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.order.Order;
import hello.core.order.OrderService;

public class OrderApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        OrderService orderService = appConfig.orderService();

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);

        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);

        System.out.println("order = " + order);
        System.out.println("order = " + order.calculatePrice());
    }
}
```

3. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜¤ë¥˜ ìˆ˜ì •
   - @BeforEach : í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ê° í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ ë¨¼ì € í˜¸ì¶œ
   - MemberServiceTest
```java
package hello.core.member;

import hello.core.AppConfig;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

public class MemberServiceTest {
    MemberService memberService;

    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }

    @Test
    void join() {
        // Given
        Member member = new Member(1L, "memberA", Grade.VIP);

        // When
        memberService.join(member);
        Member findMember = memberService.findMember(member.getId());

        // Then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```

  - OrderServiceTest
```java
package hello.core.test;

import hello.core.AppConfig;
import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.order.Order;
import hello.core.order.OrderService;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

public class OrderServiceTest {
    MemberService memberService;
    OrderService orderService;

    @BeforeEach
    void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
        orderService = appConfig.orderService();
    }

    @Test
    void createOrder() {
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

-----
### ì •ë¦¬
-----
1. AppConfigë¥¼ í†µí•´ ê´€ì‹¬ì‚¬(ì—­í• ê³¼ êµ¬í˜„)ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬
2. AppConfigëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼í• ì§€ ì „ì²´ êµ¬ì„± ì±…ì„
3. OrderServiceImplì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ë¨
  
