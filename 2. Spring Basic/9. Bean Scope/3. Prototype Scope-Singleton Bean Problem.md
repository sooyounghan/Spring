-----
### í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ - ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš© ì‹œ ë¬¸ì œì 
-----
1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ìš”ì²­í•˜ë©´ í•­ìƒ ìƒˆë¡œìš´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ë°˜í™˜
2. í•˜ì§€ë§Œ, ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©í•  ë•ŒëŠ” ì˜ë„í•œ ëŒ€ë¡œ ì˜ ë™ì‘í•˜ì§€ ì•ŠìŒ
3. ì˜ˆì œ) ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì§ì ‘ ìš”ì²­í•˜ëŠ” ì˜ˆì œ
<div align="center">
<img src="https://github.com/sooyounghan/Computer-Science/assets/34672301/4ed3e16a-3a93-4fac-b18a-2c18d4dd573d">
</div>

  - A. í´ë¼ì´ì–¸íŠ¸AëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìš”ì²­
  - B. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒˆë¡œ ìƒì„±í•´ì„œ ë°˜í™˜(x01). í•´ë‹¹ í•„ë“œì˜ ê°’ì€ 0
  - C. í´ë¼ì´ì–¸íŠ¸ëŠ” ì¡°íšŒí•œ í”„ë¡œí† íƒ€ì… ë¹ˆì— addCount()ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ count í•„ë“œë¥¼ +1

<div align="center">
<img src="https://github.com/sooyounghan/Computer-Science/assets/34672301/7093cf9c-82b5-48bd-a1fd-395c18032fd2">
</div>

  - A. í´ë¼ì´ì–¸íŠ¸BëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìš”ì²­
  - B. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒˆë¡œ ìƒì„±í•´ì„œ ë°˜í™˜(x02). í•´ë‹¹ í•„ë“œì˜ ê°’ì€ 0
  - C. í´ë¼ì´ì–¸íŠ¸ëŠ” ì¡°íšŒí•œ í”„ë¡œí† íƒ€ì… ë¹ˆì— addCount()ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ count í•„ë“œë¥¼ +1
  - D. ê²°ê³¼ì ìœ¼ë¡œ í”„ë¡œí† íƒ€ì… ë¹ˆ(x02)ì˜ countëŠ” 1

  - ì½”ë“œ
```java
package hello.core.scope;

import jakarta.annotation.PostConstruct;
import jakarta.annotation.PreDestroy;
import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import static org.assertj.core.api.Assertions.*;

public class SingletonWithPrototypeTest1 {
    @Test
    void prototypeFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);
        prototypeBean1.addCount();
        assertThat(prototypeBean1.getCount()).isEqualTo(1);

        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);
        prototypeBean2.addCount();
        assertThat(prototypeBean2.getCount()).isEqualTo(1);
    }

    @Scope("prototype")
    static class PrototypeBean() {
        private int count = 0;

        public void addCount() {
            count++;
        }

        public int getCount() {
            return count;
        }

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init : " + this);
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }
    }
}
```

-----
### ì‹±ê¸€í†¤ ë¹ˆì—ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆ ì‚¬ìš©
-----
1. clientBeanì´ë¼ëŠ” ì‹±ê¸€í†¤ ë¹ˆì´ ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ í†µí•´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì£¼ì…ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ì˜ˆ
<div align="center">
<img src="https://github.com/sooyounghan/Computer-Science/assets/34672301/a3a3fbea-d98f-4773-9cf4-e4ffe10248be">
</div>

2. clientBeanì€ ì‹±ê¸€í†¤ì´ë¯€ë¡œ, ë³´í†µ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œì ì— í•¨ê»˜ ìƒì„±ë˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ë°œìƒ
   - clientBeanì€ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì„ ì‚¬ìš©. ì£¼ì… ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìš”ì²­
   - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•´ì„œ clientBeanì— ë°˜í™˜. í”„ë¡œí† íƒ€ì… ë¹ˆì˜ count í•„ë“œ ê°’ì€ 0
3. ğŸ’¡ ì´ì œ clientBeanì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ë‚´ë¶€ í•„ë“œë¡œ ë³´ê´€ (ì •í™•íˆëŠ” ì°¸ì¡°ê°’ ë³´ê´€)

<div align="center">
<img src="https://github.com/sooyounghan/Computer-Science/assets/34672301/cbdb4632-202a-470b-8135-f9f77859c841">
</div>

4. í´ë¼ì´ì–¸íŠ¸AëŠ” clientBeanì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•´ì„œ ë°›ìŒ. ì‹±ê¸€í†¤ì´ë¯€ë¡œ í•­ìƒ ê°™ì€ clientBean ë°˜í™˜
   - í´ë¼ì´ì–¸íŠ¸AëŠ” clientBean.logic()ì„ í˜¸ì¶œ
   - clientBeanì€ prototypeBeanì˜ addCount()ë¥¼ í˜¸ì¶œí•´ í”„ë¡œí† íƒ€ì… ë¹ˆì˜ countë¥¼ ì¦ê°€í•˜ë¯€ë¡œ countê°’ì´ 1

<div align="center">
<img src="https://github.com/sooyounghan/Computer-Science/assets/34672301/1d7af342-d6d7-47e5-b725-05743a9d6a67">
</div>

5. í´ë¼ì´ì–¸íŠ¸BëŠ” clientBeanì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•´ì„œ ë°›ìŒ. ì‹±ê¸€í†¤ì´ë¯€ë¡œ í•­ìƒ ê°™ì€ clientBeanì´ ë°˜í™˜
   - ğŸ’¡ clientBeanì´ ë‚´ë¶€ì— ê°€ì§€ê³  ìˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì€ ì´ë¯¸ ê³¼ê±°ì— ì£¼ì…ì´ ëë‚œ ë¹ˆ
   - ğŸ’¡ ì£¼ì… ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•´ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ëœ ê²ƒì´ì§€, ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹˜
   - í´ë¼ì´ì–¸íŠ¸ BëŠ” clientBean.logic()ì„ í˜¸ì¶œ
   - clientBeanì€ prototypeBeanì˜ addCount()ë¥¼ í˜¸ì¶œí•´ í”„ë¡œí† íƒ€ì… ë¹ˆì˜ countë¥¼ ì¦ê°€. ì›ë˜ countê°’ì´ 1ì´ì—ˆìœ¼ë¯€ë¡œ 2ê°€ ë¨

```java
package hello.core.scope;

import jakarta.annotation.PostConstruct;
import jakarta.annotation.PreDestroy;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import static org.assertj.core.api.Assertions.*;

public class SingletonWithPrototypeTest1 {
    @Test
    void prototypeFind() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);
        prototypeBean1.addCount();
        assertThat(prototypeBean1.getCount()).isEqualTo(1);

        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);
        prototypeBean2.addCount();
        assertThat(prototypeBean2.getCount()).isEqualTo(1);
    }

    @Test
    void singletonClientUsePrototype() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(ClientBean.class, PrototypeBean.class);
        ClientBean clientBean1 = ac.getBean(ClientBean.class);
        int count1 = clientBean1.logic();
        assertThat(count1).isEqualTo(1);

        ClientBean clientBean2 = ac.getBean(ClientBean.class);
        int count2 = clientBean2.logic();
        assertThat(count2).isEqualTo(2);
    }


    @Scope("singleton")
    static class ClientBean {
        private final PrototypeBean prototypeBean; // ìƒì„± ì‹œì ì— ì£¼ì…ë˜ì–´ ê°™ì€ ê²ƒ ì‚¬ìš©

        @Autowired
        public ClientBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            int count = prototypeBean.getCount();
            return count;
        }
    }

    @Scope("prototype")
    static class PrototypeBean {
        private int count = 0;

        public void addCount() {
            count++;
        }

        public int getCount() {
            return count;
        }

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init : " + this);
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }
    }
}
```

6. ìŠ¤í”„ë§ì€ ì¼ë°˜ì ìœ¼ë¡œ ì‹±ê¸€í†¤ ë¹ˆì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ì‹±ê¸€í†¤ ë¹ˆì´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•˜ê²Œ ë¨
7. ê·¸ëŸ¬ë‚˜, ì‹±ê¸€í†¤ ë¹ˆì€ ìƒì„± ì‹œì ì—ë§Œ ì˜ì¡´ ê´€ê³„ë¥¼ ë°›ìœ¼ë¯€ë¡œ, í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒˆë¡œ ìƒì„±ë˜ê¸°ëŠ” í•˜ì§€ë§Œ, ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ (ì²˜ìŒ ìƒì„±ëœ í”„ë¡œí† íƒ€ì… ë¹ˆì´) ê³„ì† ìœ ì§€ë˜ëŠ” ê²ƒì´ ë¬¸ì œ
8. ì¦‰, ì—¬ëŸ¬ ë¹ˆì—ì„œ ê°™ì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì£¼ì… ë°›ìœ¼ë©´, ì£¼ì… ë°›ëŠ” ì‹œì ì— ê°ê° ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±
   - ì˜ˆë¥¼ ë“¤ì–´, clientA, clientBê°€ ê°ê° ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì… ë°›ìœ¼ë©´ ê°ê° ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì£¼ì… ë°›ìŒ
```java
clientA â†’ prototypeBean@x01
clientB â†’ prototypeBean@x02
```
  - ë¬¼ë¡  ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²ƒì€ ì•„ë‹˜
