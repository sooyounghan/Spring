-----
### Scopeì™€ Proxy
-----
1. í”„ë¡ì‹œ ë°©ì‹ ì‚¬ìš©
```java
package hello.core.common;

import jakarta.annotation.PostConstruct;
import jakarta.annotation.PreDestroy;
import org.springframework.context.annotation.Scope;
import org.springframework.context.annotation.ScopedProxyMode;
import org.springframework.stereotype.Component;

import java.util.UUID;

@Component
@Scope(value = "request", proxyMode = ScopedProxyMode.TARGET_CLASS)
public class MyLogger {

    ...

}
```

2. ğŸ’¡ proxyMode = ScopedProxyMode.TARGET_CLASS
   - ì ìš© ëŒ€ìƒì´ ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ í´ë˜ìŠ¤ : TARGET_CLASS
   - ì ìš© ëŒ€ìƒì´ ì¸í„°í˜ì´ìŠ¤ : INTERFACES
   - MyLoggerì˜ ê°€ì§œ Proxy Classë¥¼ ë§Œë“¤ì–´ì£¼ê³ , HTTP requestì™€ ìƒê´€ ì—†ì´ ê°€ì§œ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥¸ ë¹ˆì— ë¯¸ë¦¬ ì£¼ì… ê°€ëŠ¥
```java
package hello.core.web;

import hello.core.common.MyLogger;
import jakarta.servlet.http.HttpServletRequest;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequiredArgsConstructor
public class LogDemoController {
    private final LogDemoService logDemoService;
    private final MyLogger myLogger;

    @RequestMapping("log-demo")
    @ResponseBody
    public String logDemo(HttpServletRequest request) {
        String reqeustURL = request.getRequestURL().toString();
        myLogger.setRequestURL(reqeustURL);

        myLogger.log("Controller Test");
        logDemoService.logic("testID");
        return "OK";
    }
}
```

```java
package hello.core.web;

import hello.core.common.MyLogger;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

@Service
@RequiredArgsConstructor
public class LogDemoService {
    private final MyLogger myLogger;

    public void logic(String id) {
        myLogger.log("Service ID = " + id);
    }
}
```
  - ì •ìƒì ìœ¼ë¡œ ì˜ ë™ì‘
  - ì¦‰, Provider ì‚¬ìš© ì „ê³¼ ì™„ì „íˆ ì½”ë“œê°€ ë™ì¼

----- 
### ì›¹ ìŠ¤ì½”í”„ì™€ í”„ë¡ì‹œ ë™ì‘ ì›ë¦¬
-----
1. ë¨¼ì €, ì£¼ì…ëœ myLoggerë¥¼ í™•ì¸
```java
package hello.core.web;

import hello.core.common.MyLogger;
import jakarta.servlet.http.HttpServletRequest;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequiredArgsConstructor
public class LogDemoController {
    private final LogDemoService logDemoService;
    private final MyLogger myLogger;

    @RequestMapping("log-demo")
    @ResponseBody
    public String logDemo(HttpServletRequest request) {
        String reqeustURL = request.getRequestURL().toString();

        System.out.println("myLogger = " + myLogger.getClass()); // ğŸ’¡

        myLogger.setRequestURL(reqeustURL);

        myLogger.log("Controller Test");
        logDemoService.logic("testID");
        return "OK";
    }
}
```
  - ì¶œë ¥ ê²°ê³¼
<div align="center">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/85f6732a-1d50-47ab-b85d-e247c90ba3d6">
</div>

2. CGLIBë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë‚´ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì£¼ì…
   - @Scopeì˜ proxyMode = ScopedProxyMode.TARGET_CLASSë¥¼ ì„¤ì •í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” CGLIBë¼ëŠ” ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´, MyLoggerë¥¼ ìƒì†ë°›ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±
   - ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ë©´, ìš°ë¦¬ê°€ ë“±ë¡í•œ ìˆœìˆ˜í•œ MyLogger í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ```hello.core.common.MyLogger$$SpringCGLIB```ì´ë¼ëŠ” í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§„ ê°ì²´ê°€ ëŒ€ì‹  ë“±ë¡ëœ ê²ƒ í™•ì¸ ê°€ëŠ¥
   - ê·¸ë¦¬ê³ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— 'myLogger'ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì§„ì§œ ëŒ€ì‹  ì´ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë“±ë¡
   - ac.getBean("myLogger", MyLogger.class)ë¡œ ì¡°íšŒí•´ë„ í”„ë¡ì‹œ ê°ì²´ê°€ ì¡°íšŒë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŒ
   - ê·¸ë˜ì„œ, ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ì´ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ê°€ ì£¼ì…ë¨
<div align="center">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/41a008c4-8fc0-4a53-98d3-380801f9dfc9">
</div>

3. ğŸ’¡ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ìš”ì²­ì´ ì˜¤ë©´, ê·¸ ë•Œ ë‚´ë¶€ì—ì„œ ì§„ì§œ ë¹ˆì„ ìš”ì²­í•˜ëŠ” ìœ„ì„ ë¡œì§ì´ ë“¤ì–´ìˆìŒ
   - ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ë‚´ë¶€ì— ì§„ì§œ myLoggerë¥¼ ì°¾ëŠ” ë°©ë²•ì„ ì•Œê³  ìˆìŒ
   - í´ë¼ì´ì–¸íŠ¸ê°€ myLogger.log()ë¥¼ í˜¸ì¶œí•˜ë©´ ì‚¬ì‹¤ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê²ƒ
   - ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” request ìŠ¤ì½”í”„ì˜ ì§„ì§œ myLogger.log()ë¥¼ í˜¸ì¶œ
   - ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì„œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì—, ì´ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œëŠ” ì‚¬ì‹¤ ì›ë³¸ì¸ì§€ ì•„ë‹Œì§€ë„ ëª¨ë¥´ê³  ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥ (ë‹¤í˜•ì„±)

4. ë™ì‘ ì •ë¦¬
   - CGLIBë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë‚´ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì£¼ì…
   - ì´ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ìš”ì²­ì´ ì˜¤ë©´, ê·¸ ë•Œ ë‚´ë¶€ì—ì„œ ì‹¤ì œ ë¹ˆì„ ìš”ì²­í•˜ëŠ” ìœ„ì„ ë¡œì§ì´ ë“¤ì–´ìˆìŒ
   - ğŸ’¡ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ request scopeì™€ ê´€ê³„ê°€ ì—†ìŒ. ê°€ì§œì´ë©°, ë‚´ë¶€ì— ë‹¨ìˆœí•œ ìœ„ì„ ë¡œì§ë§Œ ìˆìœ¼ë©°, ì‹±ê¸€í†¤ì²˜ëŸ¼ ë™ì‘

5. íŠ¹ì§• ì •ë¦¬
   - í”„ë¡ì‹œ ê°ì²´ ë•ë¶„ì— í´ë¼ì´ì–¸íŠ¸ëŠ” ë§ˆì¹˜ ì‹±ê¸€í†¤ ë¹ˆì„ ì‚¬ìš©í•˜ë“¯ í¸ë¦¬í•˜ê²Œ reqeust scope ì‚¬ìš© ê°€ëŠ¥
   - ğŸ’¡ Providerë¥¼ ì‚¬ìš©í•˜ë“ , í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë“  í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ì§„ì§œ ê°ì²´ ì¡°íšŒë¥¼ ê¼­ í•„ìš”í•œ ì‹œì ê¹Œì§€ ì§€ì—°ì²˜ë¦¬ í•œë‹¤ëŠ” ì 
   - ë‹¨ì§€, ì• ë„ˆí…Œì´ì…˜ ì„¤ì • ë³€ê²½ë§Œìœ¼ë¡œ ì›ë³¸ ê°ì²´ë¥¼ í”„ë¡ì‹œ ê°ì²´ë¡œ ëŒ€ì²´ ê°€ëŠ¥ (ì´ê²ƒì´ ë°”ë¡œ ë‹¤í˜•ì„±ê³¼ DI ì»¨í…Œì´ë„ˆê°€ ê°€ì§„ í° ì¥ì )
   - ê¼­ ì›¹ ìŠ¤ì½”í”„ê°€ ì•„ë‹ˆì–´ë„ í”„ë¡ì‹œëŠ” ì‚¬ìš© ê°€ëŠ¥

6. ì£¼ì˜ì 
   - ğŸ’¡ ë§ˆì¹˜ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, ë‹¤ë¥´ê²Œ ë™ì‘í•˜ë¯€ë¡œ ê²°êµ­ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ì•¼ í•¨
   - ì´ëŸ° íŠ¹ë³„í•œ scopeëŠ” ê¼­ í•„ìš”í•œ ê³³ì—ì„œë§Œ ìµœì†Œí™”í•´ì„œ ì‚¬ìš©í•´ì•¼í•¨. ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•œë‹¤ë©´, ìœ ì§€ë³´ìˆ˜í•˜ê¸°ê°€ ì–´ë ¤ì›Œì§
