-----
### Formatter
-----
1. ConverterëŠ” ì…ë ¥ê³¼ ì¶œë ¥ íƒ€ì…ì— ì œí•œì´ ì—†ëŠ” ë²”ìš© íƒ€ì… ë³€í™˜ ê¸°ëŠ¥ ì œê³µ
2. ì¼ë°˜ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì—ì„œëŠ” boolean íƒ€ì…ì„ ìˆ«ìë¡œ ë°”ê¾¸ëŠ” ê²ƒ ê°™ì€ ë²”ìš© ê¸°ëŠ¥ë³´ë‹¤ëŠ”, ë¬¸ìë¥¼ ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ê±°ë‚˜, ë‹¤ë¥¸ íƒ€ì…ì„ ë¬¸ìë¡œ ë³€í™˜í•˜ëŠ” ìƒí™©ì´ ëŒ€ë¶€ë¶„
3. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°ì²´ë¥¼ ë¬¸ìë¡œ, ë¬¸ìë¥¼ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ì˜ˆ
  - í™”ë©´ì— ìˆ«ìë¥¼ ì¶œë ¥í•´ì•¼ í•˜ëŠ”ë°, Integer â†’ String ì¶œë ¥ ì‹œì ì— ìˆ«ì 1000 â†’ ë¬¸ì "1,000" ì´ë ‡ê²Œ 1000ë‹¨ìœ„ì— ì‰¼í‘œë¥¼ ë„£ì–´ì„œ ì¶œë ¥
  - ë˜ëŠ”, "1,000"ì´ë¼ëŠ” ë¬¸ìë¥¼ 1000ì´ë¼ëŠ” ìˆ«ìë¡œ ë³€ê²½
  - ë‚ ì§œ ê°ì²´ë¥¼ ë¬¸ìì¸ "2021-01-01 10:50:11"ì™€ ê°™ì´ ì¶œë ¥í•˜ê±°ë‚˜ ë˜ëŠ” ê·¸ ë°˜ëŒ€ì˜ ìƒí™©

4. Locale
   - ì—¬ê¸°ì— ì¶”ê°€ë¡œ ë‚ ì§œ ìˆ«ìì˜ í‘œí˜„ ë°©ë²•ì€ Local í˜„ì§€í™” ì •ë³´ê°€ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ
5. ì´ë ‡ê²Œ ê°ì²´ë¥¼ íŠ¹ì •í•œ í¬ë§·ì— ë§ì¶”ì–´ ë¬¸ìë¡œ ì¶œë ¥í•˜ê±°ë‚˜ ë˜ëŠ” ê·¸ ë°˜ëŒ€ì˜ ì—­í• ì„ í•˜ëŠ” ê²ƒì— íŠ¹í™”ëœ ê²ƒ
6. ì¦‰, Converterì˜ íŠ¹ë³„í•œ ë²„ì „

-----
### Converter VS Formatter
-----
1. ConverterëŠ” ë²”ìš© (ê°ì²´ â†’ ê°ì²´)
2. FormatterëŠ” ë¬¸ìì— íŠ¹í™” (ê°ì²´ â†’ ë¬¸ì, ë¬¸ì â†’ ê°ì²´) + í˜„ì§€í™”(Locale)
   - ì¦‰, Converterì˜ íŠ¹ë³„í•œ ë²„ì „

-----
### Formater ë§Œë“¤ê¸°
-----
1. FormatterëŠ” ê°ì²´ë¥¼ ë¬¸ìë¡œ ë³€ê²½í•˜ê³ , ë¬¸ìë¥¼ ê°ì²´ë¡œ ë³€ê²½í•˜ëŠ” ë‘ ê°€ì§€ ê¸°ëŠ¥ ëª¨ë‘ ìˆ˜í–‰
   - String print(T object, Locale locale) : ê°ì²´ë¥¼ ë¬¸ìë¡œ ë³€ê²½
   - T parse(String text, Locale locale) : ë¬¸ìë¥¼ ê°ì²´ë¡œ ë³€ê²½
2. Formatter ì¸í„°í˜ì´ìŠ¤
```java
public interface Printer<T> {
    String print(T object, Locale locale); 
}

public interface Parser<T> {
    T parse(String text, Locale locale) throws ParseException; 
}

public interface Formatter<T> extends Printer<T>, Parser<T> { 

}
```

3. ìˆ«ì 1000ì„ ë¬¸ì "1,000"ìœ¼ë¡œ, 1000ë‹¨ìœ„ ì‰¼í‘œê°€ ë“¤ì–´ê°€ëŠ” í¬ë§·ì„ ì ìš©, ê·¸ë¦¬ê³  ê·¸ ë°˜ëŒ€ë„ ì²˜ë¦¬í•˜ëŠ” í¬ë§·í„° ì œì‘
4. MyNumberFormatter
```java
package hello.typeconverter.formatter;

import lombok.extern.slf4j.Slf4j;
import org.springframework.format.Formatter;

import java.text.NumberFormat;
import java.text.ParseException;
import java.util.Locale;

@Slf4j
public class MyNumberFormatter implements Formatter<Number> {
    @Override
    public Number parse(String text, Locale locale) throws ParseException {
        log.info("text = {}, locale = {}", text, locale);

        // "1,000" -> 1000
        NumberFormat format = NumberFormat.getInstance(locale);
        return format.parse(text);
    }

    @Override
    public String print(Number object, Locale locale) {
        log.info("object = {}, locale = {}", object, locale);
        NumberFormat format = NumberFormat.getInstance(locale);
        return format.format(object);
    }
}
```

  - "1,000" ì²˜ëŸ¼ ìˆ«ì ì¤‘ê°„ì˜ ì‰¼í‘œë¥¼ ì ìš©í•˜ë ¤ë©´ ìë°”ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” NumberFormat ê°ì²´ ì‚¬ìš©
  - ì´ ê°ì²´ëŠ” Locale ì •ë³´ë¥¼ í™œìš©í•´ ë‚˜ë¼ë³„ë¡œ ë‹¤ë¥¸ ìˆ«ì í¬ë§·ì„ ë§Œë“¤ì–´ ì¤Œ
  - parse() : ë¬¸ìë¥¼ ìˆ«ìë¡œ ë³€í™˜ (ì°¸ê³ ë¡œ, Number íƒ€ì…ì€ Integer, Longê³¼ ê°™ì€ ìˆ«ì íƒ€ì…ì˜ ë¶€ëª¨ í´ë˜ìŠ¤)
  - print() : ê°ì²´ë¥¼ ë¬¸ìë¡œ ë³€í™˜

5. MyNumberFormatterTest
```java
package hello.typeconverter.formatter;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

import java.text.ParseException;
import java.util.Locale;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.*;

class MyNumberFormatterTest {

    MyNumberFormatter formatter = new MyNumberFormatter();

    @Test
    void parse() throws ParseException {
        Number result = formatter.parse("1,000", Locale.KOREA);
        assertThat(result).isEqualTo(1000L); // Long íƒ€ì… ì£¼ì˜
    }

    @Test
    void print() {
        String result = formatter.print(1000, Locale.KOREA);
        assertThat(result).isEqualTo("1,000");
    }
}
```
  - ğŸ’¡ parse()ì˜ ê²°ê³¼ê°€ Longì´ê¸° ë–„ë¬¸ì—, isEqualTo(1000L)ì„ í†µí•´ ë¹„êµí•  ë•Œ, ë§ˆì§€ë§‰ì— L ë„£ì–´ì¤˜ì•¼ í•¨
  - ì‹¤í–‰ ê²°ê³¼ ë¡œê·¸
```
20:07:29.355 [Test worker] INFO hello.typeconverter.formatter.MyNumberFormatter -- text = 1,000, locale = ko_KR
20:07:29.555 [Test worker] INFO hello.typeconverter.formatter.MyNumberFormatter -- object = 1000, locale = ko_KR
```

6. Springì€ ìš©ë„ì— ë”°ë¼ ë‹¤ì–‘í•œ ë°©ì‹ í¬ë§·í„° ì œê³µ
   - Formatter : í¬ë§·í„°
   - AnnotationFormatterFactory : í•„ë“œì˜ íƒ€ì…ì´ë‚˜ ì• ë„ˆí…Œì´ì…˜ ì •ë³´ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” í¬ë§·í„°

7. ì°¸ê³  : https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#format

-----
### í¬ë§·í„°ë¥¼ ì§€ì›í•˜ëŠ” ì»¨ë²„ì „ ì„œë¹„ìŠ¤
-----
1. ConversionServiceì—ëŠ” ì»¨ë²„í„°ë§Œ ë“±ë¡í•  ìˆ˜ ìˆê³ , í¬ë§·í„°ëŠ” ë“±ë¡í•  ìˆ˜ ì—†ìŒ
2. í•˜ì§€ë§Œ, í¬ë§·í„°ëŠ” ê°ì²´ â†’ ë¬¸ì, ë¬¸ì â†’ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” íŠ¹ë³„í•œ ì»¨ë²„í„°
3. í¬ë§·í„°ë¥¼ ì§€ì›í•˜ëŠ” ì»¨ë²„ì „ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´, ì»¨ë²„ì „ ì„œë¹„ìŠ¤ì— í¬ë§·í„°ë¥¼ ì¶”ê°€ ê°€ëŠ¥
   - ë‚´ë¶€ì—ì„œ ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•´ Formatterê°€ Converterì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ ì§€ì›
4. ğŸ’¡ FormattingConversionService : í¬ë§·í„°ë¥¼ ì§€ì›í•˜ëŠ” ì»¨ë²„ì „ ì„œë¹„ìŠ¤
5. DefaultFormattingConversionServiceëŠ” FormattingConversionServiceì— ê¸°ë³¸ì ì¸ í†µí™”, ìˆ«ì ê´€ë ¨ ëª‡ê°€ì§€ ê¸°ë³¸ í¬ë§·í„°ë¥¼ ì¶”ê°€í•´ì„œ ì œê³µ
6. í…ŒìŠ¤íŠ¸ ì½”ë“œ
```java
package hello.typeconverter.formatter;

import hello.typeconverter.converter.IntegerToStringConverter;
import hello.typeconverter.converter.IpPortToStringConverter;
import hello.typeconverter.converter.StringToIntegerConverter;
import hello.typeconverter.converter.StringToIpPortConverter;
import hello.typeconverter.type.IpPort;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.format.support.DefaultFormattingConversionService;

import static org.assertj.core.api.Assertions.assertThat;

public class FormattingConversionServiceTest {
    @Test
    void formattingConversionServiceTest() {
        DefaultFormattingConversionService conversionService = new DefaultFormattingConversionService();

        // Converter ì„œë¹„ìŠ¤ ë“±ë¡
        conversionService.addConverter(new IpPortToStringConverter());
        conversionService.addConverter(new StringToIpPortConverter());

        // Formatter ë“±ë¡
        conversionService.addFormatter(new MyNumberFormatter());

        // Converter ì‚¬ìš©
        IpPort ipPort = conversionService.convert("127.0.0.1:8080", IpPort.class);
        assertThat(ipPort).isEqualTo(new IpPort("127.0.0.1", 8080));

        // Formatter ì‚¬ìš©
        String convert = conversionService.convert(1000, String.class);
        assertThat(convert).isEqualTo("1,000");

        assertThat(conversionService.convert("1,000", Integer.class)).isEqualTo(1000);
    }
}
```

7. DefaultFormattingConversionService ìƒì† ê´€ê³„
   - FormattingConversionServiceëŠ” ConversionService ê´€ë ¨ ê¸°ëŠ¥ì„ ìƒì†ë°›ê¸° ë•Œë¬¸ì—, ê²°ê³¼ì ìœ¼ë¡œ ì»¨ë²„í„°ë„, í¬ë§·í„°ë„ ëª¨ë‘ ë“±ë¡œ ê°€ëŠ¥
   - ê·¸ë¦¬ê³  ì‚¬ìš©í•  ë–„ëŠ” ConversionServiceì˜ convertë¥¼ ì‚¬ìš©í•˜ë©´ ë¨
   - ì¶”ê°€ë¡œ, ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DefaultFormattingConversionServiceë¥¼ ìƒì†ë°›ì€ WebConversionServiceë¥¼ ë‚´ë¶€ì—ì„œ ì‚¬ìš©

-----
### í¬ë§·í„° ì ìš©í•˜ê¸°
-----
1. WebConfig ìˆ˜ì •
```java
package hello.typeconverter;

import hello.typeconverter.converter.IntegerToStringConverter;
import hello.typeconverter.converter.IpPortToStringConverter;
import hello.typeconverter.converter.StringToIntegerConverter;
import hello.typeconverter.converter.StringToIpPortConverter;
import hello.typeconverter.formatter.MyNumberFormatter;
import org.springframework.context.annotation.Configuration;
import org.springframework.format.FormatterRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addFormatters(FormatterRegistry registry) {
        // ìš°ì„  ìˆœìœ„ ì£¼ì„ ì²˜ë¦¬
        // registry.addConverter(new StringToIntegerConverter());
        // registry.addConverter(new IntegerToStringConverter());
        registry.addConverter(new StringToIpPortConverter());
        registry.addConverter(new IpPortToStringConverter());
        
        registry.addFormatter(new MyNumberFormatter());
    }
}

```
  - StringToIntegerConverter, IntegerToStringConverterë¥¼ ì£¼ì„ ì²˜ë¦¬
    + MyNumberFormatterë„ ìˆ«ì â†’ ë¬¸ì, ë¬¸ì â†’ ìˆ«ìë¡œ ë³€ê²½í•˜ê¸° ë•Œë¬¸ì— ë‘˜ì˜ ê¸°ëŠ¥ì´ ê²¹ì¹¨
    + ğŸ’¡ ìš°ì„  ìˆœìœ„ëŠ” ì»¨ë²„í„°ê°€ ìš°ì„ í•˜ë¯€ë¡œ í¬ë§·í„°ê°€ ì ìš©ë˜ì§€ ì•Šê³ , ì»¨ë²„í„°ê°€ ì ìš©

  - ì‹¤í–‰ ê²°ê³¼ (ê°ì²´ â†’ ë¬¸ì)
```
${number}: 10000
${{number}}: 10,000
```
```
2024-07-19T20:26:15.396+09:00  INFO 16048 --- [typeconverter] [nio-9090-exec-1] h.t.formatter.MyNumberFormatter          : object = 10000, locale = ko
```
  - ì»¨ë²„ì „ ì„œë¹„ìŠ¤ë¥¼ ì ìš©í•œ ê²°ê³¼ MyNumberFormatterê°€ ì ìš©ë˜ì–´ 10,000 ë¬¸ìê°€ ì¶œë ¥

  - ì‹¤í–‰ ê²°ê³¼ (ë¬¸ì â†’ ê°ì²´) [http://localhost:8080/hello-v2?data=10,000]
```
2024-07-19T20:27:39.597+09:00  INFO 16048 --- [typeconverter] [nio-9090-exec-7] h.t.formatter.MyNumberFormatter          : text = 10,000, locale = ko
data = 10000
```
  - "10,000" ì´ë¼ëŠ” í¬ë§·íŒ… ë¬¸ìê°€ Integer íƒ€ì…ì˜ ìˆ«ì 10000ìœ¼ë¡œ ì •ìƒ ë³€í™˜
