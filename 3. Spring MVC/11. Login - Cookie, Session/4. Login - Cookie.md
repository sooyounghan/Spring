-----
### ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê¸° - ì¿ í‚¤ ì‚¬ìš©
-----
1. ë¡œê·¸ì¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ê³„ì† ìœ ì§€í•˜ë©´ì„œ ë³´ë‚´ëŠ” ê²ƒì€ ë§¤ìš° ì–´ë µê³  ë²ˆê±°ë¡œìš´ ì‘ì—…
2. ë”°ë¼ì„œ, ì¿ í‚¤ ì‚¬ìš©
3. ì„œë²„ì—ì„œ ë¡œê·¸ì¸ì´ ì„±ê³µí•˜ë©´ HTTP ì‘ë‹µì— ì¿ í‚¤ë¥¼ ë‹´ì•„ ë¸Œë¼ìš°ì €ì— ì „ë‹¬
4. ê·¸ëŸ¬ë©´, ë¸Œë¼ìš°ì €ëŠ” ì•ìœ¼ë¡œ í•´ë‹¹ ì¿ í‚¤ë¥¼ ì§€ì†í•´ì„œ ë³´ë‚´ì¤Œ
<div align="center">
<img src="https://github.com/user-attachments/assets/7ebf9d06-cf03-4ae9-b2df-9fa949965e8e">
<img src="https://github.com/user-attachments/assets/15b0b5bf-411e-4960-aae7-4a6c1af842a3">
</div>

-----
### ì˜ì† ì¿ í‚¤ì™€ ì„¸ì…˜ ì¿ í‚¤
-----
1. ì˜ì† ì¿ í‚¤ : ë§Œë£Œ ë‚ ì§œë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ë‚ ì§œê¹Œì§€ ìœ ì§€
2. ì„¸ì…˜ ì¿ í‚¤ : ë§Œë£Œ ë‚ ì§œë¥¼ ìƒëµí•˜ë©´ ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œê¹Œì§€ë§Œ ìœ ì§€
3. ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ë¡œê·¸ì•„ì›ƒ ë˜ê¸¸ ê¸°ëŒ€í•˜ë¯€ë¡œ, ì„¸ì…˜ ì¿ í‚¤ê°€ í•„ìš”

-----
### ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì„¸ì…˜ ì¿ í‚¤ ìƒì„±
-----
1. LoginController - login()
```java
package hello.login.web.login;

import hello.login.domain.login.LoginService;
import hello.login.domain.member.Member;
import jakarta.servlet.http.Cookie;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;

@Slf4j
@Controller
@RequiredArgsConstructor
public class LoginController {
    private final LoginService loginService;

    @GetMapping("/login")
    public String loginForm(@ModelAttribute("loginForm") LoginForm loginForm) {
        return "login/loginForm";
    }

    @PostMapping("/login")
    public String login(@Valid @ModelAttribute("loginForm") LoginForm loginForm, BindingResult bindingResult, HttpServletResponse response) {
        if(bindingResult.hasErrors()) {
            return "login/loginForm";
        }

        // ë¡œê·¸ì¸ ì‹œë„
        Member loginMember = loginService.login(loginForm.getLoginId(), loginForm.getPassword());

        // ë¡œê·¸ì¸í•œ íšŒì›ì˜ ì •ë³´ê°€ ì—†ì„ ë•Œ
        if(loginMember == null) {
            bindingResult.reject("loginFail", "ID ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "login/loginForm";
        }

        // ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬

        // ì¿ í‚¤ì— ì‹œê°„ ì •ë³´ë¥¼ ì£¼ì§€ ì•Šìœ¼ë©´ ì„¸ì…˜ ì¿ í‚¤ (ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ëª¨ë‘ ì¢…ë£Œ)
        Cookie idCookie = new Cookie("memberId", String.valueOf(loginMember.getId()));
        response.addCookie(idCookie);

        return "redirect:/";
    }
}
```

2. ì¿ í‚¤ ìƒì„± ë¡œì§
```java
Cookie idCookie = new Cookie("memberId", String.valueOf(loginMember.getId()));
response.addCookie(idCookie);
```
  - ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ì¿ í‚¤ë¥¼ ìƒì„±í•˜ê³  HttpServletResponseì— ë‹´ìŒ
  - ì¿ í‚¤ ì´ë¦„ì€ memberIdì´ê³ , ê°’ì€ íšŒì›ì˜ idë¥¼ ì €ì¥
  - ì›¹ ë¸Œë¼ìš°ì €ëŠ” ì¢…ë£Œ ì „ê¹Œì§€ íšŒì›ì˜ idë¥¼ ì„œë²„ì— ê³„ì† ë³´ë‚´ì¤Œ

3. ì‹¤í–‰
   - HTTP ì‘ë‹µ í—¤ë”ì— ì¿ í‚¤ê°€ ì¶”ê°€ëœ ê²ƒ í™•ì¸ ê°€ëŠ¥
<div align="center">
<img src="https://github.com/user-attachments/assets/ddc84a29-8bb6-4179-b2fe-be415d885a30">
<img src="https://github.com/user-attachments/assets/8249cb48-47da-4348-bf66-21e29c3ec820">
</div>

4. í™ˆ - ë¡œê·¸ì¸ ì²˜ë¦¬
```java
package hello.login.web;

import hello.login.domain.member.Member;
import hello.login.domain.member.MemberRepository;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.CookieValue;
import org.springframework.web.bind.annotation.GetMapping;

@Slf4j
@Controller
@RequiredArgsConstructor
public class HomeController {

    private final MemberRepository memberRepository;

    // @GetMapping("/")
    public String home() {
        return "home";
    }

    @GetMapping("/")
    public String homeLogin(@CookieValue(name = "memberId", required = false) Long memberId, Model model) {
        if(memberId == null) {
            return "home";
        }

        // ë¡œê·¸ì¸
        Member loginMember = memberRepository.findById(memberId);

        if(loginMember == null) {
            return "home";
        }

        model.addAttribute("member", loginMember);
        return "loginHome";
    }
}
```
  - @CookieValueë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•˜ê²Œ ì¿ í‚¤ ì¡°íšŒ ê°€ëŠ¥
  - ğŸ’¡ ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ì‚¬ìš©ìë„ í™ˆì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— required = false ì‚¬ìš©
  - ë¡œì§ ë¶„ì„
    + ë¡œê·¸ì¸ ì¿ í‚¤(memberId)ê°€ ì—†ëŠ” ì‚¬ìš©ìëŠ” ê¸°ì¡´ homeìœ¼ë¡œ ì´ë™
    + ì¶”ê°€ë¡œ ë¡œê·¸ì¸ ì¿ í‚¤ê°€ ìˆì–´ë„ íšŒì›ì´ ì•„ë‹ˆë©´ homeìœ¼ë¡œ ì´ë™
    + ë¡œê·¸ì¸ ì¿ í‚¤(memberId)ê°€ ìˆëŠ” ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ìš© í™ˆ í™”ë©´ì¸ loginHomeìœ¼ë¡œ ì´ë™
    + ì¶”ê°€ë¡œ, í™”ë©´ì— íšŒì› ê´€ë ¨ ì •ë³´ë„ ì¶œë ¥í•´ì•¼ í•˜ë¯€ë¡œ member ë°ì´í„°ë„ ëª¨ë¸ì— ë‹´ì•„ ì „ì†¡

5. í™ˆ - ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ìš© (templates/loginHome.html)
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container" style="max-width: 600px">
    <div class="py-5 text-center">
        <h2>í™ˆ í™”ë©´</h2>
    </div>
    <h4 class="mb-3" th:text="|ë¡œê·¸ì¸: ${member.name}|">ë¡œê·¸ì¸ ì‚¬ìš©ì ì´ë¦„</h4>
    <hr class="my-4">
    <div class="row">
        <div class="col">
            <button class="w-100 btn btn-secondary btn-lg" type="button"
                    th:onclick="|location.href='@{/items}'|">
                ìƒí’ˆ ê´€ë¦¬
            </button>
        </div>
        <div class="col">
            <form th:action="@{/logout}" method="post">
                <button class="w-100 btn btn-dark btn-lg" type="submit">
                    ë¡œê·¸ì•„ì›ƒ
                </button>
            </form>
        </div>
    </div>
    <hr class="my-4">
</div> <!-- /container -->
</body>
</html>
```
  - th:text="|ë¡œê·¸ì¸ : ${member.name}|" : ë¡œê·¸ì¸ì— ì„±ê³µí•œ ì‚¬ìš©ì ì´ë¦„ ì¶œë ¥
  - ìƒí’ˆ ê´€ë¦¬, ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ë…¸ì¶œ

6. ì‹¤í–‰
   - ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ì‚¬ìš©ì ì´ë¦„ì´ ì¶œë ¥ë˜ë©°, ìƒí’ˆê´€ë¦¬ / ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í™•ì¸ ê°€ëŠ¥
   - ë¡œê·¸ì¸ì— ì„±ê³µ ì‹œ ì„¸ì…˜ ì¿ í‚¤ê°€ ì§€ì†í•´ì„œ ìœ ì§€ë˜ê³ , ì›¹ ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì— ìš”ì²­ ì‹œ memberId ì¿ í‚¤ë¥¼ ê³„ì† ë³´ë‚´ì¤Œ

7. ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
   - ì„¸ì…˜ ì¿ í‚¤ì´ë¯€ë¡œ ì›¹ ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ
   - ì„œë²„ì—ì„œ í•´ë‹¹ ì¿ í‚¤ì˜ ì¢…ë£Œ ë‚ ì§œë¥¼ 0ìœ¼ë¡œ ì§€ì •
   - LoginController - logout ê¸°ëŠ¥ ì¶”ê°€
```java
@PostMapping("/logout")
public String logout(HttpServletResponse response) {
    expireCookie(response, "memberId");

    return "redirect:/";
}

private void expireCookie(HttpServletResponse response, String cookieName) {
    Cookie cookie = new Cookie(cookieName, null);
    cookie.setMaxAge(0);
    response.addCookie(cookie);
}
```
  - ë¡œê·¸ì•„ì›ƒë„ ì‘ë‹µ ì¿ í‚¤ë¥¼ ìƒì„±í•˜ëŠ”ë° Max-Age=0ì„ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ
  - ë”°ë¼ì„œ, í•´ë‹¹ ì¿ í‚¤ëŠ” ì¦‰ì‹œ ì¢…ë£Œ
<div align="center">
<img src="https://github.com/user-attachments/assets/5a019dca-993a-44c0-98ed-c7a9de0bb36f">
</div>

-----
### ì¿ í‚¤ì™€ ë³´ì•ˆ ë¬¸ì œ
-----
1. ì¿ í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì¸ IDë¥¼ ì „ë‹¬í•´ ë¡œê·¸ì¸ì„ ìœ ì§€í•  ìˆ˜ ìˆì§€ë§Œ, ì‹¬ê°í•œ ë³´ì•ˆ ë¬¸ì œ ì¡´ì¬
2. ì¿ í‚¤ ê°’ì€ ì„ì˜ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŒ
   - í´ë¼ì´ì–¸íŠ¸ê°€ ì¿ í‚¤ë¥¼ ê°•ì œë¡œ ë³€ê²½í•˜ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë¨
   - ì‹¤ì œ ì›¹ ë¸Œë¼ìš°ì € ê°œë°œì ëª¨ë“œ â†’ Application â†’ Cookie ë³€ê²½ìœ¼ë¡œ í™•ì¸
   - Cookie: memberId=1 â†’ Cookie: memberId=2 (ë‹¤ë¥¸ ì‚¬ìš©ì ì´ë¦„ì´ ë³´ì„)

3. ì¿ í‚¤ì— ë³´ê´€ëœ ì •ë³´ëŠ” í›”ì³ê°ˆ ìˆ˜ ìˆìŒ
   - ë§Œì•½, ì¿ í‚¤ì— ê°œì¸ì •ë³´ë‚˜, ì‹ ìš©ì¹´ë“œ ì •ë³´ê°€ ìˆë‹¤ë©´, ì´ ì •ë³´ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ë„ ë³´ê´€ë˜ê³ , ë„¤íŠ¸ì›Œí¬ ìš”ì²­ë§ˆë‹¤ ê³„ì† í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ì „ì†¡
   - ì¿ í‚¤ì˜ ì •ë³´ê°€ ë‚˜ì˜ ë¡œì»¬ PCì—ì„œ í„¸ë¦´ ìˆ˜ ìˆê³ , ë„¤íŠ¸ì›Œí¬ ì „ì†¡ êµ¬ê°„ì—ì„œë„ í„¸ë¦´ ìˆ˜ ìˆìŒ

4. í•´ì»¤ê°€ ì¿ í‚¤ë¥¼ í•œ ë²ˆ í›”ì³ê°€ë©´, í‰ìƒ ì‚¬ìš© í•  ìˆ˜ ìˆìŒ
   - í•´ì»¤ê°€ ì¿ í‚¤ë¥¼ í›”ì³ê°€ì„œ ê·¸ ì¿ í‚¤ë¡œ ì•…ì˜ì  ìš”ì²­ ê³„ì† ì‹œë„ ê°€ëŠ¥

5. ğŸ’¡ ëŒ€ì•ˆ
   - ì¿ í‚¤ì— ì¤‘ìš” ê°’ì„ ë…¸ì¶œí•˜ì§€ ì•Šê³ , ì‚¬ìš©ì ë³„ë¡œ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì„ì˜ì˜ í† í°(ëœë¤ ê°’)ì„ ë…¸ì¶œí•˜ê³ , ì„œë²„ì—ì„œ í† í°ê³¼ ì‚¬ìš©ì IDë¥¼ ë§¤í•‘í•´ì„œ ì¸ì‹
   - ê·¸ë¦¬ê³ , ì„œë²„ì—ì„œ í† í°ì„ ê´€ë¦¬
   - í† í°ì€ í•´ì»¤ê°€ ì„ì˜ì˜ ê°’ì„ ë„£ì–´ë„ ì°¾ì„ ìˆ˜ ì—†ë„ë¡ ì˜ˆìƒ ë¶ˆê°€ëŠ¥ í•´ì•¼í•¨
   - í•´ì»¤ê°€ í† í°ì„ í„¸ì–´ê°€ë„ ì‹œê°„ì´ ì§€ë‚˜ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ ì„œë²„ì—ì„œ í•´ë‹¹ í† í°ì˜ ë§Œë£Œ ì‹œê°„ì„ ì§§ê²Œ(ì˜ˆ) 30ë¶„) ìœ ì§€í•´ì•¼ í•¨
   - ë˜í•œ, í•´í‚¹ì´ ì˜ì‹¬ë˜ëŠ” ê²½ìš° ì„œë²„ì—ì„œ í•´ë‹¹ í† í°ì„ ê°•ì œë¡œ ì œê±°í•´ì•¼í•¨
