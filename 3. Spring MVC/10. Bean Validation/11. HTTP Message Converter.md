-----
### Bean Validation - HTTP ë©”ì„¸ì§€ ì»¨ë²„í„°
-----
1. @Valid, @ValidatedëŠ” HttpMessageConverter (@RequestBody)ì—ë„ ì ìš©í•  ìˆ˜ ìˆìŒ
2. @ModelAttributeëŠ” HTTP ìš”ì²­ íŒŒë¼ë¯¸í„° (URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, POST Form)ë¥¼ ë‹¤ë£° ë•Œ ì‚¬ìš©
3. @RequestBodyëŠ” HTTP Bodyì˜ ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•  ë•Œ ì‚¬ìš©
   - ì£¼ë¡œ API JSON ìš”ì²­ì„ ë‹¤ë£° ë•Œ ì‚¬ìš©
4. ValidationItemApiController
```java
package hello.itemservice.web.validation;

import hello.itemservice.web.validation.form.ItemSaveForm;
import lombok.extern.slf4j.Slf4j;
import org.springframework.validation.BindingResult;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@Slf4j
@RestController
@RequestMapping("/validation/api/items")
public class ValidationItemApiController {
    @PostMapping("/add")
    public Object addItem(@RequestBody @Validated ItemSaveForm form, BindingResult bindingResult) {
        log.info("API ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ");

        if(bindingResult.hasErrors()) {
            log.info("ê²€ì¦ ì˜¤ë¥˜ ë°œìƒ errors = {}", bindingResult);
            return bindingResult.getAllErrors();
        }

        log.info("ì„±ê³µ ë¡œì§ ì‹¤í–‰");
        return form;
    }
}
```
  - Postmanì„ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸
  - ì„±ê³µ ìš”ì²­
```
POST http://localhost:8080/validation/api/items/add 
{"itemName":"hello", "price":1000, "quantity": 10}
```

5. APIì˜ ê²½ìš° 3ê°€ì§€ ê²½ìš°ë¡œ ë‚˜ëˆ„ì–´ ìƒê°
   - ì„±ê³µ ìš”ì²­ : ì„±ê³µ
   - ì‹¤íŒ¨ ìš”ì²­ : JSONì„ ê°ì²´ë¡œ ìƒì„±í•˜ëŠ” ê²ƒ ìì²´ ì‹¤íŒ¨
   - ê²€ì¦ ì˜¤ë¥˜ ìš”ì²­ : JSONì„ ê°ì²´ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì€ ì„±ê³µí–ˆìœ¼ë‚˜, ê²€ì¦ì€ ì‹¤íŒ¨

6. ì„±ê³µ ìš”ì²­ ë¡œê·¸
```
API ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ 
ì„±ê³µ ë¡œì§ ì‹¤í–‰
```

7. ì‹¤íŒ¨ ìš”ì²­
```
POST http://localhost:8080/validation/api/items/add 
{"itemName":"hello", "price":"A", "quantity": 10}
```
  - priceì˜ ê°’ì— ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ìë¥¼ ì „ë‹¬í•´ì„œ ì‹¤íŒ¨
```json
{
    "timestamp": "2021-04-20T00:00:00.000+00:00", 
    "status": 400,
    "error": "Bad Request", 
    "message": "",
    "path": "/validation/api/items/add"
}
```
  - ì‹¤íŒ¨ ìš”ì²­ ë¡œê·¸
```
.w.s.m.s.DefaultHandlerExceptionResolver : Resolved
[org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.lang.Integer` from String "A": not a valid Integer value; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize
value of type `java.lang.Integer` from String "A": not a valid Integer value at [Source: (PushbackInputStream); line: 1, column: 30] (through reference chain: hello.itemservice.domain.item.Item["price"])]
```
  - HttpMessageConverterì—ì„œ ìš”ì²­ JSONì„ ItemSaveForm ê°ì²´ë¡œ ìƒì„±í•˜ëŠ”ë° ì‹¤íŒ¨
  - ğŸ’¡ ì´ ê²½ìš°, ItemSaveForm ê°ì²´ë¥¼ ë§Œë“¤ì§€ ëª»í•˜ê¸° ë–„ë¬¸ì—, ì»¨íŠ¸ë¡¤ëŸ¬ ìì²´ê°€ í˜¸ì¶œë˜ì§€ ì•Šê³  ê·¸ ì „ì— ì˜ˆì™¸ê°€ ë°œìƒ
  - ğŸ’¡ ë”°ë¼ì„œ, Validatorë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

8. ê²€ì¦ ì˜¤ë¥˜ ìš”ì²­
   - HttpMessageConverterëŠ” ì„±ê³µí•˜ì§€ë§Œ Validatorì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°
```
POST http://localhost:8080/validation/api/items/add 
{"itemName":"hello", "price":1000, "quantity": 10000}
```
  - ìˆ˜ëŸ‰(quantity)ì´ 10000ì´ë©´ Bean Validation @Max(9999)ì—ì„œ ê±¸ë¦¼

  - ê²€ì¦ ì˜¤ë¥˜ ê²°ê³¼
```json
[
    {
        "codes": [
        "Max.itemSaveForm.quantity", 
        "Max.quantity",
        "Max.java.lang.Integer", 
        "Max"
        ],
        "arguments": [
            {
              "codes": [
                        "itemSaveForm.quantity", 
                        "quantity"
                ],
                  "arguments": null,
                  "defaultMessage": "quantity", 
                  "code": "quantity"
            },
          9999
        ],
        "defaultMessage": "9999 ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤", 
        "objectName": "itemSaveForm",
        "field": "quantity",
        "rejectedValue": 10000, 
        "bindingFailure": false, 
        "code": "Max"
    }
}
```
  - return bindingResult.getAllErrors(); ëŠ” ObjectErrorì™€ FieldErrorë¥¼ ë°˜í™˜
  - ìŠ¤í”„ë§ì´ ì´ ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬
  - ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ê²€ì¦ ì˜¤ë¥˜ ê°ì²´ë“¤ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜
  - ì‹¤ì œ ê°œë°œí•  ë•ŒëŠ”, ì´ ê°ì²´ë“¤ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ê³ , í•„ìš”í•œ ë°ì´í„°ë§Œ ë½‘ì•„ì„œ ë³„ë„ì˜ API ìŠ¤í™ì„ ì •ì˜í•˜ê³  ê·¸ì— ë§ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ë°˜í™˜
  
  - ê²€ì¦ ì˜¤ë¥˜ ìš”ì²­ ë¡œê·¸
```
API ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ
ê²€ì¦ ì˜¤ë¥˜ ë°œìƒ, errors=org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'itemSaveForm' on field 'quantity': rejected value [99999]; codes [Max.itemSaveForm.quantity,Max.quantity,Max.java.lang.Integer,Max]; arguments 
[org.springframework.context.support.DefaultMessageSourceResolvable: codes [itemSaveForm.quantity,quantity]; arguments []; default message [quantity],9999]; default message [9999 ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤]
```
  - ê²€ì¦ ì˜¤ë¥˜ê°€ ì •ìƒ ìˆ˜í–‰

-----
### @ModelAttribute VS @RequestBody
-----
1. HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” @ModelAttributeëŠ” ê° í•„ë“œ ë‹¨ìœ„ë¡œ ì„¸ë°€í•˜ê²Œ ì ìš©
  - ë”°ë¼ì„œ, íŠ¹ì • í•„ë“œì— ë§ì§€ ì•ŠëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ë‚˜ë¨¸ì§€ í•„ë“œëŠ” ì •ìƒ ì²˜ë¦¬ ê°€ëŠ¥

2. HttpMessageConverterëŠ” @ModelAttributeì™€ ë‹¤ë¥´ê²Œ ê° í•„ë“œ ë‹¨ìœ„ë¡œ ì ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì „ì²´ ê°ì²´ ë‹¨ìœ„ë¡œ ì ìš©
   - ë”°ë¼ì„œ, ë©”ì„¸ì§€ ì»¨ë²„í„° ì‘ë™ì´ ì„±ê³µí•´ì„œ ItemSaveForm ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ @Valid, @Validatedê°€ ì ìš©
   - ğŸ’¡ @ModelAttributeëŠ” í•„ë“œ ë‹¨ìœ„ë¡œ ì •êµí•˜ê²Œ ë°”ì¸ë”©ì´ ì ìš©ë˜ë¯€ë¡œ, íŠ¹ì • í•„ë“œê°€ ë°”ì¸ë”© ë˜ì§€ ì•Šì•„ë„ ë‚˜ë¨¸ì§€ í•„ë“œê°€ ì •ìƒ ë°”ì¸ë”© ë˜ê³ , Validatorë¥¼ ì‚¬ìš©í•œ ê²€ì¦ ì ìš© ê°€ëŠ¥
   - ğŸ’¡ @RequestBodyëŠ” HttpMessageConverter ë‹¨ê³„ì—ì„œ JSON ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€ê²½í•˜ì§€ ëª»í•˜ë©´ ì´í›„ ë‹¨ê³„ ìì²´ê°€ ì§„í–‰ë˜ì§€ ì•Šê³  ì˜ˆì™¸ ë°œìƒ. ì¦‰, ì»¨íŠ¸ë¡¤ëŸ¬ë„ í˜¸ì¶œ ë˜ì§€ ì•Šê³ , Validatorë„ ì ìš© í•  ìˆ˜ ì—†ìŒ

3. HttpMessageConverter ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒ
  
