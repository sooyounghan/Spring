-----
### í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë„ì… - v1
-----
1. v1 êµ¬ì¡°
```java
package hello.servlet.web.frontcontroller.v1;

import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

public interface ControllerV1 {
    // íšŒì› í¼, íšŒì› ì €ì¥, íšŒì› ëª©ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ êµ¬í˜„
    void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;
}
```
 - ì„œë¸”ë¦¿ê³¼ ë¹„ìŠ·í•œ ëª¨ì–‘ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ ë„ì…
 - ê° ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì€ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ë¨
 - í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í˜¸ì¶œí•´ êµ¬í˜„ê³¼ ê´€ê³„ì—†ì´ ë¡œì§ì˜ ì¼ê´€ì„±ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆìŒ
 - ğŸ’¡ ì¦‰, ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“œëŠ” ê²ƒì´ í•µì‹¬ (ê¸°ì¡´ ë¡œì§ì€ ìµœëŒ€í•œ ìœ ì§€)

2. MemberFrontControllerV1- íšŒì› ë“±ë¡ ì»¨íŠ¸ë¡¤ëŸ¬
```java
package hello.servlet.web.frontcontroller.v1.controller;

import hello.servlet.web.frontcontroller.v1.ControllerV1;
import jakarta.servlet.RequestDispatcher;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

public class MemberFormControllerV1 implements ControllerV1 {
    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/new-form.jsp";
        RequestDispatcher requestDispatcher = request.getRequestDispatcher(viewPath);
        requestDispatcher.forward(request, response);
    }
}
```

3. MemberSaveControllerV1 - íšŒì› ì €ì¥ ì»¨íŠ¸ë¡¤ëŸ¬
```java
package hello.servlet.web.frontcontroller.v1.controller;

import hello.servlet.domain.member.Member;
import hello.servlet.domain.member.MemberRepository;
import hello.servlet.web.frontcontroller.v1.ControllerV1;
import jakarta.servlet.RequestDispatcher;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

public class MemberSaveControllerV1 implements ControllerV1 {
    private MemberRepository memberRepository = MemberRepository.getInstance();
    
    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        // Modelì— ë°ì´í„° ë³´ê´€
        request.setAttribute("member", member);

        // View ì´ë™
        String viewPath = "/WEB-INF/views/save-result.jsp";
        RequestDispatcher requestDispatcher = request.getRequestDispatcher(viewPath);
        requestDispatcher.forward(request, response);
    }
}
```

4. MemberListControllerV1 - íšŒì› ëª©ë¡ ì»¨íŠ¸ë¡¤ëŸ¬
```java
package hello.servlet.web.frontcontroller.v1.controller;

import hello.servlet.domain.member.Member;
import hello.servlet.domain.member.MemberRepository;
import hello.servlet.web.frontcontroller.v1.ControllerV1;
import jakarta.servlet.RequestDispatcher;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.util.List;

public class MemberListControllerV1 implements ControllerV1 {
    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/members.jsp";

        List<Member> members = memberRepository.findAll();
        request.setAttribute("members", members);

        RequestDispatcher requestDispatcher = request.getRequestDispatcher(viewPath);
        requestDispatcher.forward(request, response);
    }
}
```

5. ë‚´ë¶€ ë¡œì§ì€ ê¸°ì¡´ ì„œë¸”ë¦¿ê³¼ ê±°ì˜ ê°™ìŒ
6. ë”°ë¼ì„œ, ì´ì œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„
```java
package hello.servlet.web.frontcontroller.v1;

import hello.servlet.web.frontcontroller.v1.controller.MemberFormControllerV1;
import hello.servlet.web.frontcontroller.v1.controller.MemberListControllerV1;
import hello.servlet.web.frontcontroller.v1.controller.MemberSaveControllerV1;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.util.Map;
import java.util.HashMap;

@WebServlet(name = "frontControllerV1", urlPatterns = "/front-controller/v1/*")
// v1 í•˜ìœ„ì˜ ì–´ë–¤ URL ë“¤ì–´ì™€ë„ í•´ë‹¹ ì„œë¸”ë¦¿ í˜¸ì¶œ
public class FrontControllerV1 extends HttpServlet {
    private Map<String, ControllerV1> controllerMap = new HashMap<>();

    // ìƒì„±ìì— Mapì— ê° URLê³¼ í•´ë‹¹í•˜ëŠ” ê°ì²´ ìƒì„±
    public FrontControllerV1() {
        controllerMap.put("/front-controller/v1/members/new-form", new MemberFormControllerV1());
        controllerMap.put("/front-controller/v1/members/save", new MemberSaveControllerV1());
        controllerMap.put("/front-controller/v1/members", new MemberListControllerV1());
    }

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("FrontControllerV1.service");

        // ìš”ì²­ URL ì¤‘ URI ì¶”ì¶œ (/front-controller/v1/*)
        String requestURI = request.getRequestURI();

        // í•´ë‹¹ URIì— ëŒ€í•´ì„œ Mapì— ì €ì¥ëœ Key ê°’ê³¼ ë¹„êµí•´ ì¼ì¹˜í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ê°ì²´ ì¶”ì¶œ
        ControllerV1 controller = controllerMap.get(requestURI);

        // í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì—†ë‹¤ë©´, 404 Error (Not Found) ì‘ë‹µ í›„, Return
        if(controller == null) {
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);
            return;
        }

        // ì¡´ì¬í•œë‹¤ë©´, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰
        controller.process(request, response);
    }
}
```

7. í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶„ì„
   - urlPatterns = "/front-controller/v1/*" : /front-controller/v1ì„ í¬í•¨í•œ í•˜ìœ„ ëª¨ë“  ìš”ì²­ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì„œë¸”ë¦¿ì—ì„œ ìš”ì²­ì„ ìˆ˜í–‰
     + ì˜ˆ) /front-controller/v1, /front-controller/v1/a, /front-controller/v1/a/b ...
   - controllerMap
     + key : Mapping URL
     + value : í˜¸ì¶œë  ì»¨íŠ¸ë¡¤ëŸ¬
   - service()
     + ë¨¼ì € requestURIë¥¼ ì¡°íšŒí•´ ì‹¤ì œ í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ controllerMapì—ì„œ ì°¾ìŒ
     + ë§Œì•½, ì—†ë‹¤ë©´ 404(SC_NOT_FOUND) ìƒíƒœ ì½”ë“œ ë°˜í™˜
     + ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì°¾ê³ , controller.process(request, response); í˜¸ì¶œí•´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰
   - JSP
     + ì´ì „ MVCì—ì„œ ì‚¬ìš©í–ˆë˜ ê²ƒì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©

  8. ì‹¤í–‰
     - ë“±ë¡ : http://localhost:9090/front-controller/v1/members/new-form
     - ëª©ë¡ : http://localhost:9090/front-controller/v1/members
     - ê¸°ì¡´ ì„œë¸”ë¦¿, JSPë¡œ ë§Œë“  MVCì™€ ë™ì¼í•˜ê²Œ ì‹¤í–‰ë˜ëŠ” ê²ƒ í™•ì¸ ê°€ëŠ¥

  
