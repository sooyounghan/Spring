-----
### ìŠ¤í”„ë§ ì¸í„°ì…‰í„° - ìš”ì²­ ë¡œê·¸
-----
1. LogInterceptor - ìš”ì²­ ë¡œê·¸ ì¸í„°ì…‰í„°
```java
package hello.login.web.interceptor;

import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import lombok.extern.slf4j.Slf4j;
import org.springframework.web.method.HandlerMethod;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

import java.util.UUID;

@Slf4j
public class LogInterceptor implements HandlerInterceptor {
    public static final String LOG_ID = "logId";
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        String requestURI = request.getRequestURI();
        String uuid = UUID.randomUUID().toString();
        
        request.setAttribute(LOG_ID, uuid);
        
        // @RequestMapping : HandlerMethod
        // ì •ì  ë¦¬ì†ŒìŠ¤ : ResourceHttpRequestHandler
        if(handler instanceof HandlerMethod) {
            HandlerMethod handlerMethod = (HandlerMethod) handler; // í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ëª¨ë“  ì •ë³´ í¬í•¨
        }
        log.info("REQUEST = [{}][{}][{}]", uuid, requestURI, handler);
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        log.info("postHandle = [{}]", modelAndView);
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        String requestURI = request.getRequestURI();
        String uuid = (String) request.getAttribute(LOG_ID); // preHandleì˜ logID ë°›ìŒ
        
        log.info("RESPONSE = [{}][{}][{}]", uuid, requestURI, handler);
        
        if(ex != null) {
            log.error("afterCompletion error = ", ex);
        }
    }
}
```

2. String uuid = UUID.randomUUID().toString() : ìš”ì²­ ë¡œê·¸ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ uuid ìƒì„±
3. request.setAttribute(LOG_ID, uuid)
   - ì„œë¸”ë¦¿ í•„í„°ì˜ ê²½ìš° ì§€ì—­ë³€ìˆ˜ë¡œ í•´ê²°ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ëŠ” í˜¸ì¶œ ì‹œì ì´ ì™„ì „íˆ ë¶„ë¦¬ë˜ì–´ ìˆìŒ
   - ë”°ë¼ì„œ, preHandleì—ì„œ ì§€ì •í•œ ê°’ì„ postHandle, afterCompletionì—ì„œ í•¨ê»˜ ì‚¬ìš©í•˜ë ¤ë©´ requestì— ë‹´ì•„ë‘ì–´ì•¼ í•¨
   - ì´ ê°’ì€ afterCompletionì—ì„œ request.getAttribute(LOG_ID)ë¡œ ì°¾ì•„ì„œ ì‚¬ìš©
   - ğŸ’¡ LogInterceptorëŠ” ì‹±ê¸€í†¤ ì²˜ëŸ¼ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ë©¤ë²„ë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ë©´ ìœ„í—˜
4. return true : trueë©´ ì •ìƒ í˜¸ì¶œ (ë‹¤ìŒ ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ë‚˜ ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ)

```java
if(handler instanceof HandlerMethod) {
    HandlerMethod handlerMethod = (HandlerMethod) handler; // í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ëª¨ë“  ì •ë³´ í¬í•¨
}
```
5. HandlerMethod
   - í•¸ë“¤ëŸ¬ ì •ë³´ëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ ì‚¬ìš©í•˜ëŠ”ê°€ì— ë”°ë¼ ë‹¬ë¼ì§
   - ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë©´ ì¼ë°˜ì ìœ¼ë¡œ @Controller, @RequestMappingì„ í™œìš©í•œ í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í•˜ëŠ”ë°, ì´ ê²½ìš° í•¸ë“¤ëŸ¬ ì •ë³´ë¡œ HandlerMethodê°€ ë„˜ì–´ì˜´

6. ResourceHttpRequestHandler
   - @Controllerê°€ ì•„ë‹ˆë¼ /resoucres/staticê³¼ ê°™ì€ ì •ì  ë¦¬ì†ŒìŠ¤ê°€ í˜¸ì¶œë˜ëŠ” ê²½ìš° ResourceHttpRequestHandlerê°€ í•¸ë“¤ëŸ¬ ì •ë³´ë¡œ ë„˜ì–´ì˜¤ë¯€ë¡œ íƒ€ì…ì— ë”°ë¼ ì²˜ë¦¬ í•„ìš”
  
7. postHandle, afterCompletion
   - ì¢…ë£Œ ë¡œê·¸ë¥¼ postHandleì´ ì•„ë‹ˆë¼ afterCompletionì— ì‹¤í–‰í•œ ì´ìœ ëŠ” ì˜ˆì™¸ê°€ ë°œìƒí•œ ê²½ìš° postHandleì€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
   - afterCompletionì€ ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ í˜¸ì¶œë˜ëŠ” ê²ƒ ë³´ì¥

-----
### WebConfig - ì¸í„°ì…‰íŠ¸ ë“±ë¡
-----
```java
package hello.login.web.login;

import hello.login.web.filter.LogFilter;
import hello.login.web.filter.LoginCheckFilter;
import hello.login.web.interceptor.LogInterceptor;
import jakarta.servlet.Filter;
import org.springframework.boot.web.servlet.FilterRegistrationBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new LogInterceptor())
                .order(1)
                .addPathPatterns("/**")
                .excludePathPatterns("/css/**", "/*.ico", "/error");
    }
    // ...
}
```

1. ì¸í„°ì…‰í„°ì™€ í•„í„°ê°€ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ í•„í„°ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•œ logFiler()ì˜ @Bean ì£¼ì„ ì²˜ë¦¬
2. WebMvcConfigurerê°€ ì œê³µí•˜ëŠ” addIntereptors()ë¥¼ ì‚¬ìš©í•´ì„œ ì¸í„°ì…‰í„° ë“±ë¡ ê°€ëŠ¥
   - registry.addInterceptor(new LogInterceptor()) : ì¸í„°ì…‰í„° ë“±ë¡
   - order(1) : ì¸í„°ì…‰í„° í˜¸ì¶œ ìˆœì„œ ì§€ì • (ë‚®ì„ ìˆ˜ë¡ ë¨¼ì € í˜¸ì¶œ)
   - addPathPatterns("/**") : ì¸í„°ì…‰í„°ë¥¼ ì ìš©í•  URL íŒ¨í„´ ì§€ì •
   - excludePathPatterns("/css/**", "/*.ico", "/error") : ì¸í„°ì…‰í„°ì—ì„œ ì œì™¸í•  íŒ¨í„´ ì§€ì •
3. ì„œë¸”ë¦¿ í•„í„°ì™€ ë¹„êµí•´ë³´ë©´ ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ëŠ” addPathPatterns, excludePathPatternsë¡œ ë§¤ìš° ì •ë°€í•˜ê²Œ URL íŒ¨í„´ ì§€ì • ê°€ëŠ¥
4. ì‹¤í–‰ ë¡œê·¸
```
REQUEST  [6234a913-f24f-461f-a9e1-85f153b3c8b2][/members/add][hello.login.web.member.MemberController#addForm(Member)]

postHandle [ModelAndView [view="members/addMemberForm"; model={member=Member(id=null, loginId=null, name=null, password=null), org.springframework.validation.BindingResult.member=org.springframework.validation.BeanPropertyBindingResult: 0 errors}]]

RESPONSE [6234a913-f24f-461f-a9e1-85f153b3c8b2][/members/add]
```

-----
### ìŠ¤í”„ë§ì˜ URL ê²½ë¡œ
-----
1. ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” URL ê²½ë¡œëŠ” ì„œë¸”ë¦¿ ê¸°ìˆ ì´ ì œê³µí•˜ëŠ” URL ê²½ë¡œì™€ ì™„ì „íˆ ë‹¤ë¥´ë©°, ë”ìš± ìì„¸í•˜ê²Œ ì„¸ë°€í•˜ê²Œ ì„¤ì • ê°€ëŠ¥
2. PathPattern ê³µì‹ ë¬¸ì„œ
```
? í•œ ë¬¸ì ì¼ì¹˜

* ê²½ë¡œ(/) ì•ˆì—ì„œ 0ê°œ ì´ìƒì˜ ë¬¸ì ì¼ì¹˜

** ê²½ë¡œ ëê¹Œì§€ 0ê°œ ì´ìƒì˜ ê²½ë¡œ(/) ì¼ì¹˜

{spring} ê²½ë¡œ(/)ì™€ ì¼ì¹˜í•˜ê³  springì´ë¼ëŠ” ë³€ìˆ˜ë¡œ ìº¡ì²˜

{spring:[a-z]+} matches the regexp [a-z]+ as a path variable named "spring"
{spring:[a-z]+} regexp [a-z]+ ì™€ ì¼ì¹˜í•˜ê³ , "spring" ê²½ë¡œ ë³€ìˆ˜ë¡œ ìº¡ì²˜

{*spring} ê²½ë¡œê°€ ëë‚  ë•Œ ê¹Œì§€ 0ê°œ ì´ìƒì˜ ê²½ë¡œ(/)ì™€ ì¼ì¹˜í•˜ê³  springì´ë¼ëŠ” ë³€ìˆ˜ë¡œ ìº¡ì²˜

/pages/t?st.html â€” matches /pages/test.html, /pages/tXst.html but not /pages/toast.html

/resources/*.png â€” matches all .png files in the resources directory

/resources/** â€” matches all files underneath the /resources/ path, including /resources/image.png and /resources/css/spring.css

/resources/{*path} â€” matches all files underneath the /resources/ path and captures their relative path in a variable named "path"; /resources/image.png will match with "path" â†’ "/image.png", and /resources/css/spring.css will match with "path" â†’ "/css/spring.css"

/resources/{filename:\\w+}.dat will match /resources/spring.dat and assign the value "spring" to the filename variable
```
