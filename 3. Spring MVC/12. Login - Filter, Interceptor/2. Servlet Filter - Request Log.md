-----
### Servlet Filter - ìš”ì²­ ë¡œê·¸
-----
1. ê°€ì¥ ë‹¨ìˆœí•œ í•„í„°ì¸ ëª¨ë“  ìš”ì²­ì„ ë¡œê·¸ë¡œ ë‚¨ê¸°ëŠ” í•„í„° ê°œë°œ
2. LogFilter - ë¡œê·¸ í•„í„°
```java
package hello.login.web.filter;

import jakarta.servlet.*;
import jakarta.servlet.http.HttpServletRequest;
import lombok.extern.slf4j.Slf4j;

import java.io.IOException;
import java.util.UUID;

@Slf4j
public class LogFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        log.info("Log Filter Init");
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
        log.info("Log Filter doFilter");

        HttpServletRequest httpRequest = (HttpServletRequest) request;
        String requestURI = httpRequest.getRequestURI();

        String uuid = UUID.randomUUID().toString();

        try {
            log.info("REQUEST [{}][{}]", uuid, requestURI);
            filterChain.doFilter(request, response);
        } catch(Exception e) {
            throw e;
        } finally {
            log.info("RESPONSE [{}][{}]", uuid, requestURI);
        }
    }

    @Override
    public void destroy() {
        log.info("Log Filter Destroy");
    }
}
```

3. public class LogFilter implements Filter {} : í•„í„°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í•„í„° ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•¨
4. ğŸ’¡ doFilter(ServletRequest reqeust, ServletResponse response, FilterChain chain)
   - HTTP ìš”ì²­ì´ ì˜¤ë©´ doFilterê°€ í˜¸ì¶œ
   - ServletRequest requestëŠ” HTTP ìš”ì²­ì´ ì•„ë‹Œ ê²½ìš°ê¹Œì§€ ê³ ë ¤í•´ì„œ ë§Œë“  ì¸í„°í˜ì´ìŠ¤
   - ë”°ë¼ì„œ, HTTPë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ HttpServletRequest httpRequest = (HttpServletRequest) request; ì™€ ê°™ì´ Down-Casting
5. String uuid = UUID.randomUUID().toString(); : HTTP ìš”ì²­ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ìš”ì²­ë‹¹ ì„ì˜ì˜ uuid ìƒì„±
6. log.info("REQUEST [{}][{}]", uuid, requestURI); : uuidì™€ requestURIë¥¼ ì¶œë ¥
7. ğŸ’¡ chain.doFilter(request, response) : ë‹¤ìŒ í•„í„°ê°€ ìˆìœ¼ë©´ í˜¸ì¶œí•˜ê³ , í•„í„°ê°€ ì—†ìœ¼ë©´ ì„œë¸”ë¦¿ì„ í˜¸ì¶œ
   - ë§Œì•½ ì´ ë¡œì§ì„ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰ë˜ì§€ ì•ŠìŒ
  
-----
### WebConfig - í•„í„° ì„¤ì •
-----
```java
package hello.login.web.login;

import hello.login.web.filter.LogFilter;
import jakarta.servlet.Filter;
import jakarta.servlet.FilterRegistration;
import org.springframework.boot.web.servlet.FilterRegistrationBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class WebConfig {
    @Bean
    public FilterRegistrationBean logFilter() {
        FilterRegistrationBean<Filter> filterRegistrationBean = new FilterRegistrationBean<>();
        filterRegistrationBean.setFilter(new LogFilter());
        filterRegistrationBean.setOrder(1);
        filterRegistrationBean.addUrlPatterns("/*");

        return filterRegistrationBean;
    }
}
```
1. í•„í„°ë¥¼ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ ìˆìœ¼ë‚˜, ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ FilterRegistrationBeanì„ ì‚¬ìš©í•´ì„œ ë“±ë¡
   - setFilter(new LogFilter()) : ë“±ë¡í•  í•„í„°ë¥¼ ì§€ì •
   - setOrder(1) : í•„í„°ëŠ” ì²´ì¸ìœ¼ë¡œ ë™ì‘í•˜ë¯€ë¡œ ìˆœì„œê°€ í•„ìš”. ë‚®ì„ ìˆ˜ë¡ ë¨¼ì € ë™ì‘
   - addUrlPattern("/*") : í•„í„°ë¥¼ ì ìš©í•  URL íŒ¨í„´ ì§€ì •. í•œ ë²ˆì— ì—¬ëŸ¬ íŒ¨í„´ ì§€ì • ê°€ëŠ¥
   - URL íŒ¨í„´ì— ëŒ€í•´ì„œëŠ” í•„í„°ë„ ì„œë¸”ë¦¿ê³¼ ë™ì¼í•˜ë©°, ìì„¸í•œ ë‚´ìš©ì€ ì„œë¸”ë¦¿ URL íŒ¨í„´ ê²€ìƒ‰

2. @ServletComponentScan @WebFilter(filterName = "logFilter", urlPatterns = "/*")ë¡œ í•„í„° ë“±ë¡ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, í•„í„° ìˆœì„œ ì¡°ì ˆì´ ì•ˆ ë¨

3. ì‹¤í–‰ ë¡œê·¸
```java
2024-07-15T11:51:54.839+09:00  INFO 7336 --- [item-service] [           main] hello.login.web.filter.LogFilter         : Log Filter Init

2024-07-15T11:52:33.368+09:00  INFO 7336 --- [item-service] [nio-9090-exec-1] hello.login.web.filter.LogFilter         : Log Filter doFilter
2024-07-15T11:52:33.368+09:00  INFO 7336 --- [item-service] [nio-9090-exec-1] hello.login.web.filter.LogFilter         : REQUEST [abbaefdc-3866-4e43-9c0a-6b8d2dcfc307][/]
2024-07-15T11:52:33.958+09:00  INFO 7336 --- [item-service] [nio-9090-exec-1] hello.login.web.filter.LogFilter         : RESPONSE [abbaefdc-3866-4e43-9c0a-6b8d2dcfc307][/]

2024-07-15T11:52:34.048+09:00  INFO 7336 --- [item-service] [nio-9090-exec-2] hello.login.web.filter.LogFilter         : Log Filter doFilter
2024-07-15T11:52:34.048+09:00  INFO 7336 --- [item-service] [nio-9090-exec-2] hello.login.web.filter.LogFilter         : REQUEST [fc1cb2d3-0705-4bca-aaee-fa083167d536][/css/bootstrap.min.css]
2024-07-15T11:52:34.074+09:00  INFO 7336 --- [item-service] [nio-9090-exec-2] hello.login.web.filter.LogFilter         : RESPONSE [fc1cb2d3-0705-4bca-aaee-fa083167d536][/css/bootstrap.min.css]

2024-07-15T11:53:19.204+09:00  INFO 7336 --- [item-service] [nio-9090-exec-3] hello.login.web.filter.LogFilter         : Log Filter doFilter
2024-07-15T11:53:19.204+09:00  INFO 7336 --- [item-service] [nio-9090-exec-3] hello.login.web.filter.LogFilter         : REQUEST [9cbfb0e4-83c7-4d1e-80f3-84e3d1b13b26][/login]
2024-07-15T11:53:19.286+09:00  INFO 7336 --- [item-service] [nio-9090-exec-3] hello.login.web.filter.LogFilter         : RESPONSE [9cbfb0e4-83c7-4d1e-80f3-84e3d1b13b26][/login]

2024-07-15T11:53:25.478+09:00  INFO 7336 --- [item-service] [nio-9090-exec-5] hello.login.web.filter.LogFilter         : Log Filter doFilter
2024-07-15T11:53:25.479+09:00  INFO 7336 --- [item-service] [nio-9090-exec-5] hello.login.web.filter.LogFilter         : REQUEST [882eea5e-1319-4f3b-9974-874e18f46a5f][/members/add]
2024-07-15T11:53:25.492+09:00  INFO 7336 --- [item-service] [nio-9090-exec-5] hello.login.web.filter.LogFilter         : RESPONSE [882eea5e-1319-4f3b-9974-874e18f46a5f][/members/add]

...
```

4. í•„í„°ë¥¼ ë“±ë¡í•  ë•Œ urlPatternì„ "/*"ë¡œ ë“±ë¡í–ˆê¸° ë•Œë¬¸ì—, ëª¨ë“  ìš”ì²­ì— í•´ë‹¹ í•„í„°ê°€ ì ìš©
5. ì‹¤ë¬´ì—ì„œ HTTP ìš”ì²­ ì‹œ ê°™ì€ ìš”ì²­ì˜ ë¡œê·¸ì— ëª¨ë‘ ê°™ì€ ì‹ë³„ìë¥¼ ë‚¨ê¸°ëŠ” ë°©ë²•ì€ 'logback mdc'ë¡œ ê²€ìƒ‰

