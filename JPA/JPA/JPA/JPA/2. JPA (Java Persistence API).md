-----
### JPA (Java Persistence API)
-----
1. ìë°” ì§„ì˜ ORM ê¸°ìˆ  í‘œì¤€
2. ORM (Object-Relational Mapping, ê°ì²´-ê´€ê³„ ë§¤í•‘)
   - ê°ì²´ëŠ” ê°ì²´ëŒ€ë¡œ ì„¤ê³„
   - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŒ€ë¡œ ì„¤ê³„
   - ORM í”„ë ˆì„ì›Œí¬ê°€ ì¤‘ê°„ì— Mapping
   - ëŒ€ì¤‘ì ì¸ ì–¸ì–´ì—ëŠ” ëŒ€ë¶€ë¶„ ORM ê¸°ìˆ ì´ ì¡´ì¬

3. JPAëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ JDBC ì‚¬ì´ì—ì„œ ë™ì‘
<div align="center">
<img src="https://github.com/user-attachments/assets/b0521a0d-0e0c-44ec-99d5-7119c0e5ccf0">
</div>

4. JPA ë™ì‘ - ì €ì¥
<div align="center">
<img src="https://github.com/user-attachments/assets/b21c3045-3923-40eb-a181-9c7ce5ca6c27">
</div>

5. JPA ë™ì‘ - ì¡°íšŒ
<div align="center">
<img src="https://github.com/user-attachments/assets/200c2e16-5375-45ed-8601-dc2e4c000b41">
</div>

6. JPA ì†Œê°œ
<div align="center">
<img src="https://github.com/user-attachments/assets/bf9e04d6-12c8-4fe4-bd1e-dc4bbafbfbe2">
</div>

-----
### JPA í‘œì¤€ ëª…ì„¸
-----
1. JPAëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ìŒ
2. JPA 2.1 í‘œì¤€ ëª…ì„¸ë¥¼ êµ¬í˜„í•œ 3ê°€ì§€ êµ¬í˜„ì²´ : Hinbenate, EcpliseLink, DataNucleus
<div align="center">
<img src="https://github.com/user-attachments/assets/62b4341e-5989-4b01-a8dc-cf30fef9cd8b">
</div>

3. JPA ë²„ì „
   - JPA 1.0(JSR-220) (2006) : ì´ˆê¸° ë²„ì „. ë³µí•© í‚¤ì™€ ì—°ê´€ê´€ê³„ ê¸°ëŠ¥ ë¶€ì¡±
   - JPA 2.0(JSR-317) (2009) : ëŒ€ë¶€ë¶„ì˜ ORM ê¸°ëŠ¥ í¬í•¨, JPA Criteria ì¶”ê°€
   - JPA 2.1(JSR-338) (2013) : ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì € ì ‘ê·¼, ì»¨ë²„í„°(Converter), ì—”í‹°í‹° ê·¸ë˜í”„ ê¸°ëŠ¥ ì¶”ê°€

4. SQL ì¤‘ì‹¬ì  ê°œë°œì—ì„œ ê°ì²´ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œ (ìƒì‚°ì„±, ìœ ì§€ë³´ìˆ˜, íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ í•´ê²°, ì„±ëŠ¥, ë°ì´í„° ì ‘ê·¼ ì¶”ìƒí™”ì™€ ë²¤ë” ë…ë¦½ì„±, í‘œì¤€)
5. ìƒì‚°ì„± (JPAì™€ CRUD)
   - ì €ì¥ : jpa.insert(member)
   - ì¡°íšŒ : Member member = jpa.find(memberId)
   - ìˆ˜ì • : member.setName("ë³€ê²½í•  ì´ë¦„")
   - ì‚­ì œ : jpa.remove(member)

6. ìœ ì§€ ë³´ìˆ˜
   - ê¸°ì¡´ : í•„ë“œ ë³€ê²½ ì‹œ ëª¨ë“  SQL ìˆ˜ì •
   - JPA : í•„ë“œë§Œ ì¶”ê°€í•˜ë©´ SQLì€ JPAê°€ ì²˜ë¦¬

7. JPAì™€ íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ í•´ê²°
   - ìƒì† - ì €ì¥
     + jpa.persist(album);
     + ë‚˜ë¨¸ì§€ëŠ” JPAê°€ ì²˜ë¦¬(INSERT INTO ITEM ... / INSERT INTO ALBUM ...)
   - ìƒì† : ì¡°íšŒ
     + Album album = jpa.find(Album.class, albumId);
     + ë‚˜ë¨¸ì§€ëŠ” JPAê°€ ì²˜ë¦¬ (```SELECT I.*, A.* FROM ITEM I JOIN ALBUM A ON I.ITEM_ID = A.ITEM_ID```)
   - JPAì™€ ì—°ê´€ê´€ê³„, ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
     + ì—°ê´€ê´€ê³„ ì €ì¥ : member.setTeam(team); / jpa.persist(member);
     + ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ (Member member = jpa.find(Member.class, memberId); / Team team = member.getTeam();)
   - ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” Entity, ê³„ì¸µ
```java
class MemberService {
    ....
    public void process() {
        Member member = memberDAO.find(memberId);
        member.getTeam(); // ììœ ë¡œìš´ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
        member.getOrder().getDelivery();
    }
}
```
   - ğŸ’¡ JPAì™€ ë¹„êµ : ë™ì¼í•œ íŠ¸ëœì­ì…˜ì—ì„œ ì¡°íšŒí•œ EntityëŠ” ê°™ìŒ ë³´ì¥
```java
String memberId = "100";
Member member1 = jpa.find(Member.class, memberId);
Member member2 = jpa.find(Member.class, memberId);

member1 == member2; // ê°™ìŒ
```

8. JPAì˜ ì„±ëŠ¥ ìµœì í™” ê¸°ëŠ¥
   - 1ì°¨ ìºì‹œì™€ ë™ì¼ì„±(Identity) ë³´ì¥
     + ê°™ì€ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œëŠ” ê°™ì€ ì—”í‹°í‹° ë°˜í™˜ (ì•½ê°„ì˜ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ)
     + DB Isolation Levelì´ Read Commitì´ì–´ë„, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ Repeatable Read ë³´ì¥
```java
String memberId = "100";
Member member1 = jpa.find(Member.class, memberId); // SQL 1ë²ˆë§Œ ì‹¤í–‰
Member member2 = jpa.find(Member.class, memberId); // Cache

member1 == member2; // true
```

   - íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°(Transactional Write-Behind)
     + INSERT - íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•  ë•Œ ê¹Œì§€ INSERT SQLì„ ëª¨ìœ¼ë©°, JDBC BATCH SQL ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ í•œ ë²ˆì— SQL ì „ì†¡
```java
transaction.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

em.persist(memberA);
em.persist(memberB);
em.persist(memberC);
// ì—¬ê¸°ê¹Œì§€ INSERT SQLì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë³´ë‚´ì§€ ì•ŠìŒ

// Commit í•˜ëŠ” ìˆœê°„ ë°ì´í„°ë² ì´ìŠ¤ì— INSERT SQLì„ ëª¨ì•„ì„œ ì „ì†¡
transaction.commit(); // íŠ¸ëœì­ì…˜ ì»¤ë°‹
```

   + UPDATE, DELETEë¡œ ì¸í•œ ROW LOCK ì‹œê°„ ìµœì†Œí™”, íŠ¸ëœì­ì…˜ ì»¤ë°‹ì‹œ UPDATE, DELETE SQL ì‹¤í–‰í•˜ê³ , ë°”ë¡œ Commit
```java
transaction.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘

changeMember(memberA);
deleteMember(memberB);
ë¹„ì¦ˆë‹ˆìŠ¤_ë¡œì§_ìˆ˜í–‰(); // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰ ë™ì•ˆ DB ROW Lockì´ ê±¸ë¦¬ì§€ ì•ŠìŒ

// Commití•˜ëŠ” ìˆœê°„, ë°ì´í„°ë² ì´ìŠ¤ì— UPDATE, DELETE SQLì„ ë³´ëƒ„
transaction.commit(); // íŠ¸ëœì­ì…˜ ì»¤ë°‹
```

   - ì§€ì—° ë¡œë”©(Lazy Loading)
     + ì§€ì—° ë¡œë”© : ê°ì²´ê°€ ì‹¤ì œ ì‚¬ìš©ë  ë•Œ ë¡œë”©
     + ì¦‰ì‹œ ë¡œë”© : JOIN SQLë¡œ í•œë²ˆì— ì—°ê´€ëœ ê°ì²´ê¹Œì§€ ë¯¸ë¦¬ ì¡°íšŒ
<div align="center">
<img src="https://github.com/user-attachments/assets/48f54616-c89c-44ad-b7ef-59d3d3a2a92d">
</div>

