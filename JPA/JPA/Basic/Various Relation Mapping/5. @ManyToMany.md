-----
### ë‹¤ëŒ€ë‹¤ (ManyToMany)
-----
1. ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì •ê·œí™”ëœ í…Œì´ë¸” 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í‘œí˜„í•  ìˆ˜ ì—†ìŒ
2. ì—°ê²° í…Œì´ë¸”ì„ ì¶”ê°€í•´ì„œ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ë‚´ì•¼ í•¨
<div align="center">
<img src="https://github.com/user-attachments/assets/1f1f4a55-c483-4409-bc79-48e8b5101930">
</div>

3. ğŸ’¡ ê°ì²´ëŠ” ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ì„œ ê°ì²´ 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ ê°€ëŠ¥
<div align="center">
<img src="https://github.com/user-attachments/assets/788e168c-1cb2-4272-ba3f-f74cd96eb041">
</div>

  - Member
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

@Entity
public class Member {
    ...

    @ManyToMany
    @JoinTable(name = "MEMBER_PRODUCT") // ì—°ê²° í…Œì´ë¸”(MEMBER_PRODUCT) ì§€ì •
    private List<Product> products = new ArrayList<>();

    ...
}
```
```
...

Hibernate: 
    create table Member (
        LOCKER_ID bigint unique,
        MEMBER_ID bigint not null,
        TEAM_ID bigint,
        USERNAME varchar(255),
        primary key (MEMBER_ID)
    )

Hibernate: 
    create table MEMBER_PRODUCT (
        Member_MEMBER_ID bigint not null,
        products_id bigint not null
    )

Hibernate: 
    create table Product (
        id bigint not null,
        name varchar(255),
        primary key (id)
    )

...

Hibernate: 
    alter table if exists MEMBER_PRODUCT 
       add constraint FKc6hsxwm11n18ahnh5yvbj62cf 
       foreign key (products_id) 
       references Product

....

Hibernate: 
    alter table if exists MEMBER_PRODUCT 
       add constraint FK4ibylolqmostllrjdc147aowv 
       foreign key (Member_MEMBER_ID) 
       references Member

...

```

4. @ManyToMany ì‚¬ìš©
5. ğŸ’¡ @JoinTableë¡œ ì—°ê²° í…Œì´ë¸” ì§€ì •
6. ë‹¤ëŒ€ë‹¤ ë§¤í•‘ : ë‹¨ë°©í–¥, ì–‘ë°©í–¥ ê°€ëŠ¥
   - ì–‘ë°©í–¥ (Product) : mappedBy (ì£¼ì¸ì˜ ë°˜ëŒ€í¸ì´ë¯€ë¡œ)
```java
package hellojpa;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import jakarta.persistence.ManyToMany;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Product {

    ...

    @ManyToMany(mappedBy = "products")
    private List<Member> members = new ArrayList<>();

    ...
}
```
7. í•œê³„
   - í¸ë¦¬í•´ë³´ì´ì§€ë§Œ, ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
   - ì—°ê²° í…Œì´ë¸”ì´ ë‹¨ìˆœíˆ ì—°ê²°ë§Œ í•˜ê³  ëë‚˜ì§€ ì•ŠìŒ
   - ì£¼ë¬¸ ì‹œê°„, ìˆ˜ëŸ‰ ê°™ì€ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŒ (Mapping ì •ë³´ë§Œ ë“¤ì–´ê°€ì•¼í•˜ë©°, ì¶”ê°€ ì •ë³´ê°€ ë“¤ì–´ê°€ë©´ ì•ˆ ë¨)
   - ë˜í•œ, ì¿¼ë¦¬ ë˜í•œ ë³µì¡í•˜ê²Œ ìƒì„±
<div align="center">
<img src="https://github.com/user-attachments/assets/6235bd3c-238e-47a5-9b91-61c48c347629">
</div>


8. í•œê³„ ê·¹ë³µ
   - ì—°ê²° í…Œì´ë¸”ìš© ì—”í‹°í‹° ì¶”ê°€ (ì—°ê²° í…Œì´ë¸”ì„ ì—”í‹°í‹°ë¡œ ìŠ¹ê²©)
   - @ManyToMany â†’ @OneToMany, @ManyToOne
<div align="center">
<img src="https://github.com/user-attachments/assets/46c79daa-8cdf-4110-a0f5-257f51fa587a">
</div>

  - ë°©ì•ˆ : ORDER_IDë¡œ PKë¡œ ì„¤ì •, MEMBER_IDì™€ PRODUCT_IDëŠ” ê° í…Œì´ë¸” PKë¥¼ ì°¸ì¡°í•˜ëŠ” FK
  - ë‹¤ë¥¸ ë°©ì•ˆ : MEMBER_IDì™€ PRODUCT_IDë¥¼ ë¬¶ì–´ì„œ PKë¡œ ì„¤ì •í•˜ëŠ” ë°©ë²•ë„ ì¡´ì¬, ê°ê°ì€ FKë¡œ ê° í…Œì´ë¸” PK ì°¸ì¡° (Trade-Off í•„ìš”)

  - MemberProduct
```java
package hellojpa;

import jakarta.persistence.*;

@Entity
public class MemberProduct {

    @Id @GeneratedValue
    private Long id;

    @ManyToOne
    @JoinColumn(name = "MEMBER_ID")
    private Member member;

    @ManyToOne
    @JoinColumn(name = "PRODUCT_ID")
    private Product product;
}

```

  - Member
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Member {

    ...

    @OneToMany(mappedBy = "member")
    private List<MemberProduct> memberProducts = new ArrayList<>();

    ...
}
```

  - Product
```java
package hellojpa;

import jakarta.persistence.*;

import java.util.ArrayList;
import java.util.List;

@Entity
public class Product {

    ...

    @OneToMany(mappedBy = "product")
    private List<MemberProduct> memberProducts = new ArrayList<>();

    ...
}
```
